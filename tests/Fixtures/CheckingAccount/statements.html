<!DOCTYPE html>
<style>

    .onboarding-filtro {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .modal-onboarding {
        margin: 0px 30px;
    }

    #cabecalho-onboarding-filtro {
        width: 403px;
    }

    #titulo-onboarding-filtro {
        font-family: itau-display-xbold, Arial;
        color: #231D19;
        font-size: 24px;
        /* font-weight: bold; */
        line-height: 32px;
        margin: 0px;
    }

    #subtitulo-onboarding-filtro {
        font-family: itau-display-bold, Arial;
        font-size: 20px;
        line-height: 30px;
        color: #56504C;

    }

    .subtitulo-onboarding-filtro-destaque {
        font-family: itau-display-xbold;
    }

    .texto-onboarding-filtro {
        margin-top: 24px;
        font-family: itau-text-regular;
        font-size: 15px;
        line-height: 24px;
    }

    .texto-onboarding-filtro-laranja {
        margin-top: 24px;
        font-family: itau-text-regular;
        font-size: 16px;
        line-height: 24px;
        width: 381px;
        font-weight: bold;
        color: #EC7000;
    }

    .onboarding-filtro-botao {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 45px;
        margin-top: 10px;
    }

    #onboarding-filtro-botao {
        width: 125px;
        height: 48px;
        font-size: 16px;
        line-height: 32px;
        border-radius: 4px;
        letter-spacing: 0px;
        text-align: center;
        font-family: itau-text-regular;
    }

    #onboarding-filtro-botao.bold {
        font-family: itau-text-bold;
    }

    .btn-fechar-onboarding-filtro {
        padding-top: 14px !important;
        padding-right: 14px !important;
        padding: 14px;
        font-family: itaufonts_master_24px_v1;
        font-size: 24px;
        font-style: normal;
        font-weight: 400;
        line-height: 24px;
        letter-spacing: 0px;
        text-align: center;
        color: #EC7000;
    }

</style>

<script id="onboarding-filtro-template" type="text/template">
    <div class="modal-onboarding">
        <div class="onboarding-filtro">
            <div id="cabecalho-onboarding-filtro">
                <h2 id="titulo-onboarding-filtro">Novidade no Extrato!</h2>
                <p id="subtitulo-onboarding-filtro">Conhe&#231a a nova aba de posi&#231&#227o consolidada</p>
            </div>
            <div id="corpo-onboarding-filtro">
                <p class="texto-onboarding-filtro">Agora voc&#234 pode consultar todos os seus saldos de conta corrente
                    de um jeito muito mais simples e f&#225cil. <br/>Confira!</p>
                <p class="texto-onboarding-filtro-laranja">Ita&uacute; feito com voc&ecirc;!
                <p>
            </div>
        </div>
        <div class="onboarding-filtro-botao">
            <button id="onboarding-filtro-botao" class="itau-button" onclick="verExtrato()" type="button">
                ver extrato
            </button>
        </div>
    </div>
</script>

<script>

    var tituloOnboarding = "Novidade no Extrato!";
    var subtituloOnboarding = "Conhe&#231a a nova aba de posi&#231&#227o consolidada";
    var descricaoOnboarding = "Agora voc&#234 pode consultar todos os seus saldos de conta corrente de um jeito muito mais simples e f&#225cil. <br/>Confira!";
    var tagueamentoOnboarding = "PosicaoConsolidada";

    function fecharOnborading() {
        adobeDataLayer.init();
        setCookies("onboardingFiltro", true);
        var objAdobe = window.adobeDTM;

        objAdobe.site = {
            "nome": "IT",
            "ambiente": "LG",
            "negocio": "PF",
            "tipoDeCanal": "Web"
        },
            objAdobe.page = {
                "nome": "IT:LG:PF:Extrato:Aba:Lancamentos",
                "secao": "Extrato",
                "subSecao1": "Aba",
                "ambiente": "NovaInternet"
            },
            objAdobe.custom = {
                "squadresponsaveltag": "Gestao financeira e PFM:Extrato PF"
            },
            objAdobe.events = {
                "category": "Clique",
                "action": "Extrato:Aba:Lancamentos" + tagueamentoOnboarding,
                "label": "BTN:Aba:Lancamentos:Onboarding" + tagueamentoOnboarding + "Fechar"
            }

        window.analyticsData = objAdobe;
        adobeDataLayer.sendDataLayer();
    }

    function verExtrato() {
        setCookies("onboardingFiltro", true);
        adobeDataLayer.init();

        $(botaoLightBox).focus()
        $("#lightboxOverlay, #lightbox").each(function () {
            $(this).remove();
        });

        var objAdobe = window.adobeDTM;

        objAdobe.site = {
            "nome": "IT",
            "ambiente": "LG",
            "negocio": "PF",
            "tipoDeCanal": "Web"
        },
            objAdobe.page = {
                "nome": "IT:LG:PF:Extrato:Aba:Lancamentos",
                "secao": "Extrato",
                "subSecao1": "Aba",
                "ambiente": "NovaInternet"
            },
            objAdobe.custom = {
                "squadresponsaveltag": "Gestao financeira e PFM:Extrato PF"
            },
            objAdobe.events = {
                "category": "Clique",
                "action": "Extrato:Aba:Lancamentos:Onboarding" + tagueamentoOnboarding,
                "label": "BTN:Aba:Lancamentos:Onboarding" + tagueamentoOnboarding + "VerExtrato"
            }

        window.analyticsData = objAdobe;
        adobeDataLayer.sendDataLayer();
    }

    var novaInternet = novaInternet || {};


    (function (namespace) {
        namespace.OnboardingFiltro = function () {
            this.carregar = function () {

                var $corpo = $(Mustache.render($('#onboarding-filtro-template').html()));
                var lightbox = new novaInternet.Lightbox({
                    width: 465,
                    margem: false,
                    corpo: $corpo[0].outerHTML,
                    trigger: document
                });

                lightbox.render();

                this.$container = $("#onboarding-filtro");
                var $lightBoxContainer = $("#lightbox");
                $lightBoxContainer.find(".ni-lightbox-container").addClass("no-padding");
                $lightBoxContainer.find(".ni-lightbox-container").css("display", "flex");
                $lightBoxContainer.find(".ni-lightbox-container").css("flex-direction", "column");
                $lightBoxContainer.find(".ni-lightbox-btn-fechar")
                    .removeClass("margem-cima-negativo35")
                    .addClass("no-margem padding-cima24 btn-fechar-onboarding-filtro padding-direita24");
                $lightBoxContainer.find("#corpo-lightbox").addClass("no-padding");
                $lightBoxContainer.find("#corpo-lightbox").css("display", "flex")
                $lightBoxContainer.find("#corpo-lightbox").css("flex-direction", "column")
                $lightBoxContainer.find("#corpo-lightbox").css("align-items", "center")
                $lightBoxContainer.find("#lightbox-exterior-container").css("min-height", "371px");
                $lightBoxContainer.find("#lightbox-exterior-container").css("display", "flex")
                $lightBoxContainer.find("#lightbox-exterior-container").css("flex-direction", "column")
                $lightBoxContainer.find("#lightbox-exterior-container").css("align-items", "center")
                $lightBoxContainer.find("#lightboxTitle").css("display", "none");
                $lightBoxContainer.find("#ancoraLightbox").css("display", "none");
                $lightBoxContainer.find(".btn-fechar-onboarding-filtro").focus();
                $lightBoxContainer.find(".btn-fechar-onboarding-filtro").css("align-self", "flex-end");
                $("body").attr("id") == "person" && $lightBoxContainer.find(".btn-fechar-onboarding-filtro").css("color", "#876632");
            };
        };
    })(novaInternet);
</script>


<style>
    .valor-saldo-negrito-pf {
        color: #252220 !important;
    }

    .display-flex {
        display: flex;
        justify-content: flex-end;
    }

    button.button-icon.configuracao__dropdown_toggle {
        position: relative;
        display: inline-block;
        cursor: pointer;
        background: none;
        border: none;
    }

    button.button-icon.configuracao__dropdown_toggle i {
        font-size: 24px;
        pointer-events: none;
    }

    button.button-icon.configuracao__dropdown_toggle .button-icon__description {
        margin-top: 3px;
        font-size: 12px;
        display: block;
        font-family: itau-text-regular, Arial;
    }

    #corpoTabela-gridLancamentos-pessoa-fisica th {
        font-family: itau-text-regular, Arial !important;
        font-weight: normal;
    }

    #lancamentosFuturosTexto {
        float: right;
        color: #FF6200;
        font-size: 14px;
        padding-right: 6px;
        padding-top: 5px;
    }

    .valor-lancamento-bloqueado-pf {
        color: #106EB0;
        font-family: itau-text-bold, Arial;
        font-size: 14px;
        vertical-align: middle;
        text-align: right;
        border: none;
        border-bottom: 1px solid #EFE9E5 !important;
    }

    .quebra-palavra-pf {
        width: 95%;
    }
</style>


<script id="templateDetalhePix" type="text/template">
    <div class="detalhe-pix-conteudo">
        {{#lancamentos}}
        <div class="detalhe-lancamento-original">
            {{#troco}}
            <div class="saque-troco">
                <div class="identificacao-conteudo">
                    <p class="identificacao-label">lan&ccedil;amento</p>
                    <p class="identificacao-texto--lancamento"> {{literalLancamento}} </p>
                </div>
                <div class="identificacao-conteudo">
                    <p class="identificacao-label">data</p>
                    <p class="identificacao-texto"> {{{ dataHora }}} </p>
                </div>
                <div class="identificacao-conteudo">
                    <p class="identificacao-label">valor da compra (R$)</p>
                    <p class="identificacao-texto"> {{ saqueTroco.valorCompra }} </p>
                </div>
                <div class="identificacao-conteudo">
                    <p class="identificacao-label">valor do troco (R$)</p>
                    <p class="identificacao-texto"> {{ saqueTroco.valorTroco }} </p>
                </div>
                <div class="identificacao-conteudo">
                    <p class="identificacao-label">valor final (R$)</p>
                    <p class="identificacao-texto--valor-negativo"> - {{ saqueTroco.valorFinal }} </p>
                </div>
            </div>
            {{/troco}}
            {{^troco}}
            <div class="identificacao-conteudo">
                <p class="identificacao-label">lan&ccedil;amento</p>
                <p class="identificacao-texto--lancamento"> {{literalLancamento}} </p>
            </div>
            <div class="identificacao-conteudo">
                <p class="identificacao-label">data</p>
                <p class="identificacao-texto"> {{{ dataHora }}} </p>
            </div>
            <div class="identificacao-conteudo">
                <p class="identificacao-label">valor (R$)</p>
                {{#ePositivo}}
                {{#bloqueio}}
                <p class="identificacao-texto--valor-bloqueado"> {{ valor }} </p>
                {{/bloqueio}}
                {{^bloqueio}}
                <p class="identificacao-texto--valor-positivo"> {{ valor }} </p>
                {{/bloqueio}}
                {{/ePositivo}}
                {{^ePositivo}}
                {{#bloqueio}}
                <p class="identificacao-texto--valor-bloqueado"> - {{ valor }} </p>
                {{/bloqueio}}
                {{^bloqueio}}
                <p class="identificacao-texto--valor-negativo"> - {{ valor }} </p>
                {{/bloqueio}}
                {{/ePositivo}}
            </div>
            {{/troco}}
        </div>
        <div class="detalhe-pix-identificacao">
            <h3 class="identificacao-tipo"> {{{ fraseTipoLancamento }}}</h3>
            <div class="detalhe-pix-identificacao">
                {{#nomeFavorecido}}
                <div class="identificacao-conteudo">
                    <p class="identificacao-label">nome</p>
                    <p class="identificacao-texto--name" style="text-transform: lowercase"> {{{ nomeFavorecido }}}</p>
                </div>
                {{/nomeFavorecido}}
                {{#saqueTroco}}
                {{#cnpj}}
                <div class="identificacao-conteudo">
                    <p class="identificacao-label">cnpj</p>
                    <p class="identificacao-texto"> {{ cnpj }}</p>
                </div>
                {{/cnpj}}
                {{#psp}}
                <div class="identificacao-conteudo">
                    <p class="identificacao-label">psp</p>
                    <p class="identificacao-texto"> {{ psp }}</p>
                </div>
                {{/psp}}
                {{#id}}
                <div class="identificacao-conteudo">
                    <p class="identificacao-label">ID</p>
                    <p class="identificacao-texto"> {{ id }}</p>
                </div>
                {{/id}}
                {{/saqueTroco}}
                {{^saqueTroco}}
                {{#bancoFavorecido}}
                <div class="identificacao-conteudo">
                    <p class="identificacao-label">banco</p>
                    <p class="identificacao-texto--bank">
                        <span> {{{ bancoFavorecido }}}</span>
                    </p>
                </div>
                {{/bancoFavorecido}}
                {{#textoDescricao}}
                <div class="identificacao-conteudo">
                    {{#labelDescricao}}
                    <p class="identificacao-label">descri&ccedil;&atilde;o</p>
                    {{/labelDescricao}}
                    {{^labelDescricao}}
                    <p class="identificacao-label">motivo</p>
                    {{/labelDescricao}}
                    <p class="identificacao-texto" style="text-transform: lowercase">{{{ textoDescricao }}}</p>
                </div>
                {{/textoDescricao}}
                {{#identificador}}
                <div class="identificacao-conteudo">
                    <p class="identificacao-label">ID</p>
                    <p class="identificacao-texto"> {{ codigoControleCamara }}</p>
                </div>
                {{/identificador}}
                {{#fraseAgendado}}
                <div class="identificacao-conteudo">
                    <p class="identificacao-label">status</p>
                    <p class="identificacao-texto"> {{{ fraseAgendado }}}</p>
                </div>
                {{/fraseAgendado}}
                {{/saqueTroco}}
            </div>
        </div>
        {{#exibeListaDevolucao}}
        <div class="detalhe-pix-devolucao">
            <h3 class="identificacao-tipo">Devolvido:</h3>
            {{#devolucoes}}
            <div class="identificacao-conteudo">
                <p class="identificacao-texto--data"> {{ dataDevolucao }}</p>
                <p class="identificacao-texto--valor-negativo"><span>-R$</span><span> {{ valorDevolvido }}</span></p>
            </div>
            {{/devolucoes}}
        </div>
        {{/exibeListaDevolucao}}
        {{/lancamentos}}
    </div>
</script>


<form id="formLancamentosImpressao" data-type="download" method="post" action="#">
    <input type="hidden" name="op" data-op='Ay5/GuJY6JGqQRrgHfShhx1n3Fia5NEEuNH0KbyXp4s=;'/>
    <input type="hidden" name="titulo"/>
    <input type="hidden" name="nomeArquivo"/>
</form>

<div class="text-access-hide" id="alertaAberturaLupa">
    <span id="textoAlertaAberturaLupa"></span>
</div>
<div class="text-access-hide" id="alerta-filtro">
    <span class="text-access-hide" id="extrato-alerta-texto"
          aria-live="polite"></span>
</div>
<div class="padding-esquerda25 padding-direita25">

    <!DOCTYPE html>


    <style>

        #configuracao_saldo_footer {
            display: none !important;
        }

        .ni-input-expansivel input {
            max-width: 40px !important;
        }

        #extrato-main .ni-input-expansivel .ativo {
            min-width: 0px !important;
            transition: min-width 2s;
        }

        #extrato-main .ni-input-expansivel .ativo {
            transition-timing-function: linear;
        }

        #extrato-main .ni-input-expansivel .ativo:focus {
            min-width: 200px !important;
        }

        #botao-opcoes-lancamentos {
            min-width: 87px !important;
        }

        .icon-itaufonts_filtro:before {
            content: "\e957";
            float: left;
        }

        .ni-input-expansivel .acao {
            position: relative;
        }

        /*.ni-icone-menu-exportar:after {
    content: "filtros por data";
    font-family: itau-text-bold;
   position: relative;
   text-align: center;
   display: block;
   font-size: 16px;
   color: #56504C;
   padding-top: 5px;
    }*/

        .display-none {
            display: none;
        }

        #btn-opcoes-filtros {
            border: 1px solid #d9d9d9;
            min-width: 175px;
            min-height: 50px;
            border-radius: 5px;
        }

        .ni-filtro-pf {
            padding: 15px;
            background: #fff;
        }

        .titulo-filtro h2 {
            font-family: 'itau-display-bold', Arial;
        }

        .itau-bootstrap cpv-month-picker .month-picker__dropdown {
            left: -14px !important;
        }

        #extrato-main #month-range-picker {
            margin-right: 0px;
            max-width: 190px !important;
        }

        .combo-botoes button {
            width: 78px;
            height: 32px;
            font-size: 14px;
            padding: 0 0.25rem;
        }

        #btn-limpar-filtros {
            width: 190px;
            padding: 0;
            border: none;
        }

        #extrato-main #select-filtrarPeriodo cpv-form-element .select__options {
            min-width: 100% !important;
        }

        .itau-bootstrap cpv-month-picker .month-picker__icon__icon {
            float: right;
            position: initial;
        }

        .itau-bootstrap cpv-month-picker .month-picker__icon__group {
            width: 148px;
        }

        .largura-minima229 {
            min-width: 229px !important;
        }

        #extrato-main .combo-ordenacao cpv-form-element .select__options {
            min-width: 100%;
        }

        .date-mask-custom {
            border-top: 0 !important;
            border-left: 0 !important;
            border-right: 0 !important;
            border-radius: 0 !important;
            font-size: 14px !important;
        }

        .right240 {
            right: 240px;
        }

        .ni-filtro-pf#modal-filtro {
            margin-top: 8px;
        }

        .data-error {
            color: #781B8E;
            display: none;
        }

        .data-error span {
            font-size: 16px;
        }

        .date-mask-custom-erro {
            color: #781B8E !important;
            border-bottom-color: #781B8E !important;
        }

        .date-mask-custom-erro-final {
            color: #781B8E !important;
            border-bottom-color: #781B8E !important;
        }

        .date-mask-custom-erro-inicial {
            color: #781B8E !important;
            border-bottom-color: #781B8E !important;
        }

        .box-filtro-erro {
            color: #781B8E !important;
        }

        .box-filtro-erro-inicial {
            color: #781B8E !important;
        }

        .box-filtro-erro-final {
            color: #781B8E !important;
        }

        .erro-data-final-invalida {
            padding-left: 170px;
        }

        #btn-aplicar-filtros {
            width: 73px;
            position: absolute;
            bottom: 0;
        }

        #extrato-main button.icon-itaufonts_download.ni-icone-menu-exportar::after {
            content: "salvar como" !important;
            font-family: itau-text-regular;
            position: relative;
            text-align: center;
            display: block;
            font-size: 12px;
            color: #252220;
            padding-top: 5px;
        }


    </style>

    <div id="extrato-filtro-lancamentos" class="grid-col12 no-padding">
        <div class="container-filtro-extrato no-padding grid-col12">
            <div class="body-filtro-extrato grid-col7 no-margem no-padding-esquerda no-padding-direita"
                 style="width:445px;">
                <fieldset class="grid-col12 no-padding largura-minima245 margem-baixo15">
                    <legend class="element-access-hide block">consultar tipo de lan&ccedil;amento</legend>
                    <div class="campos-radio-filtro-extrato">
                        <div class="margem-cima8 margem-baixo10 margem-direita8 left">
                            <label class="fonte-tamanho14 itau-display-regular cor-605751"
                                   aria-hidden="true">consultar:</label>
                        </div>
                        <button
                            class="todas-filtro-extrato-pf box-filtro-extrato checked inline-block center margem-direita8 bg-white"
                            role="radio" aria-checked="true" value="todas"
                            onclick="tagueamentoGa4FiltrosRapidos('btn:consultar-todas')">
                            <span
                                class="inline-block fonte-tamanho16 itau-text-regular line-height16 center">todas</span>
                        </button>
                        <button
                            class="entradas-filtro-extrato-pf box-filtro-extrato inline-block center margem-direita8 bg-white"
                            role="radio" aria-checked="false" value="credito"
                            onclick="tagueamentoGa4FiltrosRapidos('btn:consultar-entradas')">
                            <span
                                class="inline-block fonte-tamanho16 itau-text-regular line-height16 center">entradas</span>
                        </button>
                        <button
                            class="saidas-filtro-extrato-pf box-filtro-extrato inline-block center margem-direita8 bg-white"
                            role="radio" aria-checked="false" value="debito"
                            onclick="tagueamentoGa4FiltrosRapidos('btn:consultar-saidas')">
                            <span class="inline-block fonte-tamanho16 itau-text-regular line-height16 center">sa&iacute;das</span>
                        </button>
                        <button
                            class="futuros-filtro-extrato-pf box-filtro-extrato inline-block center bg-white"
                            role="radio" aria-checked="false" value="futuros"
                            onclick="tagueamentoGa4FiltrosRapidos('btn:consultar-futuros')">
                            <span
                                class="inline-block fonte-tamanho16 itau-text-regular line-height16 center">futuros</span>
                        </button>
                    </div>
                </fieldset>
            </div>

            <div class="grid-col5 txt-right right margem-direita-negativa-8 container-btn-extrato"
                 style="width: auto; min-width: 270px; display: flex;">
                <div style="display: none" id="configuracao_saldo_header"
                     ng-controller="ConfiguracaoController as conf">
                    <configuracao-saldo cookies="::customer_id::" toggle="conf.estado"
                                        id="configuracao_saldo_header" style="display: none"></configuracao-saldo>
                </div>
                <div class="grid-col12 txt-right no-padding" style="width: auto; min-width: 120px;">
                    <div id="extrato-campo-busca" class="right no-padding ni-input-expansivel border-bottom-d9d9d9">
                        <fieldset class="no-padding">
                            <input type="text" aria-label="Busca" id="extrato-buscar"
                                   class="itau-display-regular placeholder-executed ativo" placeholder="buscar
 lan&ccedil;amento" maxlength="30" tabindex="0"> <span
                            class="icone txt-v-align-middle icon-itaufonts_busca_consulta fonte-tamanho24 hidden"></span>
                            <a href="javascript:;" class="acao" role="button" aria-label="buscar" tabindex="0"><span
                                class="txt-v-align-middle icon-itaufonts_busca_consulta fonte-tamanho24 cor-ec7000"></span></a>
                        </fieldset>
                    </div>
                </div>
                <div>

                    <button aria-label="imprimir" id="aba-lancamentos-imprimir"
                            class="icon-itaufonts_impressora ni-icone-menu-exportar no-padding-direita"
                            onclick="javascript:abrirExportarImpressao('#aba-lancamentos-imprimir');"
                            text-tooltip="imprimir" class-tooltip="cor-background-605751"
                            class-arrow-tooltip="border-top-color-605751" data-placement="bottom"
                            data-placement-arrow="center">
                    </button>


                </div>

                <button aria-label="salvar como" id="botao-opcoes-lancamentos"
                        class="icon-itaufonts_download ni-icone-menu-exportar no-padding-esquerda"
                        onclick="javascript:adobeBtnExtrato('BotaoSalvar', true);"
                        text-tooltip="salvar como" class-tooltip="cor-background-605751"
                        class-arrow-tooltip="border-top-color-605751" data-placement="top"
                        data-placement-arrow="center" aria-expanded="false">
                </button>
                <div class="posicao-absoluta right270">
                    <ul class="ni-menu-dropdown ni-menu-dropdown-pf largura-fixa213 txt-left hidden itau-display-regular">

                        <li>
                            <a href="javascript:;"
                               onclick="javascript:abrirExportarPDF('#botao-opcoes-lancamentos');" role="button">salvar
                                em PDF</a>
                        </li>


                        <li>
                            <a href="javascript:;"
                               onclick="javascript:abrirExportarExcel();" role="button">salvar
                                em Excel</a>
                        </li>
                        <li>
                            <a href="javascript:;"
                               onclick="javascript:exportarExtratoArquivo('formExportarExtrato', 'txt');" role="button">salvar
                                em arquivo de texto</a>
                        </li>
                        <li>
                            <a href="javascript:;"
                               onclick="javascript:exportarExtratoArquivo('formExportarExtrato', 'ofx');" role="button">salvar
                                em OFX</a></li>

                        <li>
                            <a href="javascript:;"
                               onclick="javascript:abrirExportarOfc();" role="button">salvar em OFC</a>
                        </li>

                    </ul>
                </div>


            </div>


            <div class="container-filtro-extrato no-padding grid-col12">
                <div class="form-element-group grid-col12 no-padding">
                    <div class="combo-ordenacao grid-col3 left separador-coluna padding-direita25"
                         id="comboOrdenacaoLancamentos" ng-controller="appController as app"
                         style="width: 172px !important; margin-top:6px; padding:0px">
                        <cpv-form-element
                            id="selectOrdenacao"
                            model="app.ordenacao"
                            change="app.change(app.ordenacao)"
                            element-id="selectid"
                            label="'ordenar por'"
                            type="'select'"
                            items="app.options"
                            placeholder="'selecione'">
                        </cpv-form-element>
                    </div>
                    <div class="grid-col9 padding-esquerda20 no-padding-direita largura-fixa675"
                         id="select-filtrarPeriodo" ng-controller="periodoController as pc">
                        <div class="left grid-col3 no-padding largura-minima229"
                             style=" margin-right: 25px; margin-top:6px;">
                            <cpv-form-element
                                id="selectPeriodo"
                                model="pc.periodoSelecionado"
                                change="pc.change(pc.periodoSelecionado)"
                                element-id="periodoFiltro"
                                label="'selecione o per&iacute;odo'"
                                type="'select'"
                                items="pc.options"
                                placeholder="'selecione'">
                            </cpv-form-element>
                        </div>
                        <div id="month-range-picker" class=" grid-col3 no-padding itau-bootstrap"
                             ng-show="pc.exibirFiltroMes">
                            <cpv-month-picker
                                id="month-range-picker"
                                label="personalizar"
                                placeholder="mm/aaaa"
                                selecionado="pc.selecionado"
                                min-date="{{pc.params.minDate}}"
                                max-date="{{pc.params.maxDate}}"
                                filtrar="pc.filtrar(selecionado)"
                                fechar="pc.fechar()">
                            </cpv-month-picker>
                        </div>


                        <div
                            class="box-filtro-personalizado grid-col5 padding-cima16 fonte-tamanho14 no-padding-direita largura-fixa400">
                            <div
                                class="box-filtro-personalizado-inicial input-group grid-col5 no-padding largura-fixa150">
                                <label for="date-mask-custom-inicial">data inicial: </label>
                                <input id="date-mask-custom-inicial" type="text" value="" placeholder="dd/mm/aaaa"
                                       class="date-mask-custom date-mask-custom-inicial date-from"
                                       onfocus="javascript:atualizaSelecaoPeriodoCustomizado()" onkeyup="validaData()"/>
                            </div>

                            <div
                                class="box-filtro-personalizado-final input-group grid-col5 rigth no-padding margem-esquerda20 largura-fixa150">
                                <label for="date-mask-custom-final">data final: </label>
                                <input id="date-mask-custom-final" type="text" value="" placeholder="dd/mm/aaaa"
                                       class="date-mask-custom date-mask-custom-final date-to"
                                       onfocus="javascript:atualizaSelecaoPeriodoCustomizado()" onkeyup="validaData()"/>

                            </div>
                            <div class="combo-botoes grid-col2 no-padding right" style="height:50px;">
                                <button class="itau-button itau-button--outline margem-esquerda10 right"
                                        id="btn-aplicar-filtros"
                                        onclick="javascript:consultarLancamentosPorPeriodo('', 'periodoDeAte')"
                                        disabled>filtrar
                                </button>
                            </div>

                            <div
                                class="box-erro-filtro-data grid-col12 padding-cima16 fonte-tamanho14 no-padding-esquerda"
                                role="alert">
                                <p class="data-error erro-data-inicial-invalida"><span
                                    class="icon-itaufonts_exclamacao"></span> data inicial
                                    <strong>inv&aacute;lida.</strong></p>
                                <p class="data-error erro-data-final-invalida"><span
                                    class="icon-itaufonts_exclamacao"></span> data final
                                    <strong>inv&aacute;lida.</strong></p>
                                <p class="data-error erro-data-inicial-maior"><span
                                    class="icon-itaufonts_exclamacao"></span> data inicial deve ser <strong>menor que a
                                    data final.</strong></p>
                                <p class="data-error erro-data-final-maior-que-data-atual"><span
                                    class="icon-itaufonts_exclamacao"></span> data final deve ser <strong>igual ou
                                    anterior a hoje.</strong></p>
                                <p class="data-error erro-data-maior-365dias"><span
                                    class="icon-itaufonts_exclamacao"></span> selecione <strong>intervalo m&aacute;ximo
                                    de 365 dias corridos.</strong></p>
                                <p class="data-error erro-data-inicial-anterior-2000"><span
                                    class="icon-itaufonts_exclamacao"></span> selecione data <strong>a partir do ano
                                    2000.</strong></p>
                                <p class="data-error erro-data-inicial-anterior-03-2023"><span
                                    class="icon-itaufonts_exclamacao"></span> Para per&iacute;odos anteriores a <strong>01/03/2023,</strong>
                                    consulte a op&ccedil;&atilde;o de per&iacute;odo <strong>m&ecirc;s
                                        completo.</strong></p>
                            </div>

                        </div>


                    </div>


                </div>

            </div>


            <div class="body-filtro-extrato grid-col12 no-margem">
                <hr class="separador"/>
            </div>
        </div>
    </div>

    <script>
        const sdk = window?.SDKAnalytics ?
            window.SDKAnalytics({
                gtm: 'GTM-NNRPQN6'
            }) :
            {
                track: function (event) {
                    console.log("GA4 Tracking event:", event);
                },
                setDefaultParameters: function (event) {
                    console.log("GA4 Set setDefaultParameters:", event);
                },
                setUserProperties: function (event) {
                    console.log("GA4 Set setUserProperties:", event);
                }
            };

        /*const inputBuscar = document.getElementById("extrato-buscar");

inputBuscar.addEventListener("focus", (event) => {
event.target.classList.add('inputGrande');
  event.target.classList.remove('inputPequeno');
  console.log("entrouuuuu FOCUS")
});

inputBuscar.addEventListener("blur", (event) => {
event.target.classList.remove('inputGrande');
 event.target.classList.add('inputPequeno');
  console.log("entrouuuuu BLUR")
});*/

        //feature discovery
        var overLayExtrato = '<div class="hopscotch-overlay-extrato"></div>';

        function initTourNovoExtrato() {
            var tour = {
                id: "tourExtrato",
                steps: [
                    {
                        title: "novidades",
                        content: "Agora voc&ecirc; tem todas as op&ccedil;&otilde;es de <br> salvar seu extrato em um s&oacute; lugar.",
                        target: "botao-opcoes-lancamentos",
                        placement: "bottom",
                        xOffset: -185,
                        showCTAButton: true,
                        ctaLabel: "pular",
                        onCTA: function () {
                            saveUserPreference()
                            hopscotch.endTour()
                            $('.hopscotch-overlay-extrato').remove();
                        }
                    },
                    {
                        title: "novidades",
                        content: "E voc&ecirc; pode escolher se deseja <br> ocultar o saldo do dia em <br> configura&ccedil;&otilde;es.",
                        target: 'configuracao_saldo_header',
                        placement: "bottom",
                        arrowOffset: "right",
                        xOffset: -185
                    }
                ],
                onEnd: function () {
//clicar no ok, entendi
                    saveUserPreference()
                    $('.hopscotch-overlay-extrato').remove();
                    $('#botao-opcoes-lancamentos').removeClass('hopscotch-target');
                    $('#configuracao_saldo_header').removeClass('hopscotch-target');
                    alteraStatusTarja("status");
                },
                onPrev: function () {
                    $('.hopscotch-title').focus()
                },
                onNext: function () {
                    $('.hopscotch-title').focus()
                },
                onClose: function () {
//clicar no bot&atilde;o fechar ou fora do modal
                    saveUserPreference()
                    alteraStatusTarja("status");
                }

            };

            hopscotch.configure({
                i18n: {
                    nextBtn: "pr&oacute;ximo",
                    prevBtn: "voltar",
                    doneBtn: "ok, entendi"
                },
                showPrevButton: true

            })

            hopscotch.listen("show", function () {
                alteraStatusTarja("");
                $(".hopscotch-bubble-number").remove();
                handleFocus()
                criaBullets()

                if (hopscotch.getCurrStepNum() == 0) {
                    $('#botao-opcoes-lancamentos').addClass('hopscotch-target');
                    $('#configuracao_saldo_header').removeClass('hopscotch-target');
                    $('.hopscotch-bubble-close.hopscotch-close').remove();

                    setTimeout(function () {
                        $('.hopscotch-bubble.animated').css('position', 'absolute')
                        $('.hopscotch-bubble.animated').css('top', $('#botao-opcoes-lancamentos').offset().top + 80)
                    }, 100);

//alterar ordem dos bot&otilde;es - acessibilidade
                    $('.hopscotch-next').insertBefore($('.hopscotch-cta'))

                } else {
                    handleFocus()
                    $('.hopscotch-actions').css('flex-direction', 'row');
                    $('#botao-opcoes-lancamentos').removeClass('hopscotch-target');
                    $('#configuracao_saldo_header').addClass('hopscotch-target');
                    $('.hopscotch-bubble-close.hopscotch-close').remove();

                    setTimeout(function () {
                        $('.hopscotch-bubble.animated').css('position', 'absolute')
                        $('.hopscotch-bubble.animated').css('top', $('#configuracao_saldo_header').offset().top + 80)
                    }, 200);
                }


            })

            if (!checkCookieTour()) {
                hopscotch.startTour(tour);
                $('body').append(overLayExtrato);
                $('.hopscotch-bubble-close.hopscotch-close').remove();
                $('.hopscotch-bubble').addClass('feature-discovery-extrato');
                $('.hopscotch-bubble').attr('role', 'dialog');
                $('#botao-opcoes-lancamentos').addClass('hopscotch-target');
                handleClickOutside();
            }

        }

        identificaZomm200 = function () {
            if (($.browser.name).indexOf('Microsoft Internet Explorer') > -1) {
                var screenZoomDevice = window.devicePixelRatio;
                if (screenZoomDevice != null) {
                    return screenZoomDevice >= 1.9;
                } else {
                    return screen.deviceXDPI / screen.systemXDPI >= 2;
                }
            } else if (($.browser.name).indexOf('Firefox') > -1) {
                return window.devicePixelRatio > 2;
            } else {
//Chrome ou Safari
                return window.outerWidth / window.innerWidth > 2;
            }
        }

        function alteraStatusTarja(status) {
            var tarja = $(".tarja-lancamento");
            if (tarja) {
                if (tarja.is(":visible")) {
                    tarja.attr("role", status);
                }
            }
        }

        function handleClickOutside() {
            $('body').on('click', function (event) {
                var parent = document.querySelector('.hopscotch-bubble');
                if (parent && !parent.contains(event.target) && !event.target.classList.contains("hopscotch-next") && !event.target.classList.contains("hopscotch-prev")) {
                    saveUserPreference()
                    hopscotch.endTour();
                    $('.hopscotch-overlay-extrato').remove();
                    $('#botao-opcoes-lancamentos').removeClass('hopscotch-target');
                    $('#configuracao_saldo_header').removeClass('hopscotch-target');
                }
            })

        }

        function handleFocus() {
            $("#divAcessTour").remove();

            var contInterno = '<div id="divAcessTour" role="alert" tabindex="-1">';

            $('.hopscotch-bubble').prepend(contInterno);

            setTimeout(function () {
                $('#divAcessTour').focus();
            }, 200);
        }


        $(document).on('keydown', function (e) {
            if ($('.hopscotch-bubble').hasClass('hide') === false) {
                var popUp = $('.feature-discovery-extrato ');

                var focusableElementsString = 'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]';

                var focusableElements = popUp.find(focusableElementsString);

                focusableElements = Array.prototype.slice.call(focusableElements);

                var firstTabStop = focusableElements[0];
                var lastTabStop = focusableElements[focusableElements.length - 1];

                $('.hopscotch-bubble').on('keydown', function (e) {
                    if (e.keyCode === 9) {
// If Shift + Tab
                        if (e.shiftKey) {
// If the current element in focus is the first focusable element within the modal window...
                            if (document.activeElement === firstTabStop) {
                                e.preventDefault();
// ...jump to the last focusable element
                                lastTabStop.focus();
                            }
// if Tab
                        } else {
// If the current element in focus is the last focusable element within the modal window...
                            if (document.activeElement === lastTabStop) {
                                e.preventDefault();
// ...jump to the first focusable element
                                firstTabStop.focus();
                            }
                        }
                    }

                    if (e.keyCode === 27) {
                        hopscotch.endTour();
                    }
                });
            }
        });

        function saveUserPreference() {
            localStorage.setItem("whatsnew", "::customer_id::");
        }

        function criaBullets() {
            if ($('.hopscotch-content').find('.hopscotch-bullets-extrato').length == 0) {
                $('.hopscotch-content').append('<div class="hopscotch-bullets-extrato"></div>');
                $('.hopscotch-bullets-extrato').append('<ul class="fluxo-passo-a-passo"></ul>');

                for (iLoop = 0; iLoop < tourElementsApp._intro.getCurrTour().steps.length; ++iLoop) {
                    $('.hopscotch-bullets-extrato .fluxo-passo-a-passo').append('<li id="hsStep' + iLoop + '_" ></li>');
                    var obj = $('#hsStep' + iLoop + '_');
                    var step = iLoop + 1
                    obj.text('Passo ' + step)

                    if (iLoop == tourElementsApp._intro.getCurrStepNum()) {
                        $(obj).addClass('ativo');
                        $(obj).attr('aria-current', 'step')
                    }
                }
            }
        }

        function getCookies(key) {
            return localStorage.getItem(key) === null ? false : localStorage.getItem(key);
        }

        function checkCookieTour() {
            if (getCookies("whatsnew")) {
                var arrayLikert = getCookies("whatsnew").split(';');

                for (var index = 0; index < arrayLikert.length; index++) {
                    const element = arrayLikert[index];

                    if (element == "::customer_id::") return true;
                }
            }

            return false;
        }

        function limpaTabelasDeLancamentos() {
            $('#extrato-grid-lancamentos, #extrato-grid-lancamentos-futuros-entrada, #extrato-grid-lancamentos-futuros-saida').empty();
            $('#extrato-btn-ver-mais-lancamentos').empty();
        }

        $("body").on("click", ".hopscotch-nav-button.prev.hopscotch-prev", function (e) {
            hopscotch.prevStep();
        });

        var filtro = null;

        var appLancamentos = angular.module("appOrdenacaoLancamentos", [
            'SelectModule', 'FocusModule', 'FormElementModule']);
        appLancamentos.controller('appController', ['$scope', 'focus',
            function ($scope, focus) {
                var self = this;
                self.elemento = null;
                self.options = [{
                    name: 'mais antigo',
                    value: 'maisAntigo'
                }, {
                    name: 'mais recente',
                    value: 'maisRecente'
                }];

                self.ordenacao = "maisAntigo";

                self.change = function (value) {
                    $(".modal-filtros-data").addClass("display-none");
                    if (value == "maisAntigo") {
                        armazenaValoresFiltro("filtroOrdenacao", "mais antigo");
                        checkCookieSalvarFiltros() && setCookies("filtro_ordenacao_" + iDPF, "mais antigo");
                        tagueamentoGa4FiltrosSelecionador('mais-antigos');
                        posicionaAccordionFuturoEmbaixo();
                    } else if (value == "maisRecente") {
                        armazenaValoresFiltro("filtroOrdenacao", "mais recente");
                        checkCookieSalvarFiltros() && setCookies("filtro_ordenacao_" + iDPF, "mais recente");
                        tagueamentoGa4FiltrosSelecionador('mais-recentes');
                        posicionaAccordionFuturoTopo();
                    }

                    renderLancamentosFuturos();
                    if (filtro) {
                        window.ordenaTabela(self.elemento, 'lancamentos', value);
                    }
                    $('#btn-opcoes-filtros').focus();
                }

                self.$onInit = function () {
                    self.elemento = $("#comboOrdenacaoLancamentos select");
                }

                self.checkSalvarFiltro = function () {
                    if (getCookies("salvar_filtros_off")) {
                        var arrayLikert = getCookies("salvar_filtros_off").split(';');

                        for (var index = 0; index < arrayLikert.length; index++) {
                            const element = arrayLikert[index];

                            if (element == "::customer_id::") return false;
                        }
                    }
                    return true;
                }

                if (self.checkSalvarFiltro() && "mais recente" == getCookies("filtro_ordenacao_" + "::customer_id::")) {
                    self.ordenacao = "maisRecente";
                } else {
                    self.ordenacao = "maisAntigo";
                }


            }]);
        angular.bootstrap(document.getElementById('comboOrdenacaoLancamentos'),
            ['appOrdenacaoLancamentos']);


        function posicionaAccordionFuturoTopo() {
            document.getElementById('div2FuturoBottom').innerHTML = "";
            document.getElementById('div1FuturoTop').innerHTML = accordionFuturo;
            document.getElementById('extrato-grid-lancamentos').style.marginBottom = "0rem";
            expandirOcultarTexto();
        }

        function posicionaAccordionFuturoEmbaixo() {
            document.getElementById('div1FuturoTop').innerHTML = "";
            document.getElementById('div2FuturoBottom').innerHTML = accordionFuturo;
            document.getElementById('extrato-grid-lancamentos').style.marginBottom = "1.5rem";
            expandirOcultarTexto();
        }

        function configuraAngular(periodoSelecionado, dataAberturaConta) {
            var appSelect = angular.module('filtroExtratoModule', ['SelectModule', 'FormElementModule',
                'MonthPickerModule', 'FocusModule']);
            appSelect
                .controller(
                    'periodoController',
                    [
                        '$scope',
                        'focus',
                        function ($scope, focus) {
                            var self = this;
                            var mesPesquisado = 0;
                            var data22Anos = moment().subtract(22, 'years').format('01/YYYY');
                            self.selecionado = {
                                ano: null,
                                mes: null,
                                viewValue: null
                            };

                            function init() {
                                if (checkCookieSalvarFiltros() && getCookies("filtro_periodo_" + iDPF) !== "" && getCookies("filtro_periodo_" + iDPF) !== false) {
                                    let filtroPeriodo = getCookies("filtro_periodo_" + iDPF);

                                    if (filtroPeriodo.includes(";")) {
                                        self.periodoSelecionado = "personalizado";
                                    } else if (filtroPeriodo.includes("/")) {
                                        self.periodoSelecionado = "mesCompleto";
//$("#select-filtrarPeriodo").removeClass("largura-fixa248");
                                        //$("#select-filtrarPeriodo").addClass("grid-col8");
                                        calculaDataInicioFim(filtroPeriodo);
                                    } else {
                                        self.periodoSelecionado = filtroPeriodo;
                                        calculaDataInicioFim(filtroPeriodo);
                                    }
                                } else {
                                    self.periodoSelecionado = periodoSelecionado;
                                    calculaDataInicioFim(periodoSelecionado)
                                }

                                dataAberturaConta = dataAberturaConta
                                    .substring(3, 10);

                                if (moment(dataAberturaConta, 'MM/YYYY')
                                    .diff(
                                        moment(data22Anos,
                                            'MM/YYYY'),
                                        'month') < 0) {
                                    dataAberturaConta = data22Anos;
                                }

                            }

                            init();

                            self.exibirFiltroMes = false;
                            self.options = [{
                                name: '&uacute;ltimos 7 dias',
                                value: "7"
                            }, {
                                name: '&uacute;ltimos 15 dias',
                                value: "15"
                            }, {
                                name: '&uacute;ltimos 30 dias',
                                value: "30"
                            }, {
                                name: '&uacute;ltimos 60 dias',
                                value: "60"
                            }, {
                                name: '&uacute;ltimos 90 dias',
                                value: "90"
                            }, {
                                name: 'm&ecirc;s completo (desde ' + moment(data22Anos, 'MM/YYYY').format('YYYY') + ')',
                                value: 'mesCompleto'
                            }];

                            self.options = true ?
                                self.options.concat({
                                    name: 'per&iacute;odo personalizado',
                                    value: 'personalizado'
                                }) : self.options;

                            self.change = function (modelo) {
                                console.log(modelo)
                                if (modelo === 'mesCompleto') {
                                    tagueamentoGa4FiltrosSelecionador('mes-completo');
                                    self.exibirFiltroMes = true;
                                    if (document.getElementById("btn-aplicar-filtros")) {
                                        document.getElementById("btn-aplicar-filtros").disabled = true;
                                    }
                                    self.selecionado.mes = null;
                                    self.selecionado.ano = null;
                                    self.selecionado.viewValue = null;
                                    self.ultimaSelecao = null;
                                    mesPesquisado = null;
                                    $(".box-filtro-personalizado").attr("style", "display:none");
//$("#select-filtrarPeriodo").removeClass("largura-fixa248");
                                    //$("#select-filtrarPeriodo").addClass("grid-col8");
                                } else if (modelo != 'personalizado' && filtro) {
                                    console.log(filtro)
                                    console.log(modelo)
                                    if (modelo === '7') {
                                        tagueamentoGa4FiltrosSelecionador('7-dias');
                                    } else if (modelo === '15') {
                                        tagueamentoGa4FiltrosSelecionador('15-dias');
                                    } else if (modelo === '30') {
                                        tagueamentoGa4FiltrosSelecionador('30-dias');
                                    } else if (modelo === '60') {
                                        tagueamentoGa4FiltrosSelecionador('60-dias');
                                    } else {
                                        tagueamentoGa4FiltrosSelecionador('90-dias');
                                    }
                                    self.exibirFiltroMes = false;
                                    calculaDataInicioFim(modelo);
                                    consultarLancamentosPorPeriodo(modelo);
//$("#select-filtrarPeriodo").removeClass("grid-col8");
                                    //$("#select-filtrarPeriodo").addClass("largura-fixa248");
                                    if (checkCookieSalvarFiltros()) {
                                        $("#month-range-picker").removeAttr('style');
                                    }
                                    $(".box-filtro-personalizado").removeAttr('style');
                                } else if (modelo === 'personalizado') {
                                    validaData();
                                    self.exibirFiltroMes = false;
//$("#select-filtrarPeriodo").removeClass("grid-col8");
                                    //$("#select-filtrarPeriodo").addClass("largura-fixa248");
                                    if (checkCookieSalvarFiltros()) {
                                        $("#month-range-picker").removeAttr('style');
                                    }
                                    $(".box-filtro-personalizado").removeAttr('style');
                                }

                                if (checkCookieSalvarFiltros()) {
                                    let orderCookies = (checkCookieSalvarFiltros() && getCookies("filtro_ordenacao_" + iDPF) !== "" && getCookies("filtro_ordenacao_" + iDPF) !== false) ? getCookies("filtro_ordenacao_" + iDPF) : 'mais antigo';
                                    angular.element(document.getElementById('comboOrdenacaoLancamentos')).scope().app.ordenacao = (orderCookies == 'mais antigo' ? 'maisAntigo' : 'maisRecente');
                                    armazenaValoresFiltro("filtroOrdenacao", orderCookies);
                                    ordenacaoDecrescenteLancamentos = false;
                                }

                                $('#btn-opcoes-filtros').focus();
                            }

                            self.params = {
                                minDate: dataAberturaConta,
                                maxDate: moment().format('MM/YYYY')
                            }

                            self.filtrar = function (selecionado) {
                                if (mesPesquisado !== selecionado.viewValue) {
                                    consultarLancamentosPorPeriodo(
                                        selecionado.viewValue,
                                        "mesCompleto");
                                    mesPesquisado = selecionado.viewValue;
                                    checkCookieSalvarFiltros() && setCookies("filtro_periodo_" + iDPF, mesPesquisado);
                                    filtroLancamentos.filtroSelecionado().periodoConsulta = mesPesquisado;
                                    armazenaValoresFiltro("periodoVisualizacao", mesPesquisado);
                                    calculaDataInicioFim(selecionado.viewValue);
                                }
                            }

                            self.fechar = function () {
                                var inputExpansivelBusca = $("#extrato-campo-busca :input")[0];
                                if ($(inputExpansivelBusca).hasClass(
                                    'ativo')) {
                                    setTimeout(
                                        function () {
                                            $(inputExpansivelBusca)
                                                .focus();
                                        }, 50);
                                }
                            }


                        }]);
            angular.bootstrap(document.getElementById('select-filtrarPeriodo'),
                ['filtroExtratoModule']);
        }

        var novaInternet = novaInternet || {};

        (function (namespace) {
            namespace.Filtro = function (containerFiltro, camposfiltro,
                                         listaLancamentos, atualizaGrid, periodoConsulta,
                                         dataHoraConsulta, mesCompleto) {

                filtro = {
                    tipoOperacao: (getCookies("filtro_visualizar_" + iDPF) !== "" && getCookies("filtro_visualizar_" + iDPF) !== false && checkCookieSalvarFiltros()) ? getCookies("filtro_visualizar_" + iDPF) : "todas",
                    futuros: false,
                    periodoConsulta: periodoConsulta,
                    termoBuscado: '',
                    termoBuscadoRegex: '',
                    termoBuscadoRegexSemPonto: '',
                    dataHoraConsulta: dataHoraConsulta,
                    mesCompleto: mesCompleto,
                    tipoOperacaoAplicado: false,
                    periodoAplicado: false,
                    pesquisaBuscaAplicado: false,
                    buscaAplicado: false
                };

                function listenerFiltroTipoOperacao() {
                    $('.box-filtro-extrato', containerFiltro).on(
                        'click',
                        function () {
                            if (filtro.tipoOperacao != $(this).val()) {
                                $('.box-filtro-extrato.checked',
                                    containerFiltro).each(function () {
                                    $(this).removeClass('checked');
                                    $(this).attr("aria-checked", "false");
                                });

                                $(this).addClass('checked');
                                $(this).attr("aria-checked", "true");

                                filtro.tipoOperacao = $(this).val();
                                filtro.tipoOperacaoAplicado = true;

                                if (angular.element(document.getElementById('comboOrdenacaoLancamentos')).scope().app.ordenacao == 'maisAntigo') {
                                    atualizaGrid(listaLancamentos, false);
                                    ordenacaoDecrescenteLancamentos = false;
                                    atualizaGrid(listaLancamentos, false);
                                } else {
                                    atualizaGrid(listaLancamentos, true);
                                    ordenacaoDecrescenteLancamentos = true;
                                    atualizaGrid(listaLancamentos, true);
                                }
                                if (filtro.tipoOperacao == 'futuros') {
                                    $("#extrato-grid-lancamentos").empty();
                                }
                                adobeFiltroTipoExtrato(filtro, true);

                            }
                        });
                }

                function formatarDataLancamento(lancamento) {
                    if (lancamento.diaLancamento && lancamento.mesLancamento) {
                        return lancamento.diaLancamento + '/'
                            + lancamento.mesLancamento;
                    }
                    return;
                }

                function montarRegexBuscaComPonto(termoBuscado) {
                    var valorBuscaSemPonto = termoBuscado.replace(/\./g, '')
                        .replace(/,/g, '.');
                    if ($.isNumeric(valorBuscaSemPonto)) {
                        valorBuscaSemPonto = termoBuscado.replace(/\./g, '');
                        return new RegExp(valorBuscaSemPonto, "i");
                    }
                    return;
                }

                this.verificaFiltro = function (item) {
                    var valorLancamento = item.ePositivo ? item.valorLancamento
                        : '-' + item.valorLancamento;

                    filtro.futuros = filtro.tipoOperacao === 'futuros'

                    var itemLista = (!filtro.termoBuscado || ((filtro.termoBuscadoRegex
                                .test(item.descricaoLancamento)
                            || (filtro.termoBuscadoRegex.test(item.dataLancamento))
                            || (filtro.termoBuscadoRegex
                                .test(formatarDataLancamento(item))) || (filtro.termoBuscadoRegexSemPonto ? filtro.termoBuscadoRegexSemPonto
                                    .test(valorLancamento.replace(/\./g, ''))
                                : false))))
                        && ((item.indicadorOperacao === filtro.tipoOperacao || filtro.tipoOperacao === 'todas' || (filtro.futuros === true && item.lancamentoFuturo === true)) || item.descricaoMesAno === true);
                    return itemLista;

                }

                this.carregar = function () {

                    listenerFiltroTipoOperacao();

                    var inputExpansivel = new novaInternet.InputExpansivel();
                    inputExpansivel.carregar('extrato-buscar',
                        'extrato-filtro-lancamentos',
                        'ex.: saque, TED, DOC...', this.buscar);

                };

                this.atualizarLancamentos = function (novosLancamentos) {
                    listaLancamentos = novosLancamentos;
                }

                this.removerTermoBuscado = function () {
                    var $campo = $("#extrato-buscar");
                    var $divCampo = $campo.parent();

                    $campo.val('');
                    $campo.data({
                        valorInput: ''
                    });
                    $('.acao', $divCampo).trigger("click");
                };

                this.filtroSelecionado = function () {
                    return filtro;
                }

                this.buscar = function (termoBuscado) {

                    termoBuscado = termoBuscado.trim();

                    if (termoBuscado !== filtro.termoBuscado) {
                        filtro.termoBuscado = termoBuscado;
                        filtro.termoBuscadoRegex = montarRegexBusca(termoBuscado);
                        filtro.termoBuscadoRegexSemPonto = montarRegexBuscaComPonto(termoBuscado);
                        filtro.pesquisaBuscaAplicado = true;
                        if ($("#comboOrdenacaoLancamentos select").val() == 'maisAntigo') {
                            atualizaGrid(listaLancamentos, false);
                        } else {
                            atualizaGrid(listaLancamentos, true);
                        }
                        adobeFiltroBuscaExtrato(filtro, true);
                    }

                }

                function removerAcentuacao(valor) {
                    valor = valor
                        .replace(
                            new RegExp(
                                /[\u00e1\u00e0\u00e2\u00e3\u00e4\u00c1\u00c0\u00c2\u00c3\u00c4]/gi),
                            'a');
                    valor = valor
                        .replace(
                            new RegExp(
                                /[\u00e9\u00e8\u00ea\u00ea\u00c9\u00c8\u00ca\u00cb]/gi),
                            'e');
                    valor = valor
                        .replace(
                            new RegExp(
                                /[\u00ed\u00ec\u00ee\u00ef\u00cd\u00cc\u00ce\u00cf]/gi),
                            'i');
                    valor = valor
                        .replace(
                            new RegExp(
                                /[\u00f3\u00f2\u00f4\u00f5\u00f6\u00d3\u00d2\u00d4\u00d5\u00d6]/gi),
                            'o');
                    valor = valor.replace(new RegExp(
                        /[\u00fa\u00f9\u00fb\u00fc\u00da\u00d9\u00db]/gi), 'u');
                    valor = valor.replace(new RegExp(/[\u00e7\u00c7]/gi), 'c');
                    valor = valor.replace(new RegExp(/[\u00f1\u00d1]/gi), 'n');
                    return valor;
                }

                function montarRegexBusca(termoBuscado) {
                    var valorBuscaFormatado = termoBuscado.replace(
                        /[\\\/\[\]\.\*\+\-$\^\}\{\)\(\|\?\&%]/g, function (
                            letra) {
                            return '\\' + letra;
                        });

                    valorBuscaFormatado = valorBuscaFormatado.replace(/ /g, "\\s+");
                    return new RegExp(removerAcentuacao(valorBuscaFormatado), 'i');
                }

            };
        })(novaInternet);

        function tagueamentoAbaLancamentosVazios(flagLancamentosFuturos) {
            adobeDataLayer.init();
            let aba = "";

            if (flagLancamentosFuturos) {
                aba = "LancamentosFuturos";
            } else {
                aba = "Lancamentos";
            }

            var objAdobe = window.adobeDTM;

            objAdobe.site = {
                "nome": "IT",
                "ambiente": "LG",
                "negocio": "PF",
                "tipoDeCanal": "Web"
            },
                objAdobe.page = {
                    "nome": "IT:LG:PF:Extrato:Aba:" + aba,
                    "secao": "Extrato",
                    "subSecao1": "Aba",
                    "ambiente": "NovaInternet"
                },
                objAdobe.custom = {
                    "squadresponsaveltag": "Assessoria e Resolutividade:Extrato PF"
                }
            objAdobe.events = {
                "category": "Objeto Visto",

                "action": "Extrato:Aba:" + aba + ":NaoHouveramMovimentacoes",

                "label": "BTN:Aba:" + aba + ":NaoHouveramMovimentacoes",
            }
            window.analyticsData = objAdobe;
            adobeDataLayer.sendDataLayer();
        }

        function atualizaSelecaoPeriodoCustomizado() {
            filtro.periodoConsulta = "personalizado";
            angular.element($("#selectPeriodo")).scope().pc.periodoSelecionado = "personalizado"
            angular.element($("#selectPeriodo")).scope().$apply();
            validaData();

            if ($('#month-range-picker').is(':visible')) {
                $(".data-error").attr("style", "display:none");
//$("#select-filtrarPeriodo").removeClass("grid-col8");
                //$("#select-filtrarPeriodo").addClass("largura-fixa248");
                $("#month-range-picker").removeAttr('style');
                $("#month-range-picker").addClass("ng-hide");
                $("#select-filtrarPeriodo select [value='personalizado']").prop("selected", true);

                feedbackAcessibilidade('filtro alterado para personalizado e m&ecirc;s completo removido')
            } else {
                $("#select-filtrarPeriodo select [value='personalizado']").prop("selected", true);
                feedbackAcessibilidade('per&iacute;odo dos lan&ccedil;amentos caixa de combina&ccedil;&atilde;o alterado para personalizado')
            }
        }

        function adicionaMascaraCamposDataDeAte() {
            $(".date-mask-custom").mask("00/00/0000", {
                translation: {
                    'r': {
                        pattern: /[\/]/,
                        fallback: '/'
                    },
                    placeholder: "dd/mm/aaaa"
                }
            });
            var dateFrom = ($("input.date-from").val()).replaceAll("-", "/");
            var dateTo = ($("input.date-to").val()).replaceAll("-", "/");
            document.getElementById("date-mask-custom-inicial").value = dateFrom;
            document.getElementById("date-mask-custom-final").value = dateTo;
        }

        var validaData = function () {
            adicionaMascaraCamposDataDeAte();
            var dataInicio = document.getElementById('date-mask-custom-inicial').value;
            var dataFim = document.getElementById('date-mask-custom-final').value;

            document.getElementById("btn-aplicar-filtros").disabled = dataInicio.length < 10 || dataFim.length < 10;
        };

        /* $(document).mouseup(function(e)
 {
 var modal = $(".modal-filtros-data");

 // if the target of the click isn't the container nor a descendant of the container
 if (!modal.is(e.target) && modal.has(e.target).length === 0)
 {
 $('.botao-opcoes-filtro').attr('aria-expanded', "false")
 $(".modal-filtros-data").addClass("display-none");
 }
 });*/


        function calculaDataInicioFim(filtroSelecionado) {
            if (filtroSelecionado.includes("/")) {
                let dataSplit = filtroSelecionado.split("/");

                var dataInicial = "01/" + filtroSelecionado;
                var dataFinal = new Date(parseInt(dataSplit[1]), parseInt(dataSplit[0]), 0).toLocaleDateString("pt-BR");
            } else {
                var dataInicial = moment().subtract(filtroSelecionado, "days").format('DD/MM/YYYY');
                var dataFinal = moment().format('DD/MM/YYYY');
            }

            $("input.date-to").val(dataFinal);
            $("input.date-from").val(dataInicial);
        }

        function consultarLancamentosPorPeriodo(parametrosPeriodo,
                                                opcaoSelecionadaPeriodo) {

            var parametros = {};
            var url;

            $('.date-mask-custom').removeClass('date-mask-custom-erro');
            $('.box-filtro-personalizado').removeClass('box-filtro-erro');
            $(".data-error").attr("style", "display:none");
            $('.date-mask-custom-inicial').removeClass('date-mask-custom-erro-inicial');
            $('.date-mask-custom-final').removeClass('date-mask-custom-erro-final');
            $('.box-filtro-personalizado-inicial').removeClass('box-filtro-erro-inicial');
            $('.box-filtro-personalizado-final').removeClass('box-filtro-erro-final');

            if (document.getElementById("btn-aplicar-filtros")) {
                document.getElementById("btn-aplicar-filtros").disabled = true;
            }

            if (filtro.periodoConsulta !== parametrosPeriodo) {

                if (opcaoSelecionadaPeriodo == "periodoDeAte") {
                    $(".data-error").attr("style", "display:none");
                    $('.date-mask-custom').removeClass('date-mask-custom-erro');
                    $('.date-mask-custom-inicial').removeClass('date-mask-custom-erro-inicial');
                    $('.date-mask-custom-final').removeClass('date-mask-custom-erro-final');
                    $('.box-filtro-personalizado-inicial').removeClass('box-filtro-erro-inicial');
                    $('.box-filtro-personalizado-final').removeClass('box-filtro-erro-final');
                    $('.box-filtro-personalizado').removeClass('box-filtro-erro');
                    debugger
                    var dateFrom = ($("input.date-from").val()).replaceAll("/", "-");
                    var dateTo = ($("input.date-to").val()).replaceAll("/", "-");
                    var atualData = new Date();
                    const novadateFrom = $("input.date-from").val();
                    const novadateTo = $("input.date-to").val();
                    var data1 = novadateFrom.split(/\//);
                    var data11 = [data1[1], data1[0], data1[2]].join('/');
                    var data2 = novadateTo.split(/\//);
                    var data22 = [data2[1], data2[0], data2[2]].join('/');
                    const dataInicialFormatada = new Date(data11);
                    const dataFinalFormatada = new Date(data22);
                    var timeDiff = Math.abs(dataFinalFormatada.getTime() - dataInicialFormatada.getTime());
                    var diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));
                    var data2000 = new Date('01-01-2000');
                    var data032023 = new Date('01-03-2023');
                    var dataLimite = new Date(new Date().setDate(atualData.getDate() - 365));
                    var dataLimiteFormatada = new Date(dataLimite);
//var dataLimete60 = moment().subtract(60, 'days').format('DD/MM/YYYY');
                    var novaDataLimite = new Date(new Date(dataInicialFormatada).setDate(dataInicialFormatada.getDate() + 1));
                    var novaDataLimite12 = novaDataLimite.toLocaleString('pt-BR', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric'
                    });
                    var dateFromMais1 = novaDataLimite12.replaceAll("/", "-");

                    /*if(dataInicialFormatada.toLocaleString('pt-br',{ year: 'numeric', month: '2-digit', day: '2-digit' }) == dataLimete60){
dateFrom = dateFromMais1;
}*/

                    if (dataInicialFormatada.toLocaleString('pt-br', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit'
                    }) != novadateFrom) {
                        $('.date-mask-custom-inicial').addClass('date-mask-custom-erro-inicial');
                        $('.box-filtro-personalizado-inicial').addClass('box-filtro-erro-inicial');
                        $(".erro-data-inicial-invalida").attr("style", "display:block");
                        return;
                    } else if (dataFinalFormatada.toLocaleString('pt-br', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit'
                    }) != novadateTo) {
                        $('.date-mask-custom-final').addClass('date-mask-custom-erro-final');
                        $('.box-filtro-personalizado-final').addClass('box-filtro-erro-final');
                        $(".erro-data-final-invalida").attr("style", "display:block");
                        return;
                    } else if (dataInicialFormatada > dataFinalFormatada) {
                        $('.date-mask-custom').addClass('date-mask-custom-erro');
                        $('.box-filtro-personalizado').addClass('box-filtro-erro');
                        $(".erro-data-inicial-maior").attr("style", "display:block");
                        return;
                    } else if (dataFinalFormatada > atualData) {
                        $('.date-mask-custom').addClass('date-mask-custom-erro');
                        $('.box-filtro-personalizado').addClass('box-filtro-erro');
                        $(".erro-data-final-maior-que-data-atual").attr("style", "display:block");
                        return;
                    } else if (diffDays > 365) {
                        console.log(diffDays)
                        $('.date-mask-custom').addClass('date-mask-custom-erro');
                        $('.box-filtro-personalizado').addClass('box-filtro-erro');
                        $(".erro-data-maior-365dias").attr("style", "display:block");
                        return;
                    } else if (dataInicialFormatada < data032023) {
                        $('.date-mask-custom').addClass('date-mask-custom-erro');
                        $('.box-filtro-personalizado').addClass('box-filtro-erro');
                        $(".erro-data-inicial-anterior-03-2023").attr("style", "display:block");
                        return;
                    } else {
                        filtro.mesCompleto = null;
                        filtro.periodoConsulta = dateFrom + ";" + dateTo;
                        console.log(filtro.periodoConsulta);
                        $('#extrato-btn-ver-mais-lancamentos-futuros').empty();
                        $('#extrato-grid-outros-lancamentos').empty();
                        $('#btn-opcoes-filtros').attr('aria-expanded', 'false');
                        filtro.mesCompleto = null;
                        $("#month-range-picker").addClass("ng-hide");
                        parametros = {
                            "dataInicio": dateFrom,
                            "dataFinal": dateTo
                        };
                        console.log(parametros);
                        tagueamentoGa4FiltrosSelecionador("periodo-personalizado" + "-" + dateFrom + "-" + dateTo + "-" + diffDays + "dias");

                        var flagLancamentosFuturos = "filtrarDataPersonalizada";
                        tagueamentoFiltroPersonalizado(flagLancamentosFuturos);

                        url = "8qqTIVIXcM/KHosNK9eDOIgaoSto+IxXXMoSF/DuQmM=;/extrato/lancamentos/filtrar/periodo";
                        armazenaValoresFiltro("periodoVisualizacao", filtroLancamentos.filtroSelecionado().periodoConsulta);
//var dateFrom = ($("input.date-from").val()).replaceAll("-", "/");
                        //var dateTo = ($("input.date-to").val()).replaceAll("-", "/");

                    }
                } else if (opcaoSelecionadaPeriodo === "mesCompleto") {
                    parametros = {
                        "mesCompleto": parametrosPeriodo
                    };
                    filtro.mesCompleto = parametrosPeriodo;
                    filtro.periodoConsulta = null;
                    url = "+5NDN0zZWU/+QvriXD4v6g8EbfzSPYIf6swP7Xo4OaI=;";
                    $(".modal-filtros-data").addClass("display-none");
                    $('#btn-opcoes-filtros').attr('aria-expanded', 'false');
                } else {
                    filtro.mesCompleto = null;
                    filtro.periodoConsulta = parametrosPeriodo;

// $('#extrato-grid-lancamentos-futuros').empty();
                    $('#extrato-btn-ver-mais-lancamentos-futuros').empty();

                    $('#extrato-grid-outros-lancamentos').empty();

                    parametros = {
                        "periodoConsulta": parametrosPeriodo
                    };

                    url = "MK93shczsaQ4cq+gxz+zdYTiRDjfoc1+qQp395EC9os=;";
                    $(".modal-filtros-data").addClass("display-none");
                    $('#btn-opcoes-filtros').attr('aria-expanded', 'false')
                    armazenaValoresFiltro("periodoVisualizacao", filtroLancamentos.filtroSelecionado().periodoConsulta);
                }
                validaData();
                adobeFiltroPeriodoExtrato(filtro, true);
            }

            $('#extrato-grid-lancamentos, #extrato-grid-lancamentos-futuros-entrada, #extrato-grid-lancamentos-futuros-saida').empty();
            $('#extrato-btn-ver-mais-lancamentos').empty();

            checkCookieSalvarFiltros() && setCookies("filtro_periodo_" + iDPF, filtroLancamentos.filtroSelecionado().periodoConsulta);
            filtraExtrato(parametros, url);
            $('#btn-opcoes-filtros').focus()
        }

        function tagueamentoFiltroPersonalizado(flagLancamentosFuturos) {
            adobeDataLayer.init();

            let btn = "";

            if (flagLancamentosFuturos === "filtrarDataPersonalizada") {
                btn = "FiltroPersonalizado";
            } else {
                btn = "LimparFiltros";
            }


            var objAdobe = window.adobeDTM;

            objAdobe.site = {
                "nome": "IT",
                "ambiente": "LG",
                "negocio": "PF",
                "tipoDeCanal": "Web"
            },
                objAdobe.page = {
                    "nome": "IT:LG:PF:Extrato:Aba:Lancamentos",
                    "secao": "Extrato",
                    "subSecao1": "Aba",
                    "ambiente": "NovaInternet"
                },
                objAdobe.custom = {
                    "squadresponsaveltag": "Assessoria e Resolutividade:Extrato PF"
                }
            objAdobe.events = {
                "category": "Clique",
                "action": "Extrato:Aba:Lancamentos:" + btn,
                "label": "BTN:Aba:Lancamentos:" + btn,
            }
            window.analyticsData = objAdobe;
            adobeDataLayer.sendDataLayer();
        }

        function limpaCustomAdobeDataLayer() {
            if (analyticsData.custom) {
                delete analyticsData.custom;
            }
        }

        function adobeFiltroTipoExtrato(filtro, enviar) {
            console.log("jaajanskjdnaskjdnaskjasn")
            var tipoFiltro = {
                'todas': 'filtroTodas',
                'credito': 'filtroEntradas',
                'debito': 'filtroSaidas',
                'futuros': 'filtroFuturos'
            };
            console.log([tipoFiltro[filtro.tipoOperacao]])

            if (filtro.buscaAplicado) {
                adobeFiltroBuscaExtrato(filtro);
            }
            limpaCustomAdobeDataLayer();
            adobeDataLayer.pushCustom('tipoDeBusca', 'Busca Interna Extrato PF');
            adobeDataLayer
                .pushCustom('events', [tipoFiltro[filtro.tipoOperacao]]);
            adobeDataLayer.pushRule('customLink');

            adobeSendDataLayer(enviar);

        }

        function tagueamentoGa4FiltrosRapidos(detailFiltro) {
            console.log(detailFiltro)
            sdk.track({
                analytics: {
                    event_name: "click",
                    parameters: {
                        custom_path: "/conta/consultar/extrato/timeline-idl/recentes",
                        implementation_team: "extrato-hub-de-contas-pf:gerir-vida-financeira",
                        detail: detailFiltro,
                    }
                }
            });
        }


        function tagueamentoGa4FiltrosSelecionador(opSelect) {
            console.log(opSelect)
            sdk.track({
                analytics: {
                    event_name: "filter",
                    parameters: {
                        custom_path: "/conta/consultar/extrato/timeline-idl/recentes",
                        implementation_team: "extrato-hub-de-contas-pf:gerir-vida-financeira",
                        search_option_selected: opSelect,
                    }
                }
            });


        }

        function adobeFiltroPeriodoExtrato(filtro, enviar) {
            var itensFiltrados = 'EXT|';

            if (filtro.mesCompleto !== undefined && filtro.mesCompleto !== null) {
                itensFiltrados = itensFiltrados.concat(filtro.mesCompleto).replace(
                    '/', '');
            } else {
                itensFiltrados = itensFiltrados.concat(filtro.periodoConsulta)
                    .concat('dias');
            }

            if (filtro.buscaAplicado) {
                adobeFiltroBuscaExtrato(filtro);
            }
            limpaCustomAdobeDataLayer();
            adobeDataLayer.pushCustom('tipoDeBusca', 'Busca Interna Extrato PF');
            adobeDataLayer.pushCustom('itensFiltrados', itensFiltrados);
            adobeDataLayer.pushRule('customLink');

            adobeSendDataLayer(enviar);
            filtro.periodoAplicado = true;
        }

        function adobeFiltroBuscaExtrato(filtro, enviar) {

            if (filtro.termoBuscado !== '') {
                var tipoFiltro = {
                    'todas': 'todas',
                    'credito': 'entradas',
                    'debito': 'saidas',
                    'futuros': 'filtroFuturos'
                };

                var busca = filtro.termoBuscado.concat(' | ').concat(tipoFiltro[filtro.tipoOperacao]);

                if (filtro.mesCompleto !== undefined && filtro.mesCompleto !== null) {
                    busca = busca.concat(' | ').concat(filtro.mesCompleto);
                } else {
                    busca = busca.concat(' | ').concat(filtro.periodoConsulta)
                        .concat(' dias');
                }
                limpaCustomAdobeDataLayer();
                adobeDataLayer.pushCustom('events', ['buscaInterna']);
                adobeDataLayer
                    .pushCustom('tipoDeBusca', 'Busca Interna Extrato PF');
                adobeDataLayer.pushCustom('termoDeBuscaComFiltros', busca);
                adobeDataLayer.pushCustom('termoDeBusca', filtro.termoBuscado);
                adobeDataLayer.pushRule('customLink');

                filtro.buscaAplicado = true;
            } else {
                adobeFiltrosBuscaExtratoReiniciar(filtro);
            }

            adobeSendDataLayer(enviar);
        }

        function adobeFiltrosBuscaExtratoReiniciar(filtro) {
            filtro.buscaAplicado = false;

            carregaDataLayer("Lancamentos");

            if (filtro.tipoOperacaoAplicado && filtro.periodoAplicado) {
                adobeFiltroTipoExtrato(filtro);
                adobeFiltroPeriodoExtrato(filtro);
            } else if (filtro.tipoOperacaoAplicado
                && filtro.periodoAplicado === false) {
                adobeFiltroTipoExtrato(filtro);
            } else if (filtro.periodoAplicado
                && filtro.tipoOperacaoAplicado === false) {
                adobeFiltroPeriodoExtrato(filtro);
            }
        }

        function adobeBtnExtrato(botao, enviar) {
            limpaCustomAdobeDataLayer();
            adobeDataLayer.pushCustom('itemClicado', 'BTN:PF:Extrato:' + botao);
            adobeDataLayer.pushCustom("events", "CliqueEmBotao");
            adobeDataLayer.pushRule("customLink");

            adobeSendDataLayer(enviar);
        }

        function adobeSendDataLayer(enviar) {
            if (enviar) {
                adobeDataLayer.sendDataLayer();
            }
        }

    </script>


</div>
<div id="extrato-resultado-filtro-lancamentos"
     class="itau-display-regular fonte-tamanho12 padding-esquerda25 padding-direita25 display-flex">
</div>

<div id="corpo-abas-lancamentos">
    <div class="padding-esquerda25 padding-direita25 grid-col12">
        <hr class="no-padding hr-extrato"/>
    </div>

    <div class="divFuturoTop" id="div1FuturoTop"></div>

    <div id="extrato-grid-lancamentos"
         class="grid-col12 margem-cima24 no-padding">

    </div>
    <div id="extrato-btn-ver-mais-lancamentos"
         class="center hide padding-cima40 conteudo-centralizado"></div>

    <div class="divFuturoBottom" id="div2FuturoBottom"></div>
</div>

<div class="grid-col12 padding-esquerda25 padding-direita25 margem-cima24 remover_impressao">

    <div id="data-hora-atualizado-em-lancamentos"
         class="line-height32 itau-text-regular fonte-tamanho14 texto"></div>

    <div
        class="grid-col6 txt-right right no-padding-direita display-flex">

        <div>

            <button aria-label="imprimir" id="aba-lancamentos-imprimir-rodape"
                    class="icon-itaufonts_impressora ni-icone-menu-exportar"
                    onclick="javascript:abrirExportarImpressao('#aba-lancamentos-imprimir-rodape');"
                    text-tooltip="imprimir" class-tooltip="cor-background-605751"
                    class-arrow-tooltip="border-top-color-605751" data-placement="bottom"
                    data-placement-arrow="center">
            </button>


        </div>
        <div>
            <button aria-label="salvar" id="botao-opcoes-lancamentos-rodape"
                    class="icon-itaufonts_salvar ni-icone-menu-exportar"
                    onclick="javascript:adobeBtnExtrato('BotaoSalvar', true);"
                    text-tooltip="salvar" class-tooltip="cor-background-605751"
                    class-arrow-tooltip="border-top-color-605751" data-placement="top"
                    data-placement-arrow="center" aria-expanded="false">
            </button>

            <div class="posicao-absoluta right270">
                <ul class="ni-menu-dropdown ni-menu-dropdown-pf largura-fixa213 txt-left hidden itau-display-regular">

                    <li>
                        <a href="javascript:;"
                           onclick="javascript:abrirExportarPDF('#botao-opcoes-lancamentos-rodape');" role="button">salvar
                            em PDF</a>
                    </li>


                    <li>
                        <a href="javascript:;"
                           onclick="javascript:abrirExportarExcel('#botao-opcoes-lancamentos-rodape');" role="button">salvar
                            em Excel</a>
                    </li>
                    <li>
                        <a href="javascript:;"
                           onclick="javascript:exportarExtratoArquivo('formExportarExtrato', 'txt');" role="button">salvar
                            em arquivo de texto</a>
                    </li>
                    <li>
                        <a href="javascript:;"
                           onclick="javascript:exportarExtratoArquivo('formExportarExtrato', 'ofx');" role="button">salvar
                            em OFX</a></li>

                    <li>
                        <a href="javascript:;"
                           onclick="javascript:abrirExportarOfc('#botao-opcoes-lancamentos-rodape');" role="button">salvar
                            em OFC </a></li>

                </ul>
            </div>
        </div>
        <div>
            <div style="display: inline-block" id="configuracao_saldo_footer"
                 ng-controller="ConfiguracaoController as cc">
                <configuracao-saldo cookies="::customer_id::" toggle="cc.estado"
                                    id="configuracao_saldo_footer"></configuracao-saldo>
            </div>
        </div>
    </div>
</div>

<div id="U3" class="hide"></div>


<script id="linhaTabelaLancamentosFuturos" type="text/template">
    {{#dadosCorpo}}
    {{^descricaoMesAno}}
    <tr class="linha-tabela-lancamentos-pf-sem-categoria extrato-tabela-pf linha-impressao">
        <th class="separador-coluna no-padding txt-v-align-middle extrato-impressao-zebrado nao-quebra-linha"
            style="border-bottom: 1px solid #EFE9E5; width: 120px" scope="row">
            {{#diaLancamento}}
            <span class="data-lancamento-pf fonte-impressao">{{dataLancamento}}</span>
            {{/diaLancamento}}
        </th>

        <td class="tipo-descricao-lancamento-pf no-padding coluna-tabela-lancamentos-descricao-pf fonte-impressao extrato-impressao-zebrado"
            style="width: 274px">
        <span class="quebra-palavra-pf">
{{descricaoLancamento}}
                    {{#exibeLupaEncargosLancamentosFuturos}}
                        <span class="itau-tooltip__container sem-impressao" style="float:none">
<button class="icon-itaufonts_informacao extrato-icone-informacoes-tooltip" aria-expanded="false"
        aria-label="mais informa&ccedil;&otilde;es" itau-tooltip-position="right"
        itau-tooltip="{{descricaoDetalhadaLancamento}}"></button>
<span role="status"></span>
    </span>
{{/exibeLupaEncargosLancamentosFuturos}}
</span>
        </td>
        </td>
        {{#ePositivo}}
        <td class="txt-right valor-lancamento-positivo-pf no-padding largura-minima175 fonte-impressao-bold extrato-impressao-zebrado"
            style="width: 175px">
            {{valorLancamento}}
        </td>
        {{/ePositivo}}
        {{^ePositivo}}
        <td class="txt-right valor-lancamento-negativo-pf no-padding largura-minima175 fonte-impressao-bold extrato-impressao-zebrado"
            style="width: 175px">
        <span class="block">
<span class="valor-lancamento-normal-negativo-pf fonte-impressao-bold">-</span>{{valorLancamento}}
</span>
        </td>
        {{/ePositivo}}
        <td class="no-border detalhe-lancamento-pf txt-v-align-middle no-padding txt-right sem-impressao">
            {{#exibeLupaEncargosLancamentosFuturos}}
            <button onclick="onClickExibirLupaEncargosLancamentoFuturos(this, '{{dataUltimaAtualizacao}}')"
                    class="exibir-link-pf link-sem-estilo-button no-padding sem-impressao"
                    role="button"
                    aria-label="exibir detalhes"
                    aria-expanded="false">
                <span class="exibir-link-texto itau-display-xbold"
                      style="visibility: hidden; display: none;">exibir</span>
                <span class="icon-itaufonts_seta_down txt-v-align-middle link-lupa-seta" aria-hidden="true"></span>
            </button>
            {{/exibeLupaEncargosLancamentosFuturos}}

            {{#pixFuturo}}
            <button onclick="onClickExibirLupaFuturoPix(this, '{{dataLancamento}}', '{{valorLancamento}}','{{descricaoLancamento}}', '{{diaLancame
nto}} / {{mesLancamento}}', '{{indicadorOperacao}}')"
                    class="exibir-link-pf link-sem-estilo-button no-padding sem-impressao" aria-label="exibir detalhes"
                    role="button" aria-expanded="false">
                <span class="exibir-link-texto itau-display-xbold"
                      style="visibility: hidden; display: none;">exibir</span>
                <span class="icon-itaufonts_seta_down txt-v-align-middle link-lupa-seta" aria-hidden="true"></span>
            </button>
            {{/pixFuturo}}
            {{#exibeLixeira}}
            <div class="wrapper-link-underline sem-impressao">
                <a data-op='yS0gjGU7pAa+tCFUMMQ4Ql0nc4zCPE9rbS/CimNSmDs=;' href="javascript:;"
                   style='font-family: Itau Text; font-size: 14px; line-height: 24px;margin-right:20px;'>cancelar
                    agendamento</a>
            </div>
            {{/exibeLixeira}}

        </td>
    </tr>
    {{/descricaoMesAno}}
    {{/dadosCorpo}}
</script>

<script id="linhaTabelaLancamentos" type="text/template">
    {{#dadosCorpo}}
    {{#saldoDia}}
    <tr class="linha-tabela-lancamentos-pf-saldo-dia extrato-tabela-pf linha-tabela-lancamentos-impressao">
        {{#diaLancamento}}
        <td class="separador-coluna no-padding txt-v-align-middle extrato-impressao-zebrado nao-quebra-linha">
            {{#mesLancamento}}
            <span class="data-lancamento-pf fonte-impressao">{{dataLancamento}}</span>
            {{/mesLancamento}}
        </td>
        {{/diaLancamento}}

        <td class="descricao-saldo-dia-pf no-padding no-padding-impressao coluna-tabela-lancamentos-descricao-pf fonte-impressao extrato-impressao-zebrado">
            {{descricaoLancamento}}
            {{#saldoDia}}
            <span class="itau-tooltip__container sem-impressao" style="float:none">
<button class="icon-itaufonts_informacao extrato-icone-informacoes-tooltip" aria-expanded="false"
        aria-label="mais informa&ccedil;&otilde;es" itau-tooltip-position="right" itau-tooltip="Soma do saldo em conta
com aplica&ccedil;&otilde;es autom&aacute;ticas at&eacute; o final do dia."></button>
<span role="status"></span>
</span>
            {{/saldoDia}}
        </td>
        <td class="descricao-saldo-dia-pf no-border no-padding no-padding-impressao coluna-tabela-lancamentos-descricao-pf fonte-impressao extrato-impressao-zebrado"></td>
        {{#ePositivo}}
        <td class="txt-right valor-saldo-dia-positivo-pf no-padding fonte-impressao-bold valor-saldo-negrito-pf extrato-impressao-zebrado">
            {{valorLancamento}}
        </td>
        {{/ePositivo}}
        {{^ePositivo}}
        <td class="txt-right valor-saldo-dia-negativo-pf no-padding fonte-impressao-bold valor-saldo-negrito-pf extrato-impressao-zebrado">
            {{valorLancamento}}
        </td>
        {{/ePositivo}}
        <td class="no-border no-padding sem-impressao"></td>
    </tr>
    {{/saldoDia}}
    {{^saldoDia}}
    {{#descricaoMesAno}}
    {{^lancamentoFuturo}}
    <tr class="linha-tabela-lancamentos-impressao linha-descricao-mes-ano">
        <td class="descricao-mes-ano-pf no-padding fonte-impressao no-padding-impressao extrato-impressao-zebrado"
            colspan="5">{{descricaoLancamento}}
        </td>
    </tr>
    {{/lancamentoFuturo}}
    {{/descricaoMesAno}}
    {{^descricaoMesAno}}
    {{^lancamentoFuturo}}
    <tr class="linha-tabela-lancamentos-pf-sem-categoria extrato-tabela-pf linha-impressao">
        <td class="separador-coluna no-padding txt-v-align-middle extrato-impressao-zebrado nao-quebra-linha"
            style="border-bottom: 1px solid #EFE9E5">
            {{#diaLancamento}}
            <span class="data-lancamento-pf fonte-impressao">{{dataLancamento}}</span>
            {{/diaLancamento}}

        </td>

        <td class="tipo-descricao-lancamento-pf no-padding coluna-tabela-lancamentos-descricao-pf fonte-impressao extrato-impressao-zebrado">
        <span class="quebra-palavra-pf">

{{#exibeLancamentosFilhos}}
<span class="icon-itaufonts_agencia icon-debito-guiche sem-impressao"></span> {{descricaoLancamento}}
<span class="itau-tooltip__container sem-impressao" style="float:none">
<button class="icon-itaufonts_ajuda extrato-icone-informacoes-tooltip" aria-expanded="false"
        aria-label="mais informa&ccedil;&otilde
;es" itau-tooltip-position="right"
        itau-tooltip="transa&ccedil;&atilde;o de d&eacute;bito realizada no guich&ecirc; de caixa da ag&ecirc;ncia"></button>
<span role="status"></span>
</span>
{{/exibeLancamentosFilhos}}
{{^exibeLancamentosFilhos}}

{{descricaoLancamento}}

{{#descricaoDetalhadaLancamento}}
<span class="itau-tooltip__container sem-impressao" style="float:none">
<button class="icon-itaufonts_informacao extrato-icone-informacoes-tooltip" aria-expanded="false"
        aria-label="mais informa&ccedil;&otilde;es" itau-tooltip-position="right"
        itau-tooltip="{{descricaoDetalhadaLancamento}}"></button>
<span role="status"></span>
</span>
{{/descricaoDetalhadaLancamento}}

{{/exibeLancamentosFilhos}}

{{#controleExibicao.pecaJa}}
<button onclick="onClickExibirLupaNovidade(this, 'U3')"
        class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao" role="button"
        aria-expanded="false">
<span
    class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
    aria-hidden="true"></span>
<span class="txt-underline itau-text-xbold fonte-tamanho16">pe&ccedil;a j&aacute;</span>
</button>
{{/controleExibicao.pecaJa}}
</span>
        </td>

        {{#pagamentoPixBloqueado}}
        {{#ePositivo}}
        <td class="txt-right valor-lancamento-bloqueado-pf no-padding largura-minima175 fonte-impressao-bold extrato-impressao-zebrado"
            style="width: 175px">
            {{valorLancamento}}
        </td>
        {{/ePositivo}}
        {{^ePositivo}}
        <td class="txt-right valor-lancamento-bloqueado-pf no-padding largura-minima175 fonte-impressao-bold extrato-impressao-zebrado"
            style="width: 175px">
        <span class="block">
<span class="fonte-impressao-bold">-</span>{{valorLancamento}}
</span>
        </td>
        {{/ePositivo}}
        {{/pagamentoPixBloqueado}}
        {{^pagamentoPixBloqueado}}
        {{#ePositivo}}
        <td class="txt-right valor-lancamento-positivo-pf no-padding largura-minima175 fonte-impressao-bold extrato-impressao-zebrado"
            style="width: 175px">
            {{valorLancamento}}
        </td>
        {{/ePositivo}}
        {{^ePositivo}}
        <td class="txt-right valor-lancamento-negativo-pf no-padding largura-minima175 fonte-impressao-bold extrato-impressao-zebrado"
            style="width: 175px">
        <span class="block">
<span class="valor-lancamento-normal-negativo-pf fonte-impressao-bold">-</span>{{valorLancamento}}
</span>
        </td>
        {{/ePositivo}}
        {{/pagamentoPixBloqueado}}

        <td class="txt-right valor-lancamento-positivo-pf no-padding largura-minima175 fonte-impressao-bold extrato-impressao-zebrado"></td>
        <td class="no-border detalhe-lancamento-pf txt-v-align-middle no-padding txt-right sem-impressao">
            {{#exibeLupaTransferencia}}

            {{#exibeLupaTransferenciaTED}}
            <button onclick="onClickExibirLupaTransferenciaTED(this, '{{detalheLancamento}}', '{{dataLancamento}}', '{{valorLancamento}}', '{{ag
enciaOrigem}}', '{{chaveFluir}}')" class="exibir-link-pf link-sem-estilo-button no-padding sem-impressao" role="button"
                    aria-label="exibir detalhes" aria-expanded="false">
                <span class="icon-itaufonts_seta_down txt-v-align-middle link-lupa-seta" aria-hidden="true"></span>
            </button>
            {{/exibeLupaTransferenciaTED}}
            {{^exibeLupaTransferenciaTED}}
            <button onclick="onClickExibirLupaTransferencia(this, '{{detalheLancamento}}', '{{dataLancamento}}', '{{valorLancamento}}', '{{agenc
iaOrigem}}')" class="exibir-link-pf link-sem-estilo-button no-padding sem-impressao" role="button"
                    aria-label="exibir detalhes" aria-expanded="false">
                <span class="icon-itaufonts_seta_down txt-v-align-middle link-lupa-seta" aria-hidden="true"></span>
            </button>
            {{/exibeLupaTransferenciaTED}}


            {{/exibeLupaTransferencia}}

            {{#exibeLupaChequeCompensado}}
            <button
                onclick="onClickExibirChequeCompensado(this, '{{numeroCheque}}', '{{dataLancamento}}', '{{agenciaOrigem}}')"
                class="exibir-link-pf link-sem-estilo-button no-padding sem-impressao" role="button"
                aria-label="exibir detalhes" aria-expanded="false">
                <span class="icon-itaufonts_seta_down txt-v-align-middle link-lupa-seta" aria-hidden="true"></span>
            </button>
            {{/exibeLupaChequeCompensado}}

            {{#exibeLupaDebitoAutomatico}}
            <button
                onclick="onClickExibirLupaDebitoAutomatico(this, '{{dataLancamento}}', '{{valorLancamento}}', '{{agenciaOrigem}}')"
                class="exibir-link-pf link-sem-estilo-button no-padding sem-impressao" role="button"
                aria-label="exibir detalhes" aria-expanded="false">
                <span class="icon-itaufonts_seta_down txt-v-align-middle link-lupa-seta" aria-hidden="true"></span>
            </button>
            {{/exibeLupaDebitoAutomatico}}

            {{#exibeLancamentosFilhos}}
            <button onclick="onClickExibirLupaLancamentosFilhos(this, '{{chaveFluir}}', '{{dataLancamento}}', '{{valorLancamento}}', '{{agenciaOri
gem}}', '{{descricaoLancamento}}', '{{diaLancamento}} / {{mesLancamento}}')"
                    class="exibir-link-pf link-sem-estilo-button no-padding sem-impressao btnExibeGuiche"
                    aria-label="exibir detalhes" role="button" aria-expanded="false">
                <span class="exibir-link-texto itau-display-xbold"
                      style="visibility: hidden; display: none;">exibir</span>
                <span class="icon-itaufonts_seta_down txt-v-align-middle link-lupa-seta" aria-hidden="true"></span>
            </button>
            {{/exibeLancamentosFilhos}}


            {{#exibeDetalhePix}}
            <button onclick="onClickExibirLupaDetalhePix(this, '{{chaveFluir}}', '{{dataLancamento}}', '{{valorLancamento}}','{{descricaoLancament
o}}', '{{diaLancamento}} / {{mesLancamento}}', '{{indicadorOperacao}}')"
                    class="exibir-link-pf link-sem-estilo-button no-padding sem-impressao" aria-label="exibir detalhes"
                    role="button" aria-expanded="false">
                <span class="exibir-link-texto itau-display-xbold"
                      style="visibility: hidden; display: none;">exibir</span>
                <span class="icon-itaufonts_seta_down txt-v-align-middle link-lupa-seta" aria-hidden="true"></span>
            </button>
            {{/exibeDetalhePix}}

            {{#pixFuturo}}
            <button onclick="onClickExibirLupaFuturoPix(this, '{{dataLancamento}}', '{{valorLancamento}}','{{descricaoLancamento}}', '{{diaLancame
nto}} / {{mesLancamento}}', '{{indicadorOperacao}}')"
                    class="exibir-link-pf link-sem-estilo-button no-padding sem-impressao" aria-label="exibir detalhes"
                    role="button" aria-expanded="false">
                <span class="exibir-link-texto itau-display-xbold"
                      style="visibility: hidden; display: none;">exibir</span>
                <span class="icon-itaufonts_seta_down txt-v-align-middle link-lupa-seta" aria-hidden="true"></span>
            </button>
            {{/pixFuturo}}

            {{#exibeLupaEncargosLancamentos}}
            <button onclick="onClickExibirLupaEncargosLancamentos(this)"
                    class="exibir-link-pf link-sem-estilo-button no-padding sem-impressao" role="button"
                    aria-label="exibir detalhes" aria-expanded="false">
                <span class="icon-itaufonts_seta_down txt-v-align-middle link-lupa-seta" aria-hidden="true"></span>
            </button>
            {{/exibeLupaEncargosLancamentos}}
        </td>
    </tr>
    {{/lancamentoFuturo}}
    {{/descricaoMesAno}}
    {{/saldoDia}}
    {{/dadosCorpo}}
</script>

<script>
    !function (t) {
        var a = {};

        function i(o) {
            if (a[o]) return a[o].exports;
            var e = a[o] = {i: o, l: !1, exports: {}};
            return t[o].call(e.exports, e, e.exports, i), e.l = !0, e.exports
        }

        i.m = t, i.c = a, i.d = function (o, e, t) {
            i.o(o, e) || Object.defineProperty(o, e, {enumerable: !0, get: t})
        }, i.r = function (o) {
            "undefined" != typeof Symbol && Symb
            ol.toStringTag && Object.defineProperty(o, Symbol.toStringTag, {value: "Module"}), Object.defineProperty(o, "__esModule", {value: !0})
        }, i.t = function (e, o) {
            if (
                1 & o && (e = i(e)), 8 & o) return e;
            if (4 & o && "object" == typeof e && e && e.__esModule) return e;
            var t = Object.create(null);
            if (i.r(t), Object.defineProperty(t, "default
                ",{enumerable:!0,value:e}),2&o&&"
            string
            "!=typeof e)for(var a in e)i.d(t,a,function(o){return e[o]}.bind(null,a));return t},i.n=function(o){var e=o&&
            o.__esModule ? function () {
                return o.default
            } : function () {
                return o
            };
            return i.d(e, "a", e), e
        }, i.o = function (o, e) {
            return Object.prototype.hasOwnProperty.call(
                o, e)
        }, i.p = "", i(i.s = 0)
    }([function (o, e, t) {
        o.exports = t(1)
    }, function (o, e, t) {
        "use strict";
        t(2);
        var a, i = t(3), n = (a = i) && a.__esModule ? a : {default: a};
        angular.m
        odule("configuracaoSaldoModule", ["ngSanitize", "cpvButtonIconModule", "MenuDropdownModule"]).component("configuracaoSaldo", (0, n.default)())
    }, function (
        o, e, t) {
    }, function (o, e, t) {
        "use strict";
        Object.defineProperty(e, "__esModule", {value: !0}), e.default = function () {
            return {
                bindings: {
                    cookies: "@", toggle: "=?"
                    , id: "@"
                }, controllerAs: "ctrl", controller: ["$scope", function (t) {
                    var a = this;
                    a.toggleClass = !1, a.switcherSaldoDia = !0, a.switcherSalvarFiltros = !0, a.hasLabe
                    l = !0, a.$onInit = function (o) {
                        a.filterCookiesSaldoDia = {
                            key: "saldo_dia_off",
                            value: a.cookies
                        }, a.filterCookiesSalvarFiltros = {
                            key: "salvar_filtros_off", valu
                            e: a.cookies
                        }, a._event(), a._checkBotaoInCookies(a.filterCookiesSaldoDia) && (a.switcherSaldoDia = !1), a._checkBotaoInCookies(a.filterCookiesSalvarFiltros
                        ) && (a.switcherSalvarFiltros = !1)
                    }, a.checkDropdown = function (o) {
                        "true" == $("button.configuracao__dropdown_toggle").attr("aria-expanded") ? a.closeDropdown
                        (o) : a.openDropdown()
                    }, a.openDropdown = function (o) {
                        adobeBtnExtrato("Configuracoes", !0), $("button.configuracao__dropdown_toggle").attr("aria-expanded",
                            "true"), a.switcherSaldoDia = !a._checkBotaoInCookies(a.filterCookiesSaldoDia), a.switcherSalvarFiltros = !a._checkBotaoInCookies(a.filterCookiesSalvarFil
                        tros
                    ),
                        a.toggleClass = !0
                    }, a.closeDropdown = function (o) {
                        $("button.configuracao__dropdown_toggle").attr("aria-expanded", "false"), o.preventDefault(), a.tog
                        gleClass = !1
                    }, a._checkBotaoInCookies = function (o) {
                        if (a._getCookies(o.key)) for (var e = a._getCookies(o.key).split(";"), t = 0; t < e.length; t++) {
                            if (e[t] == o.val
                                ue
                        )
                            return !0
                        }
                        return !1
                    }, a._setBotaoInCookies = function (o) {
                        a._setCookies(o.key, a._getCookies(o.key) ? a._getCookies(o.key) + ";" + o.value : ";" + o.value)
                    }, a.tog
                    gleSwitchSaldoDia = function (o) {
                        if (a._checkBotaoInCookies(a.filterCookiesSaldoDia)) {
                            var e = a._getCookies(a.filterCookiesSaldoDia.key);
                            -1 < e.indexOf(a.fi
                            lterCookiesSaldoDia.value
                        )&&
                            a._setCookies(a.filterCookiesSaldoDia.key, e.replace(";" + a.filterCookiesSaldoDia.value, ""))
                        } else a._setBotaoInCookies(a.f
                        ilterCookiesSaldoDia
                    )
                        ;a.switcherSaldoDia = !a.switcherSaldoDia, a.switcherSaldoDia ? adobeBtnExtrato("ExibirSaldoDia", !0) : adobeBtnExtrato("OcultarSaldoDi
                        a
                        ",!0),a.toggle=a.switcherSaldoDia},a.toggleSwitchSalvarFiltros=function(o){if(a._checkBotaoInCookies(a.filterCookiesSalvarFiltros)){var e=a._getCoo
                        kies(a.filterCookiesSalvarFiltros.key);
                        -1 < e.indexOf(a.filterCookiesSalvarFiltros.value) && a._setCookies(a.filterCookiesSalvarFiltros.key, e.replace(";
                        "+a.filterCookiesSalvarFiltros.value,"
                        "))}else a._setBotaoInCookies(a.filterCookiesSalvarFiltros);a.switcherSalvarFiltros=!a.switcherSalvarFiltros,a
                            .switcherSalvarFiltros ? adobeBtnExtrato("SalvarFiltrosSim", !0) : adobeBtnExtrato("SalvarFiltrosNao", !0), a.toggle = a.switcherSalvarFiltros
                    }, a._setCookies
                        = function (o, e) {
                        if ("undefined" != typeof Storage) switch (2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : "local") {
                            case"local":
                                localStorage.setIte
                                m(o, e);
                                break;
                            case"section":
                                sessionStorage.setItem(o, e)
                        }
                        return !1
                    }, a._getCookies = function (o) {
                        if ("undefined" != typeof Storage) switch (1 < arguments.length &
                        & void 0 !== arguments[1] ? arguments[1] : "local") {
                            case"local":
                                return null !== localStorage.getItem(o) && localStorage.getItem(o);
                            case"section":
                                return null !==
                                    sessionStorage.getItem(o) && sessionStorage.getItem(o)
                        }
                        return !1
                    }, a._event = function () {
                        $("body").on("click", function (o) {
                            var e = document.querySelector("#"
                                + a.id + " .configuracao__container");
                            e && !e.contains(event.target) && (a.toggleClass = !1, t.$apply())
                        })
                    }, a.handleFocus = function (o) {
                        $(o.target).closest(".co
                        nfiguracao__dropdown_toggle
                        ").focus()}}],template:n.default}};var a,i=t(4),n=(a=i)&&a.__esModule?a:{default:a}},function(o,e){o.exports='<div class=
                        "configuracao__container" >\r < button

                        class

                        = "button-icon itau-bootstrap configuracao__dropdown_toggle"
                        ng - click = "ctrl.checkDropdown($event)"
                        ari
                        a - expanded = "false" >\r < i
                        aria - hidden = "true"

                        class

                        = "button-icon__symbol icon-itaufonts_configuracoes" > < /i>\r        <span class="sr-only n
                        g - binding
                        ">configura&ccedil;&otilde;es</span>\r        <cpv-balloon ng-hide="
                        ctrl.hasLabel
                        " position="
                        top - center
                        " class="
                        ng - isolate - scope
                        ng - hide
                        "
                        >\r < div

                        class

                        = "iweb-balloon iweb-balloon--top-center"
                        aria - hidden = "true" >\r < div

                        class

                        = "iweb-balloon__content ng-bind
                        ing
                        ">configura&ccedil;&otilde;es</div>\r            </div>\r        </cpv-balloon>\r        <span ng-if="
                        ctrl.hasLabel
                        " class="
                        button - icon__de
                        scription
                        ng - binding
                        ng - scope
                        " aria-hidden="
                        true
                        ">configura&ccedil;&otilde;es</span>\r    </button>\r                \r    <div class="
                        dialog
                        "
                        >\r < div

                        class

                        = "configuracao__body"
                        ng - class = "{\'configuracao__body--active\': ctrl.toggleClass}" >\r < div

                        class

                        = "configuracao_
                        _content
                        ">\r                <div class="
                        configuracao__content - header
                        ">\r                    <h2 role="
                        heading
                        " aria-level="
                        2
                        " style="
                        font - family
                    :
                        itau - display - xbold, arial;
                        font - size
                    :
                        14
                        px;
                        margin: 5
                        px
                        0
                        px
                        10
                        px
                        0
                        px;
                        text - align
                    :
                        left;
                        ">configura&ccedil;&otilde;es</h2>\r                    <
                        a
                        style = "margin-top: -35px; margin-left: 175px;"
                        href = "#"
                        ng - click = "ctrl.closeDropdown($event)"
                        ng - keydown = "$event.keyCode === 32 && ctrl.closeDropd
                        own($event)
                        " class="
                        icon - itaufonts_fechar
                        " role="
                        button
                        " aria-label="
                        Fechar
                        "></a>\r                </div>\r                <div style="
                        margin - to
                        p: 10
                        px
                        " class="
                        configuracao__content - form
                        ">\r                    <label style="
                        font - size
                    :
                        13
                        px
                        " class="
                        check -
                        switch" for="
                            chk_config_
                            {
                                {
                                    $id
                                }
                            }
                                ">\r\
nExibir saldo do dia?\r<input id="
                                chk_config_
                            {
                                {
                                    $id
                                }
                            }
                                " class="
                                chk_saldo_dia
                                " type="
                                checkbox
                                " ng-checked="
                                ctrl.switcherS
                                aldoDia
                                " ng-click="
                                ctrl.toggleSwitchSaldoDia()
                                ">\r<span style="
                                cursor:pointer
                                " aria-hidden="
                                true
                                "></span>\r</label>\r
                                < /div>\r                <div style="border-bottom: 0; margin-top: 10px" class="configuracao__content-form">                    \r
                                <label style="font-size: 13px" class="check-switch" for="chk_config_filtros_{{$id}}">\r
                                    Salvar filtro d
                                    e sele&ccedil;&atilde;o?\r<input id="chk_config_filtros_{{$id}}"
                                                                     class="chk_salvar_filtros" type="checkbox"
                                                                     ng-checked="ctrl.switcherS
alvarFiltros" ng-click="ctrl.toggleSwitchSalvarFiltros()">\r<span style="cursor:pointer"
                                                                  aria-hidden="true"></span>\r</label>
                            \r</div>\r < /div>\r        </div >\r < /div>\r</div > '}]);
</script>
<script type="text/javascript">
    var lancamentosCompleta;
    var lancamentosSliced;
    var quantidadeLancamentosExibidos;
    var tamanhoPadraoPaginaGridLancamentos = 17000;
    var todosAbaLancamentos;
    var filtroLancamentos = null;
    var existeRegistrosGridLancamentos;
    var valorSaldoDisponivel;
    var botaoDropdownLancamentos = null;
    var botaoDropdownLancamentosRodape = null;
    var primeiroAcesso = true;
    var numeroCheque = null;
    var dataLancamentoCheque = null;
    var lancamentosLimite = null;
    var comprovanteLancamentos;
    var caminhoFontesCss;
    var novoTemplatePDF = 'true';
    var iDPF = '::customer_id::';
    var exportarPDFAbas = 'true';

    var elementoTokenExibido = null;
    var linhaTokenExibido = null;
    var tokenExibido = false;

    var accordionFuturo = '<div id="accordion-lancamentos-futuros"><button aria-expanded="true" aria-controls="lancamentosFuturosContent" id="lancamen
    tosFuturosButton
    " type="
    button
    " onclick="
    expandirOcultarLancamentosFuturos()
    "><span class="
    accordion - title
    ">lan&ccedil;amentos futuros</span><i clas
    s = "icon-itaufonts_seta_down"
    aria - hidden = "true" > < /i><span id="lancamentosFuturosTexto" aria-hidden="true"></s
    pan > < /button><div class="accordion__con
    tent
    " id="
    lancamentosFuturosContent
    " aria-labelledby="
    lancamentosFuturosButton
    "><div id="
    extrato - grid - lancamentos - futuros - entrada
    " class="
    grid - col12
    margem - cima24
    no - padding
    "></div><div id="
    extrato - grid - lancamentos - futuros - saida
    " class="
    grid - col12
    margem - cima24
    no - padding
    "></div></div></div>';

    var adobeDTM = {
        "iDPF": "::customer_id::",
        "tipoCliente": "Cliente PF|Correntista",
        "segmento": "Uniclass"
    };

    var exibeWhatsnew = false;
    ativaBotaoConfiguracao();

    // registra callbacks no formulario de PDF / exportacao
    $("#formImpressaoPDF, #formExportarExtrato, #formLancamentosImpressao, #formLancamentosImpressao").data('preload-function', 'exibirLoadingExportacao');
    $("#formImpressaoPDF, #formExportarExtrato, #formImpressaoPDFGuiche, #formLancamentosImpressao").data('callback-function', 'fecharLoadingExportacao');

    var onClickCancelarAgendamento = function (descricao, data, valor) {
        var parametros = $('#parametrosConvivenciaLixeira').html();
        var frm = $('#frmExtratoConvivencia');
        frm.html(parametros);

        $.Ajax({
            method: "POST",
            dataType: "json",
            contentType: "application/json;charset=UTF-8",
            headers: {
                "op": "zl8vg18Vml4mR//jJoIziV3/da40i+xpTd9sMse7bLg=;",
                ajaxRequest: true,
                scrollToTop: false
            },
            data: JSON.stringify({
                "descricaoLancamento": descricao.replace(/\s/g, '').substr(9),
                "dataLancamento": data.replace(/^(0+)(\d)/g, "$2").replace(/\//g, ''),
                "valorLancamento": valor.replace(/[^\w]/g, '').replace(/^(0+)(\d)/g, "$2")
            }),
            success: function (retorno) {
                executaConvivenciaOp('::convivencia_op::', 'frmExtratoConvivencia');
                frm.empty();
            },
            error: function (erro) {
                frm.empty();
            }
        });
    };

    var inicializaAbaLancamentos = function (todosLancamentos) {
        $("#btn-aba-lancamentos").on("click", function () {
            carregaDataLayer("Lancamentos", true);
        });

        var contingenciaX0 = todosLancamentos.contingencia;
        setTimeout(() => {
            console.log(contingenciaX0)
            if (contingenciaX0 === true) {
                document.getElementById("contingenciaX0").style.display = "block";
                if ($('#aviso-saldo-resumido-vazio').is(':visible')) {
                    document.getElementById("componente-abas-extrato").style.marginTop = "32%";
                } else if ($('#limite-ultrapassado').is(':visible')) {
                    document.getElementById("componente-abas-extrato").style.marginTop = "36%";
                } else if ($('#lis-utilizado-template').is(':visible')) {
                    document.getElementById("componente-abas-extrato").style.marginTop = "36%";
                } else {

                    document.getElementById("componente-abas-extrato").style.marginTop = "32%";
                }
            } else {
                document.getElementById("contingenciaX0").style.display = "none";
            }
        }, "1000");


        var periodoConsulta = todosLancamentos.periodoConsulta;
        var todosRegistrosAbaLancamentos = atualizaLancamentos(todosLancamentos);
        var dataHoraConsulta = todosLancamentos.dataHoraConsulta != null ? todosLancamentos.dataHoraConsulta : new Date().toLocaleString("pt-BR");
        var dataAberturaConta = '22/09/2022';
        comprovanteLancamentos = todosLancamentos.conteudoImpressao;
        caminhoFontesCss = todosLancamentos.caminhoFontesCss;

        if (todosLancamentos && todosLancamentos.conteudoImpressao) {
            comprovanteLancamentos = todosLancamentos.conteudoImpressao.replace("</head>", "<link rel='stylesheet' type='text/css' href='" + caminhoFontesCss + "' /></head>");
        }

        carregarFiltroAbaLancamentos(periodoConsulta, dataHoraConsulta, dataAberturaConta);
        filtroLancamentos.filtroSelecionado().dataHoraConsulta = dataHoraConsulta;

        if (checkCookieSaldoDia()) {
            carregarAbaLancamentos(todosRegistrosAbaLancamentos.filter(function (l) {
                return l.descricaoLancamento !== "SALDO DO DIA";
            }));
            armazenaValoresFiltro("filtroExibeSaldoDia", "false");
        } else {
            carregarAbaLancamentos(todosRegistrosAbaLancamentos);
            armazenaValoresFiltro("filtroExibeSaldoDia", "true");
        }

        if (checkCookieSalvarFiltros()) {
            var filtroAccordion = (getCookies("filtro_accordion_" + iDPF) !== "" && getCookies("filtro_accordion_" + iDPF) !== false) ? getCookies("filtro_accordion_" + iDPF) : "aberto"
            var filtroVisualizar = (getCookies("filtro_visualizar_" + iDPF) !== "" && getCookies("filtro_visualizar_" + iDPF) !== false) ? getCookies("filtro_visualizar_" + iDPF) : "todas";
            var filtroPeriodo = (getCookies("filtro_periodo_" + iDPF) !== "" && getCookies("filtro_periodo_" + iDPF) !== false) ? getCookies("filtro_periodo_" + iDPF) : "7";
            var filtroOrdenacao = (getCookies("filtro_ordenacao_" + iDPF) !== "" && getCookies("filtro_ordenacao_" + iDPF) !== false) ? getCookies("filtro_ordenacao_" + iDPF) : "mais antigo";

            filtro.tipoOperacao = filtroVisualizar;

            if (filtroPeriodo.includes(";")) {
                let filtroPeriodoSplit = filtroPeriodo.split(";");

                $("input.date-from").val(filtroPeriodoSplit[0]);
                $("input.date-to").val(filtroPeriodoSplit[1]);
            } else if (filtroPeriodo.includes("/")) {
                $("#select-filtrarPeriodo select [value='mesCompleto']").prop('selected', true);
                $("#month-range-picker").attr('style', 'display: block !important');
                $("#month-range-picker span span").text(filtroPeriodo);
            } else {
                $("#select-filtrarPeriodo select [value='" + filtroPeriodo + "']").prop('selected', true);
            }

            $(".campos-radio-filtro-extrato button").removeClass("checked").attr("aria-checked", "false");
            $(".campos-radio-filtro-extrato button[value='" + filtroVisualizar + "']").addClass("checked").attr("aria-checked", "true");
            $("#comboOrdenacaoLancamentos select option").removeAttr('selected');

            if (filtroOrdenacao == "mais recente") {
                $("#comboOrdenacaoLancamentos select option[value='maisRecente']").prop('selected', true);
                ordenacaoDecrescenteLancamentos = true;
                checkCookieSaldoDia() && lancamentosCompleta.filter(function (l) {
                    return l.descricaoLancamento !== "SALDO DO DIA";
                });
                ordenaTabela("", "lancamentos", "maisAntiga");
            } else {
                $("#comboOrdenacaoLancamentos select option[value='maisAntigo']").prop('selected', true);
                ordenacaoDecrescenteLancamentos = false;
                checkCookieSaldoDia() && lancamentosCompleta.filter(function (l) {
                    return l.descricaoLancamento !== "SALDO DO DIA";
                });
            }

            if (filtroAccordion == "fechado") {
                expandirOcultarLancamentosFuturos();
            }

            if (filtroVisualizar != "debito" && filtroVisualizar != "credito") {
                armazenaValoresFiltro("filtroVisualizar", filtroVisualizar);
            } else {
                filtroVisualizar == "credito" && armazenaValoresFiltro("filtroVisualizar", "entradas");
                filtroVisualizar == "debito" && armazenaValoresFiltro("filtroVisualizar", "saidas");
            }
            armazenaValoresFiltro("filtroOrdenacao", filtroOrdenacao);
            armazenaValoresFiltro("periodoVisualizacao", filtroPeriodo);
            armazenaValoresFiltro("periodoVisualizacao", periodoConsulta);
        } else {
            armazenaValoresFiltro("filtroVisualizar", "todas");
            armazenaValoresFiltro("periodoVisualizacao", periodoConsulta);
            if ($("#comboOrdenacaoLancamentos select").val() == 'maisAntigo') {
                ordenacaoDecrescenteLancamentos = false;
                armazenaValoresFiltro("filtroOrdenacao", "mais antigo");
            } else {
                ordenacaoDecrescenteLancamentos = true;
                armazenaValoresFiltro("filtroOrdenacao", "mais recente");
            }
        }

        angular.element($("#configuracao_saldo_header")).scope().conf.atualizarListaLancamentos(todosRegistrosAbaLancamentos);
        angular.element($("#configuracao_saldo_footer")).scope().cc.atualizarListaLancamentos(todosRegistrosAbaLancamentos);

//essa funcionalidade &eacute; ligada pela chave extrato.exibir.whatsnew
        if (exibeWhatsnew) {
            initTourNovoExtrato();
        }
    }

    var limitFunctionAbaLancamentos = function () {

        if ($("#gridLancamentos-pessoa-fisica")) {
            var gridLancamentos = "";
            if ($("#gridLancamentos-pessoa-fisica tr").length > 0) {
                gridLancamentos = $("#gridLancamentos-pessoa-fisica tr").last().offset().top
                    + ($("#gridLancamentos-pessoa-fisica tr").last().outerHeight() / 2);
            }
            return gridLancamentos;
        }

    }

    //CEMPMTIME-1588
    function ativaBotaoConfiguracao() {
        var app = angular.module('configuracaoSaldo', ['configuracaoSaldoModule', 'ngSanitize']);

        app.controller('ConfiguracaoController', ['$scope', function ($scope) {
            var self = this;
            this.estado = undefined;
            self.todosLancamentos = [];

            $(".chk_saldo_dia").click(function () {
                if (!checkCookieSaldoDia()) {
                    var todosRegistrosAbaLancamentos = atualizaLancamentos(lancamentosCompleta);
                    atualizaGridLancamentos(todosRegistrosAbaLancamentos.filter(function (l) {
                        return l.descricaoLancamento !== "SALDO DO DIA";
                    }));
                } else {
                    atualizaGridLancamentos(self.todosLancamentos);
                }
            });

            $(".chk_salvar_filtros").click(function () {
                if (!checkCookieSalvarFiltros()) {
                    salvarFiltrosNosCookies();
                }
            });

            self.atualizarListaLancamentos = function (lancamentos) {
                self.todosLancamentos = lancamentos;
            }

            return self;
        }]);
        angular.bootstrap(document.getElementById('configuracao_saldo_header'), ['configuracaoSaldo']);
        angular.bootstrap(document.getElementById('configuracao_saldo_footer'), ['configuracaoSaldo']);
    }

    function checkCookieSaldoDia() {
        if (getCookies("saldo_dia_off")) {
            var arrayLikert = getCookies("saldo_dia_off").split(';');

            for (var index = 0; index < arrayLikert.length; index++) {
                const element = arrayLikert[index];

                if (element == "::customer_id::") return true;
            }
        }

        return false;
    }

    function checkCookieSalvarFiltros() {
        if (getCookies("salvar_filtros_off")) {
            var arrayLikert = getCookies("salvar_filtros_off").split(';');

            for (var index = 0; index < arrayLikert.length; index++) {
                const element = arrayLikert[index];

                if (element == "::customer_id::") return false;
            }
        }

        return true;
    }

    function salvarFiltrosNosCookies() {
        var accordionAberto = $("#lancamentosFuturosButton").attr('aria-expanded') == 'true';
        let ordenacao = angular.element(document.getElementById('comboOrdenacaoLancamentos')).scope().app.ordenacao;
        if (accordionAberto) {
            setCookies("filtro_accordion_" + iDPF, "aberto");
        } else {
            setCookies("filtro_accordion_" + iDPF, "fechado");
        }
        setCookies("filtro_visualizar_" + iDPF, $("button.box-filtro-extrato[aria-checked=true] span").text());
        setCookies("filtro_periodo_" + iDPF, filtroLancamentos.filtroSelecionado().periodoConsulta);
        ordenacao = ordenacao == 'maisAntigo' ? 'mais antigo' : 'mais recente';
        setCookies("filtro_ordenacao_" + iDPF, ordenacao);
    }

    function limparFiltrosDosCookies() {
        setCookies("filtro_visualizar_" + iDPF, "");
        setCookies("filtro_periodo_" + iDPF, "");
        setCookies("filtro_ordenacao_" + iDPF, "");
    }

    function getCookies(key) {
        return localStorage.getItem(key) === null ? false : localStorage.getItem(key);
    }

    function setCookies(key, value) {
        localStorage.setItem(key, value);
    }


    function onClickVerLancamentos() {

        if (lancamentosCompleta) {
            var fimSlice = quantidadeLancamentosExibidos
                + tamanhoPadraoPaginaGridLancamentos;
            var inicioSlice = quantidadeLancamentosExibidos;
            var template = $('#linhaTabelaLancamentos').html();
            var quantidadeDescricaoMesAno = lancamentosCompleta.slice(
                inicioSlice, fimSlice).filter(existeDescricaoMesAno);

            if (quantidadeDescricaoMesAno.length > 0) {
                var contador = quantidadeDescricaoMesAno.length;
                var retornoFilter = 0;

                while (quantidadeDescricaoMesAno.length > 0) {
                    retornoFilter = lancamentosCompleta.slice(fimSlice,
                        fimSlice + contador).filter(existeDescricaoMesAno).length;

                    fimSlice += contador;
                    if (retornoFilter > 0) {
                        contador = retornoFilter;
                    } else {
                        break;
                    }
                }
            }

            if (fimSlice >= lancamentosCompleta.length) {
                lancamentosSliced = lancamentosCompleta.slice(inicioSlice,
                    lancamentosCompleta.length);
                document.getElementById('btnVerMaisLancamentosAbaLancamentos').style.display = "none";
            } else {
                lancamentosSliced = lancamentosCompleta.slice(inicioSlice,
                    fimSlice);
            }
            quantidadeLancamentosExibidos += lancamentosSliced.length;

            data = {
                dadosCorpo: lancamentosSliced
            }

            var gridLancamentos = $("#gridLancamentos-pessoa-fisica");
            var qtdLinhas = gridLancamentos.find('tr').length;
            var html = Mustache.to_html(template, data);
            $('tbody', gridLancamentos).append(html);
            $(gridLancamentos.find('tr')[qtdLinhas]).find('td').first().append(
                '<span tabindex="-1"></span>').find('span').last().focus();
            $("#corpoTabela-gridLancamentos-pessoa-fisica tr:not(.linha-descricao-mes-ano):nth-child(odd)").attr("style", "background-color:#F1F2F4");

        }
    }

    function existeDescricaoMesAno(item) {
        return item.descricaoMesAno === true;
    }

    var listaCrescenteBusca = function (listaLancamentos) {
        var novaListaLancamento = new Array();
        var listaSemDescricaoMesAno = new Array();
        var dataAnterior;

        listaSemDescricaoMesAno = listaLancamentos.filter(function (item) {
            return !item.descricaoMesAno;
        });


        var lancamentoAnterior;
        var meses = ['janeiro', 'fevereiro', 'mar\u00e7o', 'abril', 'maio', 'junho',
            'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'];

        for (var i = 0; i < listaSemDescricaoMesAno.length; i++) {
            var lancamentoAtual = listaSemDescricaoMesAno[i];

            if (lancamentoAtual.dataLancamento == null) {
                var lancamentoPosterior = null;
                lancamentoPosterior = procurarDataLancamentoAnterior(i, listaSemDescricaoMesAno);

                if (!lancamentoPosterior) {
                    lancamentoPosterior = procurarDataLancamentoPosterior(i, listaSemDescricaoMesAno);
                }


                lancamentoAtual.dataLancamento = lancamentoPosterior.dataLancamento;
                lancamentoAtual.diaLancamento = lancamentoPosterior.diaLancamento;
                lancamentoAtual.mesLancamento = lancamentoPosterior.mesLancamento;
                lancamentoAtual.isDataNula = true;
            }

            var dataAtual = moment(lancamentoAtual.dataLancamento, 'DD/MM/YYYY').format('MMYYYY');

            if (lancamentoAnterior && lancamentoAnterior.dataLancamento != null &&
                verificaExibicaoLabelMesAnoLancamento(moment(lancamentoAnterior.dataLancamento, 'DD/MM/YYYY').format('MMYYYY'), dataAtual)) {
                var lancamentoMesAno = {dataLancamento: null, descricaoLancamento: '', descricaoMesAno: true};
                var mes = (parseInt(dataAtual.slice(0, 2)) - 1);
                var ano = dataAtual.slice(2, 6);
                lancamentoMesAno.descricaoLancamento = meses[mes] + ' ' + ano;
                novaListaLancamento.push(lancamentoMesAno);
            }

            lancamentoAtual.exibeDiaMesLancamento = true;

            if (lancamentoAtual.isDataNula) {
                lancamentoAtual.dataLancamento = null;
                lancamentoAtual.diaLancamento = null;
                lancamentoAtual.mesLancamento = null;
            }

            novaListaLancamento.push(lancamentoAtual);

            lancamentoAnterior = lancamentoAtual;

            if (lancamentoAnterior.dataLancamento == null) {
                lancamentoAnterior.dataLancamento = dataAnterior;
            }
        }
        var tituloLancamentoFuturo = {
            dataLancamento: null,
            descricaoLancamento: "lan\u00e7amentos futuros",
            descricaoMesAno: true
        };
        var indexPrimeiroLancamentoFuturo;

        $(novaListaLancamento).each(function (index, item) {
            if (item.lancamentoFuturo) {
                possuiLancamentoFuturo = true
            }
            if (item.lancamentoFuturo && item.descricaoMesAno != true) {
                indexPrimeiroLancamentoFuturo = index;
                return false;
            }
        });
        if (typeof indexPrimeiroLancamentoFuturo !== 'undefined') {
            if (indexPrimeiroLancamentoFuturo === 0) {
                novaListaLancamento.splice(indexPrimeiroLancamentoFuturo, 0, tituloLancamentoFuturo);
            } else if (novaListaLancamento[indexPrimeiroLancamentoFuturo - 1].descricaoMesAno) {
                novaListaLancamento.splice(indexPrimeiroLancamentoFuturo - 1, 1);
                novaListaLancamento.splice(indexPrimeiroLancamentoFuturo - 1, 0, tituloLancamentoFuturo);
            } else {
                novaListaLancamento.splice(indexPrimeiroLancamentoFuturo, 0, tituloLancamentoFuturo);
            }
        }

        return novaListaLancamento;
    }

    var removeDescricaoMesAnoLancamentoFuturo = function (lista) {
        var listaCompleta = lista;
        var indexFlagLancamento = 0;
        listaCompleta.map(function (lancamento, index) {
            if (lancamento.descricaoLancamento == "lan\u00e7amentos") {
                indexFlagLancamento = index + 1;
            }
        });
        listaCompleta = listaCompleta.slice(indexFlagLancamento)
        return listaCompleta;

    }

    $('#comboOrdenacaoLancamentos select').change(function () {
        var valorOrdenacao = $(this).val();
        if (valorOrdenacao === 'maisRecente') {
            document.getElementById('div2FuturoBottom').innerHTML = "";
            document.getElementById('div1FuturoTop').innerHTML = accordionFuturo;
            document.getElementById('extrato-grid-lancamentos').style.marginBottom = "0rem";
            expandirOcultarTexto();
        } else {
            document.getElementById('div1FuturoTop').innerHTML = "";
            document.getElementById('div2FuturoBottom').innerHTML = accordionFuturo;
            document.getElementById('extrato-grid-lancamentos').style.marginBottom = "1.5rem";
            expandirOcultarTexto();
        }
        renderLancamentosFuturos();
    });


    var posicionaAccordionFuturos = (getCookies("filtro_ordenacao_" + iDPF) !== "" && getCookies("filtro_ordenacao_" + iDPF) !== false) ? getCookies("filtro_ordenacao_" + iDPF) : "mais antigo";

    if (posicionaAccordionFuturos == "mais recente") {
        document.getElementById('div1FuturoTop').innerHTML = accordionFuturo;
    } else {
        document.getElementById('div2FuturoBottom').innerHTML = accordionFuturo;
        document.getElementById('extrato-grid-lancamentos').style.marginBottom = "1.5rem";
    }

    function expandirOcultarLancamentosFuturos() {
        var isOpen = $("#lancamentosFuturosButton").attr('aria-expanded') == 'true';
        if (checkCookieSalvarFiltros()) {
            if (isOpen) {
                setCookies("filtro_accordion_" + iDPF, "fechado");
            } else {
                setCookies("filtro_accordion_" + iDPF, "aberto");
            }
        }
        tageamentoAccordion(isOpen ? "Ocultar" : "Exibir");
        $("#lancamentosFuturosContent").attr('hidden', isOpen);
        $("#lancamentosFuturosButton").attr('aria-expanded', !isOpen);
        expandirOcultarTexto()
    }


    function expandirOcultarTexto() {
        if ($('#lancamentosFuturosButton').attr('aria-expanded') === "true") {
            document.getElementById('lancamentosFuturosTexto').innerHTML = 'ocultar';
        } else {
            document.getElementById('lancamentosFuturosTexto').innerHTML = 'exibir';
        }
    }

    var carregarAbaLancamentos = function (todosLancamentos, ordenacao) {

        var escondeBotao = false;
        var tituloTabelaLancamentos = '';

        if (!ordenacaoDecrescenteLancamentos && !ordenacao) {
            todosLancamentos = montarListaGrid(todosLancamentos,
                ordenacaoDecrescenteLancamentos);
        }


        lancamentosCompleta = montarListaGrid(todosLancamentos.filter(filtroLancamentos.verificaFiltro), ordenacaoDecrescenteLancamentos);

        var termoDigitadoBusca = $("#extrato-buscar").val();

        if (termoDigitadoBusca.length && !ordenacaoDecrescenteLancamentos) {
            lancamentosCompleta = listaCrescenteBusca(lancamentosCompleta);
        }

        var quantidade = lancamentosCompleta.slice(0, tamanhoPadraoPaginaGridLancamentos).filter(existeDescricaoMesAno);

        lancamentosSliced = lancamentosCompleta;
        escondeBotao = true;


        var mensagemSemResultado = Mustache.to_html($(
            "#template-extrato-mensagem-tabela-sem-resultado").html(), {
            iconeEmoticon: true,
            mensagem: "N&atilde;o h&aacute; movimenta&ccedil;&otilde;es no per&iacute;odo"
        });

        if (escondeBotao) {
            tituloTabelaLancamentos = "Tabela contendo os lan&ccedil;amentos da conta.";
        } else {
            tituloTabelaLancamentos = 'Tabela contendo os lan&ccedil;amentos da conta. H&aacute; mais lan&ccedil;amentos para serem exibidos; Utilize o bot&atilde;o "ver mais lan&ccedil;amentos" ap&oacute;s a tabela.';
        }

        removerWarnings(lancamentosCompleta);

        var objeto = {
            "registros": false,
            "idGridComponente": "gridLancamentos-pessoa-fisica",
            "templateLinha": "#linhaTabelaLancamentos",
            "tituloTabelaLancamento": "entradas/sa&iacute;das",
            "headers": [
                {
                    "estiloColuna": 'header-tabela header-lancamentos-pf header-lancamentos-impressao-pf no-border no-padding-esquerda no-padding-direita padding-baixo9 no-padding-cima grid-col-minimo75',
                    "estiloSpan": 'itau-display-regular',
                    "tamanho": "9%",
                    "nome": "data",
                    "label": "Data",
                    "ordenacao": "lancamentos",
                    "descendente": ordenacaoDecrescenteLancamentos
                },
                {
                    "estiloColuna": 'header-tabela header-lancamentos-pf header-lancamentos-impressao-pf no-border no-padding no-padding-cima',
                    "estiloSpan": 'no-padding-impressao titulo-cabecalho-tabela-lancamentos-pf itau-display-regular',
                    "tamanho": "40.8%",
                    "nome": "lan&ccedil;amentos"
                },
                {
                    "estiloColuna": "header-tabela header-lancamentos-pf header-lancamentos-impressao-pf txt-right no-border no-padding no-padding-cima",
                    "estiloSpan": 'itau-display-regular',
                    "tamanho": "10.4%",
                    "nome": "valor (R$)"
                },
                {
                    "estiloColuna": "header-tabela header-lancamentos-pf header-lancamentos-impressao-pf txt-right no-border no-padding no-padding-cima",
                    "estiloSpan": 'itau-display-regular',
                    "tamanho": "13.4%",
                    "nome": "saldo (R$)"
                },
                {
                    "estiloColuna": 'header-tabela txt-right header-lancamentos-pf header-lancamentos-impressao-pf no-border no-padding no-padding-cima sem-impressao',
                    "estiloSpan": 'itau-display-regular',
                    "tamanho": "27.6%",
                    "nome": "detalhes"
                }],
            dadosCorpo: lancamentosSliced.filter(function (lancamento) {
                return !lancamento.lancamentoFuturo
            }),
            emptyMessage: mensagemSemResultado,
            tituloTabela: tituloTabelaLancamentos
        }

        objeto.dadosCorpo = removeDescricaoMesAnoLancamentoFuturo(objeto.dadosCorpo);

        quantidadeLancamentosExibidos = objeto.dadosCorpo.length;
        existeRegistrosGridLancamentos = (quantidadeLancamentosExibidos > 0);
        objeto.registros = existeRegistrosGridLancamentos;

        var grid = new novaInternet.Grid($('#extrato-grid-lancamentos'), objeto);
        grid.render();

//render lacametos futuros
        renderLancamentosFuturos();

        if (lancamentosCompleta.length == 0) {
            tagueamentoAbaLancamentosVazios(false);
            $("#accordion-lancamentos-futuros").hide();
        } else {
            $("#extrato-alerta-container").remove();
        }

        if (!botaoDropdownLancamentos) {
            botaoDropdownLancamentos = new novaInternet.BotaoDropdown(
                $('#botao-opcoes-lancamentos'));
            botaoDropdownLancamentos.carregar();
        }

        if (!botaoDropdownLancamentosRodape) {
            botaoDropdownLancamentosRodape = new novaInternet.BotaoDropdown(
                $('#botao-opcoes-lancamentos-rodape'));
            botaoDropdownLancamentosRodape.carregar();
        }


        inserirDataHoraRodape('data-hora-atualizado-em-lancamentos')

        if (primeiroAcesso && !getCookies("onboardingFiltro") && "false" === "true") {
            var lightBoxOnboardingFiltro = new novaInternet.OnboardingFiltro();
            lightBoxOnboardingFiltro.carregar();
        }

        if (!primeiroAcesso) {
            if (ordenacao) {
                carregarResultadoFiltroAbaLancamentos(
                    existeRegistrosGridLancamentos, ordenacao);
            } else {
                carregarResultadoFiltroAbaLancamentos(existeRegistrosGridLancamentos);
            }

        }

        primeiroAcesso = false;

        expandirOcultarTexto();

    };

    var renderLancamentosFuturos = function () {

        var objetoTemplateLancamentosFuturosGenerico = {
            "registros": false,
            "idGridComponente": "gridLancamentos-pessoa-fisica",
            "templateLinha": "#linhaTabelaLancamentosFuturos",
            "headers": [
                {
                    "estiloColuna": 'header-tabela header-lancamentos-pf header-lancamentos-impressao-pf no-border no-padding-esquerda no-padding-direita padding-baixo9 no-padding-cima grid-col-minimo75',
                    "estiloSpan": 'itau-display-regular',
                    "nome": "data",
                    "label": "Data",
                    "ordenacao": "lancamentos",
                    "descendente": ordenacaoDecrescenteLancamentos
                },
                {
                    "estiloColuna": 'header-tabela header-lancamentos-pf header-lancamentos-impressao-pf no-border no-padding no-padding-cima',
                    "estiloSpan": 'no-padding-impressao titulo-cabecalho-tabela-lancamentos-pf itau-display-regular',
                    "nome": "lan&ccedil;amentos"
                },
                {
                    "estiloColuna": "header-tabela header-lancamentos-pf header-lancamentos-impressao-pf txt-right no-border no-padding no-padding-cima",
                    "estiloSpan": 'itau-display-regular',
                    "nome": "valor (R$)"
                },
                {
                    "estiloColuna": 'header-tabela txt-right header-lancamentos-pf header-lancamentos-impressao-pf no-border no-padding no-padding-cima sem-impressao',
                    "estiloSpan": 'itau-display-regular',
                    "nome": "detalhes"
                }],
            dadosCorpo: [],
            tituloTabela: "",
        };

        $("#accordion-lancamentos-futuros, #extrato-grid-lancamentos-futuros-entrada, #extrato-grid-lancamentos-futuros-saida").show();
        var objetoTemplateLancamentosFuturosSaida = $.extend(true, {}, objetoTemplateLancamentosFuturosGenerico);
        var objetoTemplateLancamentosFuturosEntrada = $.extend(true, {}, objetoTemplateLancamentosFuturosGenerico);


        lancamentosSliced.map(function (lancamento) {
            if (lancamento.lancamentoFuturo && lancamento.indicadorOperacao == 'debito') {
                objetoTemplateLancamentosFuturosSaida.dadosCorpo.push(lancamento)
            }
            if (lancamento.lancamentoFuturo && lancamento.indicadorOperacao == 'credito') {
                objetoTemplateLancamentosFuturosEntrada.dadosCorpo.push(lancamento)
            }
        });

        if (!objetoTemplateLancamentosFuturosSaida.dadosCorpo.length && !objetoTemplateLancamentosFuturosEntrada.dadosCorpo.length) {
            $("#accordion-lancamentos-futuros").hide();
        }

        if (!objetoTemplateLancamentosFuturosSaida.dadosCorpo.length) {
            $("#extrato-grid-lancamentos-futuros-saida").hide();
        }

        if (!objetoTemplateLancamentosFuturosEntrada.dadosCorpo.length) {
            $("#extrato-grid-lancamentos-futuros-entrada").hide();
        }

        objetoTemplateLancamentosFuturosSaida.registros = objetoTemplateLancamentosFuturosSaida.dadosCorpo.length ? true : false;
        objetoTemplateLancamentosFuturosSaida.tituloTabela = "Tabela contendo as sa&iacute;das de lan&ccedil;amentos futuros";
        objetoTemplateLancamentosFuturosSaida.tituloTabelaLancamento = "sa&iacute;das futuras";

        objetoTemplateLancamentosFuturosEntrada.registros = objetoTemplateLancamentosFuturosEntrada.dadosCorpo.length ? true : false;
        objetoTemplateLancamentosFuturosEntrada.tituloTabela = "Tabela contendo as entradas de lan&ccedil;amentos futuros";
        objetoTemplateLancamentosFuturosEntrada.tituloTabelaLancamento = "entradas futuras";

        var gridLancamentosFuturosSaida = new novaInternet.Grid($('#extrato-grid-lancamentos-futuros-saida'), objetoTemplateLancamentosFuturosSaida);
        var gridLancamentosFuturosEntradas = new novaInternet.Grid($('#extrato-grid-lancamentos-futuros-entrada'), objetoTemplateLancamentosFuturosEntrada);

        gridLancamentosFuturosSaida.render();
        gridLancamentosFuturosEntradas.render();

        if ($("body").attr("id") != "person") {
            $("#corpoTabela-gridLancamentos-pessoa-fisica tr:not(.linha-descricao-mes-ano):nth-child(odd)").attr("style", "background-color:#F1F2F4");
        } else {
            verificarOrigemZebramentoExtratoPerson();
        }
    };

    function verificarOrigemZebramentoExtratoPerson() {
        if ("true" == "true") {
            $("#corpoTabela-gridLancamentos-pessoa-fisica tr:not(.linha-descricao-mes-ano):nth-child(odd)").attr("style", "background-color:#F2F4F7");
            $("#extrato-main #accordion-lancamentos-futuros #lancamentosFuturosButton").attr("style", "background-color:#F2F4F7; border: 1px solid #E3E5E9 !important;");
            $("#lancamentosFuturosTexto").attr("style", "color:#D6730D;");
            $("#extrato-main #accordion-lancamentos-futuros #lancamentosFuturosButton i").attr("style", "color:#D6730D;");
            $("cpv-card-button-group .card-group").attr("style", "background-color:#FFF;");

        } else {
            $("#corpoTabela-gridLancamentos-pessoa-fisica tr:not(.linha-descricao-mes-ano):nth-child(odd)").attr("style", "background-color:#F1F2F4");
            $("#extrato-main #accordion-lancamentos-futuros #lancamentosFuturosButton").attr("style", "background-color:#FAF8F7; border: 1px solid #89837F !important;");
        }
    }

    var carregarResultadoFiltroAbaLancamentos = function (existeRegistros,
                                                          ordenacao) {

        checkCookieSalvarFiltros() && setCookies("filtro_visualizar_" + iDPF, $("button.box-filtro-extrato[aria-checked=true]").attr("value"));
        var $container = $("#extrato-resultado-filtro-lancamentos");
        var filtro = filtroLancamentos.filtroSelecionado();
        if (filtro.tipoOperacaoAplicado == false
            && filtro.periodoAplicado == false
            && filtro.pesquisaBuscaAplicado == false) {
            return;
        }

        var feedbackTipoMovimentacao = '';

        if (!existeRegistros) {
            feedbackTipoMovimentacao = 'nenhum ';
        }

        if (filtro.tipoOperacao === 'todas') {
            feedbackTipoMovimentacao += 'resultado de<span class="itau-display-bold extrato-filtros">&nbsp;todas&nbsp;</span>as transa&ccedil;&otilde;es';
            armazenaValoresFiltro("filtroVisualizar", "todas");
        } else if (filtro.tipoOperacao === 'futuros') {
            feedbackTipoMovimentacao += 'resultado de<span class="itau-display-bold extrato-filtros">&nbsp;lan&ccedil;amentos futuros&nbsp;</span>';
            armazenaValoresFiltro("filtroVisualizar", "futuros");
        } else {
            var tipoMovimentacao = filtro.tipoOperacao === 'credito' ? 'entradas' : 'sa&iacute;das';
            armazenaValoresFiltro("filtroVisualizar", tipoMovimentacao.replace("&iacute;", "i"));
            feedbackTipoMovimentacao += 'resultado de transa&ccedil;&otilde;es de<span class="itau-display-bold extrato-filtros">&nbsp;'
                + tipoMovimentacao + '</span>';
        }

        var feedbackFiltroComBusca = filtro.termoBuscado ? 'para o termo<span class="itau-display-bold extrato-filtros">&nbsp;'
            + filtro.termoBuscado + '</span> '
            : '';

        var feedbackFiltro = '';
        var feedbackFiltroAux = '';
        if (filtro.periodoConsulta && !filtro.mesCompleto) {
            if (filtro.periodoConsulta.includes(';')) {
                feedbackFiltroAux = filtro.periodoConsulta.replaceAll('-', '/')
                feedbackFiltroAux = feedbackFiltroAux.replaceAll(';', ' </span>at&eacute; <span class="itau-display-bold extrato-filtros">')
                feedbackFiltro = '%mensagem_movimentacao%&nbsp;do per&iacute;odo <span class="itau-display-bold extrato-filtros">&nbsp;'
                    + feedbackFiltroAux
                    + '</span>. %mensagem_busca_termo%';
            } else {
                feedbackFiltro = '%mensagem_movimentacao%&nbsp;do per&iacute;odo dos &uacute;ltimos<span class="itau-display-bold extrato-filtros">&nbsp;'
                    + filtro.periodoConsulta
                    + ' dias</span> %mensagem_busca_termo%';
            }

        } else if (filtro.mesCompleto) {
            feedbackFiltro = '%mensagem_movimentacao%<span class="itau-display-bold extrato-filtros">&nbsp;de '
                + filtro.mesCompleto + '</span> %mensagem_busca_termo%';

        }

        limparAlerta('extrato-alerta-texto', 'alerta-filtro');

        var feedback = feedbackFiltro.replace('%mensagem_movimentacao%',
            feedbackTipoMovimentacao).replace('%mensagem_busca_termo%',
            feedbackFiltroComBusca);
        $container.html(feedback);

        if (!ordenacao) {
            setTimeout(function () {
                feedbackAcessibilidade(feedback)
            }, 1500);
        } else {
            var feedbackOrdenacao = '';
            if (ordenacaoDecrescenteLancamentos) {
                feedbackOrdenacao = 'Ordenado descendente';
            } else {
                feedbackOrdenacao = 'Ordenado ascendente';
            }

            setTimeout(function () {
                adicionaAlerta('extrato-alerta-texto', 'alerta-filtro',
                    feedbackOrdenacao);
            }, 1500);
        }

        setTimeout(function () {
            limparAlerta('extrato-alerta-texto', 'alerta-filtro');
        }, 1000);

        $("#gridLancamentos-pessoa-fisica")
            .find("button#ordenacao-lancamentos").focus();
    };

    var carregarFiltroAbaLancamentos = function (periodoConsulta,
                                                 dataHoraConsulta, dataAberturaConta) {

        var $containerFiltro = $('#extrato-filtro-lancamentos');
        if (filtroLancamentos == null) {
            var objetoCamposFiltro = {
                "nomeAba": "lancamentos",
                "exibeFiltroTipoOperacao": true,
                "exibeFiltroPeriodo": false,
                "exibeFiltroBuscar": true
            };
            configuraAngular(periodoConsulta, dataAberturaConta);
            filtroLancamentos = new novaInternet.Filtro($containerFiltro,
                objetoCamposFiltro, todosAbaLancamentos,
                atualizaGridLancamentos, periodoConsulta, dataHoraConsulta);
            filtroLancamentos.carregar();
        } else {
            filtroLancamentos.atualizarLancamentos(todosAbaLancamentos);
        }
    }

    function onClickExibirLupaDebitoAutomatico(elemento, dataLancamento,
                                               valorLancamento, agenciaOrigem) {
        var idTemplate = 'lupaDebitoAutomaticoTemplate';
        var parametrosLupa = {
            dataPagamento: dataLancamento,
            valorPagamento: valorLancamento,
            agenciaOrigem: agenciaOrigem
        }

        controlaExibirOcultar(elemento, parametrosLupa, idTemplate);
    }

    function onClickExibirLupaTransferencia(elemento, tipoTransferencia,
                                            dataLancamento, valorLancamento, agenciaOrigem) {
        var idTemplate = 'lupaTransferenciaTemplate';
        var parametrosLupa = {
            tipoTransferencia: tipoTransferencia.toUpperCase(),
            dataPagamento: dataLancamento,
            valorPagamento: valorLancamento,
            agenciaOrigem: agenciaOrigem
        }

        controlaExibirOcultar(elemento, parametrosLupa, idTemplate);
    }

    function onClickExibirLupaTransferenciaTED(elemento, tipoTransferencia,
                                               dataLancamento, valorLancamento, agenciaOrigem, chaveFluir) {
        var idTemplate = 'lupaTransferenciaTemplate';
        var parametrosLupa = {
            tipoTransferencia: tipoTransferencia.toUpperCase(),
            dataPagamento: dataLancamento,
            valorPagamento: valorLancamento,
            agenciaOrigem: agenciaOrigem,
            chaveFluir: chaveFluir
        }

        controlaExibirOcultar(elemento, parametrosLupa, idTemplate);
    }

    function onClickExibirLupaEncargosLancamentoFuturos(elemento, dataUltimaAtualizacao) {
        var idTemplate = 'lupaEncargosLancamentoFuturosTemplate';
        var parametrosLupa = {
            dataUltimaAtualizacao: dataUltimaAtualizacao
        }

        controlaExibirOcultar(elemento, parametrosLupa, idTemplate);
    }

    function onClickExibirLupaEncargosLancamentos(elemento) {
        var idTemplate = 'lupaEncargosLancamentoTemplate';
        var parametrosLupa = {}

        controlaExibirOcultar(elemento, parametrosLupa, idTemplate);
    }

    function onClickExibirLupaDetalhePix(elemento, chaveFluir, dataLancamento,
                                         valorLancamento, descricaoLancamento, dataFormatada, tipoOperacao) {

        var idTemplate = 'lupaDetalhePix';
        var parametrosLupa = {
            dataPagamento: dataLancamento,
            valorPagamento: valorLancamento,
            descricaoLancamento: descricaoLancamento,
            dataFormatada: dataFormatada,
            tipoOperacao: tipoOperacao
        }

        controlaExibirOcultar(elemento, parametrosLupa, idTemplate);
        configuraDetalhePix(chaveFluir, elemento, parametrosLupa);
    }

    function onClickExibirLupaFuturoPix(elemento, dataLancamento,
                                        valorLancamento, descricaoLancamento, dataFormatada, tipoOperacao) {

        var idTemplate = 'lupaLancamentoFuturoPix';
        var parametrosLupa = {
            dataPagamento: dataLancamento,
            valorPagamento: valorLancamento,
            descricaoLancamento: descricaoLancamento,
            dataFormatada: dataFormatada,
            tipoOperacao: tipoOperacao
        }

        controlaExibirOcultar(elemento, parametrosLupa, idTemplate);
    }

    var objLancamentos = {};

    function onClickExibirLupaLancamentosFilhos(elemento, chaveFluir, dataLancamento,
                                                valorLancamento, agenciaOrigem, descricaoLancamento, dataFormatada) {

        var idTemplate = 'lupaLancamentoGuiche';
        var parametrosLupa = {
            dataPagamento: dataLancamento,
            valorPagamento: valorLancamento,
            agenciaOrigem: agenciaOrigem,
            descricaoLancamento: descricaoLancamento,
            dataFormatada: dataFormatada
        }

        controlaExibirOcultar(elemento, parametrosLupa, idTemplate);
        configuraLancamentosGuiche(chaveFluir, elemento, parametrosLupa);

        var $this = $(elemento);
        var $tr = $this.closest('tr');
        var current = window.lancamentosCompleta[$tr.index()];

        if (current.chaveFluir) {
            if ($this.attr('aria-expanded') === "true") {
                objLancamentos[current.chaveFluir] = $tr.index();
            } else {
                delete objLancamentos[current.chaveFluir];
            }
        }
    }

    function configuraImpressaoFilhos() {
        var send = window.lancamentosCompleta;

        if (!$.isEmptyObject(objLancamentos)) {
            Object.keys(objLancamentos).forEach(function (el) {
                var it = objLancamentos[el];
                send.splice((it + 1), 0, window.lancamentosFilhosExtrato[el]);
            });
        }
        return send;
    }

    function controlaExibirOcultar(elemento, parametrosLupa, idTemplate,
                                   exibirDetalhes) {

        var valorLink = $(elemento).attr('aria-expanded');
        var linha = $(elemento).closest('tr');
        var noBorder = linha[0].children[0];

        limparAlertaAberturaLupa();
        if (valorLink.trim() === "false") {
            $(elemento).closest('td').prev('td').prev('td').addClass(
                'no-border-left');
            $(elemento).empty();
            $(elemento)
                .append(
                    "<span class='icon-itaufonts_seta_up txt-v-align-middle link-lupa-seta sem-impressao' aria-hidden='true' style='color: black; min-width: 97px;'></span>");
            $(elemento).attr('aria-expanded', 'true');

            if (exibirDetalhes === undefined || exibirDetalhes === true)
                exibeSecaoConteudoLupa($(elemento).closest('tr'),
                    parametrosLupa, '#' + idTemplate);

            setTimeout(function () {
                criarAlertaAberturaLupa();
            }, 1500);
            linha.addClass("bg-cor-f7f4f2 border-bottom-efe9e5");
            linha.removeClass("extrato-tabela-pf");
            noBorder.classList.add("no-border-right");

        } else {
            $(elemento).closest('td').prev('td').prev('td').removeClass(
                'no-border-left');
            $(elemento).empty();
            $(elemento)
                .append(
                    "<span class='icon-itaufonts_seta_down txt-v-align-middle link-lupa-seta sem-impressao' aria-hidden='true' style='color: black; min-width: 97px;'></span>");
            $(linha).nextAll().slice(0, 2).closest('.linha-hidden').remove();
            $(linha).next().remove();
            $(elemento).attr('aria-expanded', 'false');
            linha.removeClass("bg-cor-f7f4f2 border-bottom-efe9e5");
            linha.addClass("extrato-tabela-pf");
            noBorder.classList.remove("no-border-right");
        }

    }

    function limparAlertaAberturaLupa() {
        var textoAberturaLupa = document
            .getElementById('textoAlertaAberturaLupa');
        textoAberturaLupa.innerText = '';
        textoAberturaLupa.setAttribute('role', '');
        document.getElementById('alertaAberturaLupa').style.clip = 'auto';
        document.getElementById('alertaAberturaLupa').removeAttribute('role');
    }

    function criarAlertaAberturaLupa() {
        var textoAberturaLupa = document
            .getElementById('textoAlertaAberturaLupa');

        document.getElementById('textoAlertaAberturaLupa').setAttribute("role",
            "alert");
        document.getElementById('alertaAberturaLupa').style.clip = 'auto';
        alertText = document
            .createTextNode("informa\u00E7\u00E3o exibida na pr\u00F3xima linha da tabela");
        textoAberturaLupa.appendChild(alertText);
        textoAberturaLupa.style.display = 'none';
        textoAberturaLupa.style.display = 'inline';
    }

    function processaDetalhesTransferencia(elemento, tipoTransferencia,
                                           dataRecebimento, valorPagamento, deveAbrirNovaJanela,
                                           callbackSucesso, callbackErro, chaveFluir) {
        var linha = $(elemento).closest('tr').prev();
        var existeDetalhes = linha.data("detalheTransferencia");
        var existeErro = linha.data("mensagemErroDetalheLancamento");
        if (!existeDetalhes && !existeErro) {
            if (deveAbrirNovaJanela) {
                var janelaImpressao = abrirJanelaImpressao();
            }

            let opDetalhamento = "";
            let dadosRequest = {};

            if (["ted", "TED"].includes(tipoTransferencia) && ![null, undefined, '', ' '].includes(chaveFluir)) {
                opDetalhamento = "JTULT8CSuyGWqhz0Tk9WsqTySoixqKP+m0j05CFDLpc=;";
                dadosRequest = JSON.stringify({
                    "chaveFluir": chaveFluir,
                    "tipoPagamento": tipoTransferencia,
                    "dataRecebimento": dataRecebimento,
                    "valorPagamento": valorPagamento
                });
            } else {
                opDetalhamento = "9BAhlEFkNAKw7JOdfsqlLAM+VxFjfWnAkdHFNM+mBDY=;";
                dadosRequest = JSON.stringify({
                    "tipoPagamento": tipoTransferencia,
                    "dataRecebimento": dataRecebimento,
                    "valorPagamento": valorPagamento
                });
            }

            $.Ajax({
                method: "POST",
                dataType: "json",
                contentType: "application/json;charset=UTF-8",
                headers: {
                    "op": opDetalhamento,
                    ajaxRequest: true,
                    scrollToTop: false
                },
                data: dadosRequest,
                success: function (retorno) {
                    linha.data("detalheTransferencia", retorno);

                    if (typeof callbackSucesso !== 'undefined'
                        && callbackSucesso) {
                        callbackSucesso(elemento, linha,
                            tipoTransferencia, janelaImpressao)
                    }
                },
                error: function (error) {

                    if (typeof callbackErro !== 'undefined'
                        && callbackErro) {
                        callbackErro(elemento, linha, error);
                    }
                }
            });
        } else {
            if (existeErro) {
                if (typeof callbackErro !== 'undefined' && callbackErro) {
                    callbackErro(elemento, linha, existeErro);
                }
            } else {
                if (typeof callbackSucesso !== 'undefined' && callbackSucesso) {
                    callbackSucesso(elemento, linha, tipoTransferencia)
                }
            }
        }
    }

    var exibeLightBoxDetalhesTransferencia = function (elemento, linha,
                                                       tipoTransferencia) {

        var detalhesTransferencias = linha.data("detalheTransferencia");
        var lista = {
            detalhes: detalhesTransferencias,
            tipoTransferenciaTEF: tipoTransferencia === "TEF"
        };
        var templatePaginador = $('#conteudoDetalheTransferencia').html();

        var lightbox = new novaInternet.Lightbox({
            width: 700,
            titulo: "visualiza&ccedil;&atilde;o detalhe transfer&ecirc;ncia",
            corpo: templatePaginador,
            trigger: elemento
        });
        lightbox.render();

        function configuraPaginadorTransferencia() {

            angular
                .element(document)
                .ready(
                    function () {
                        angular
                            .bootstrap(
                                document
                                    .getElementById('container-paginador-transferencia'),
                                ['paginadorTransferenciaApp']);
                    });

            var appPaginadorTransferencia = angular.module(
                'paginadorTransferenciaApp', ['CpvPaginationModule']);

            appPaginadorTransferencia
                .controller(
                    'paginadorTransferenciaController',
                    [
                        '$scope',
                        function ($scope) {
                            var self = this;

                            var size = detalhesTransferencias.length;
                            self.list = lista;
                            self.displayList = {
                                detalhes: lista != undefined && lista.detalhes.length > 0 ? [lista.detalhes[0]] : [],
                                tipoTransferenciaTEF: tipoTransferencia === "TEF"
                            };

                            self.click = function (pageData) {
                                var listaPaginada = self.list.detalhes
                                    .slice(
                                        pageData.startItem,
                                        pageData.endItem + 1);
                                lista = {
                                    detalhes: listaPaginada,
                                    tipoTransferenciaTEF: tipoTransferencia === "TEF"
                                };
                                self.displayList = lista;

                            }

                            self.ariaProperties = {
                                firstLabel: "Primeira p&aacute;gina",
                                lastLabel: "&Uacute;ltima p&aacute;gina",
                                previousLabel: "P&aacute;gina anterior",
                                nextLabel: "Pr&oacute;xima p&aacute;gina",
                                pageLabel: "P&aacute;gina @P de @T"
                            };

                            self.labels = {
                                firstLabel: "<<",
                                lastLabel: ">>",
                                previousLabel: "<",
                                nextLabel: ">",
                                pageLabel: "@P"
                            }
                        }]);
        }

        configuraPaginadorTransferencia();

    }

    function geraConteudoDetalheTransferencia(detalhesTransferencias,
                                              tipoTransferencia) {

        var lista = {
            detalhes: detalhesTransferencias,
            tipoTransferenciaTEF: tipoTransferencia === "TEF"
        };
        var template = $('#conteudoDetalheTransferenciaImpressao').html();
        return Mustache.to_html(template, lista);
    }

    function onClickExibirChequeCompensado(elemento, numeroCh, dataLancamento, agenciaOrigem) {
        var idTemplate = 'tokenLupaChequeCompensado';
        var parametrosLupa = {
            agenciaOrigem: agenciaOrigem
        };
        var linha = $(elemento).closest('tr');
        var existeChequeCompensado = linha.data("detalheChequeCompensado");

        var numeroLinhaClicada = $(linha).index();
        var numeroLinhaTokenExibido = linhaTokenExibido ? $(linhaTokenExibido)
            .index() : 0;
        if ($(elemento).attr('aria-expanded').trim() === "false") {
            $(elemento).closest('td').prev('td').prev('td').addClass(
                'no-border-left').addClass('no-border-right');

            if (!existeChequeCompensado) {
                numeroCheque = numeroCh;
                dataLancamentoCheque = dataLancamento;

                if (tokenExibido
                    && numeroLinhaClicada != numeroLinhaTokenExibido) {
                    $(elementoTokenExibido).empty();
                    $(elementoTokenExibido)
                        .append(
                            "<span class='icon-itaufonts_seta_down txt-v-align-middle link-lupa-seta sem-impressao' aria-hidden='true'></span>");
                    $(elementoTokenExibido).attr('aria-expanded', 'false');
                    $(elementoTokenExibido).attr('aria-label', 'exibir');

                    $(linhaTokenExibido).next().remove();
                    $(linhaTokenExibido).next().remove();
                    $(linhaTokenExibido).removeClass(
                        "bg-cor-f7f4f2 border-bottom-efe9e5");
                    $(linhaTokenExibido).addClass("extrato-tabela-pf");
                    $(linhaTokenExibido).find('td:first').removeClass(
                        'no-border-left').removeClass('no-border-right');
                }

                exibirTokenChequeCompensado(elemento, linha, parametrosLupa,
                    idTemplate);
            } else {
                parametrosLupa.imagemFrente = existeChequeCompensado.imagemFrente;
                parametrosLupa.imagemVerso = existeChequeCompensado.imagemVerso;
                controlaExibirOcultar(elemento, parametrosLupa,
                    "lupaChequeCompensado");
            }
            scrollElementTo(linha, obterAlturaHeader());
        } else {
            $(elemento).closest('td').prev('td').prev('td').removeClass(
                'no-border-left').removeClass('no-border-right');
            controlaExibirOcultar(elemento, null, idTemplate);

            if (numeroLinhaClicada == numeroLinhaTokenExibido) {
                tokenExibido = false;
            }
        }
    }

    function exibirTokenChequeCompensado(elemento, linha, parametrosLupa,
                                         idTemplate) {

        $
            .Ajax({
                method: "POST",
                dataType: "html",
                headers: {
                    "op": "+jWvOg4vdX6AdEOyt43dirHErOR8qb6QdmGC19yxnN0=;",
                    ajaxRequest: true,
                    scrollToTop: false
                },
                success: function (retorno) {
                    parametrosLupa.retorno = retorno;
                    controlaExibirOcultar(elemento, parametrosLupa,
                        idTemplate);

                    elementoTokenExibido = elemento;
                    tokenExibido = true;
                    linhaTokenExibido = linha;
                    setTimeout(function () {
                        scrollElementTo(linha, obterAlturaHeader());
                    }, 200);

                },
                error: function (error) {
                    renderizaLupaErro(linha, error, linha,
                        "mensagemErroChequeCompensado",
                        "#erroLupaTransferenciaTemplate");
                    controlaExibirOcultar(elemento, null, idTemplate, false);
                }
            });
    }

    function onClickExibeLightboxChequeCompensado(elemento, imagemFrente,
                                                  imagemVerso) {

        var htmlDetalheChequeCompensado = geraConteudoChequeCompensado(
            imagemFrente, imagemVerso);

        var lightbox = new novaInternet.Lightbox({
            width: 700,
            titulo: "visualiza&ccedil;&atilde;o da imagem do cheque",
            corpo: htmlDetalheChequeCompensado,
            trigger: elemento
        });
        lightbox.render();
    }

    function geraConteudoChequeCompensado(imagemFrente, imagemVerso) {
        var imagens = {
            imagemFrente: imagemFrente,
            imagemVerso: imagemVerso
        };

        var template = $('#conteudoDetalheChequeCompensado').html();
        return Mustache.to_html(template, imagens);
    }

    var renderizaLupaErroTransferencia = function (elemento, linha, error) {
        $(elemento).closest('tr').remove();
        renderizaLupaErro(linha, error, linha, "mensagemErroDetalheLancamento",
            "#erroLupaTransferenciaTemplate");
    }

    function renderizaLupaErro(elemento, error, linha, idDataErro,
                               idTemplateErro, msgErro) {
        var mensagemErroLancamento = 'Desculpe, n&atilde;o foi poss&iacute;vel carregar as informa&ccedil;&otilde;es. Por favor, tente novamente mais tarde.';
        if (error && error.data && error.data.object) {
            mensagemErroLancamento = error.data.object
        } else if (msgErro) {
            mensagemErroLancamento = msgErro;
        }

        exibeSecaoConteudoLupa(elemento, {
            mensagemErro: mensagemErroLancamento
        }, idTemplateErro);
        linha.data(idDataErro, mensagemErroLancamento);
    }

    function exibeSecaoConteudoLupa(elemento, parametrosLupa, idTemplate) {
        var template = $(idTemplate).html();
        var output = Mustache.render(template, parametrosLupa);
        $(elemento).after(output);
    }

    function atualizaLancamentos(todosLancamentos) {
        if ((typeof todosAbaLancamentos == 'undefined' || todosAbaLancamentos.length == 0)
            || ((typeof todosAbaLancamentos !== 'undefined' || todosAbaLancamentos.length > 0) && (typeof todosLancamentos.lancamentos != 'undefined'))) {
            todosAbaLancamentos = jQuery.extend(true, [],
                todosLancamentos.lancamentos);
            todosLancamentos = jQuery.extend(true, [],
                todosLancamentos.lancamentos);
        }

        return todosLancamentos;
    }

    var atualizaGridLancamentos = function (listaLancamentos, ordenacao) {
        $('#extrato-grid-lancamentos, #extrato-grid-lancamentos-futuros-entrada, #extrato-grid-lancamentos-futuros-saida').empty();
        $('#extrato-btn-ver-mais-lancamentos').empty();
        carregarAbaLancamentos(listaLancamentos, ordenacao);
    }

    var exportarDetalhesTransferenciaHTML = function (elemento, linha,
                                                      tipoTransferencia, janelaImpressao) {

        var detalhesTransferencias = linha.data("detalheTransferencia");
        var htmlDetalhesTransferencia = geraConteudoDetalheTransferencia(
            detalhesTransferencias, tipoTransferencia);

        var tituloImpressao = 'informa&ccedil;&otilde;es ' + tipoTransferencia + ' recebido';

        imprimirTemplateHTML(
            tituloImpressao,
            null,
            'EdpC5qFN3dY/IGJnV4bFyDao4NpbnZTxDjKhGZ/lDmM=;',
            htmlDetalhesTransferencia, null, janelaImpressao)
    };

    var exportarDetalhesTransferenciaPDF = function (elemento, linha,
                                                     tipoTransferencia) {

        var detalhesTransferencias = linha.data("detalheTransferencia");
        var htmlDetalhesTransferencia = geraConteudoDetalheTransferencia(
            detalhesTransferencias, tipoTransferencia);

        var tituloPDF = 'informa&ccedil;&otilde;es ' + tipoTransferencia + ' recebido';
        salvarEmPDF(tituloPDF, null, 'formImpressaoPDF',
            htmlDetalhesTransferencia);
    }

    var setAgenciaContaVaziaSeDiferenteNumero = function (lista) {
        return lista.map(function (item) {
            var temp = $.extend({}, item);
            if (item.agenciaOrigem !== null && (/\D+/.test(item.agenciaOrigem))) {
                temp.agenciaOrigem = "";
            }
            return temp;
        });
        return lista;
    }

    var botaoLightBox = "";

    function abrirExportarExcel(botao) {
        var lightBoxEsportarExcel = new novaInternet.ExportarExcel();
        lightBoxEsportarExcel.carregar();
        botaoLightBox = botao;
    }

    function abrirExportarPDF(botao) {
        var lightBoxExportarPDF = new novaInternet.ExportarPDF();
        lightBoxExportarPDF.carregar();
        botaoLightBox = botao;
    }

    function abrirExportarImpressao(botao) {
        var lightBoxExportarImpressao = new novaInternet.ExportarImpressao();
        lightBoxExportarImpressao.carregar();
        botaoLightBox = botao;
    }

    function abrirExportarOfc(botao) {
        var lightBoxExportarOfc = new novaInternet.ExportarOfc();
        lightBoxExportarOfc.carregar();
        botaoLightBox = botao;
    }

    var exibirLoadingExportacao = function () {
        var maxZIndex = $.maxZIndex() + 5;

        // Verifica se existe a div com ID no DOM para receber a mensagem do leitor de tela
        var a11yLoadingDiv = document.getElementById('feedbackAcessibilidadeGlobal');

        $.blockUI({
            message: '<div class="row clearfix"><div class="loading-nova-internet" aria-label="carregando"></div></div>',
            baseZ: maxZIndex,
            overlayCSS: {backgroundColor: '#fff', opacity: 0.9},
            css: {
                padding: 0,
                margin: 0,
                width: '30%',
                top: '40%',
                left: '35%',
                textAlign: 'center',
                color: '#000',
                border: '',
                backgroundColor: 'transparent',
                cursor: ''
            }
        });

        if (a11yLoadingDiv && $('.loading-nova-internet').is(':visible')) {
            $('#feedbackAcessibilidadeGlobal').attr('aria-atomic', 'true');
            $('#feedbackAcessibilidadeGlobal').html("aguarde o download do arquivo");
        }
    };

    var fecharLoadingExportacao = function () {
        try {
            var a11yLoadingDiv = document.getElementById('feedbackAcessibilidadeGlobal');
            if (a11yLoadingDiv) {
                $('#feedbackAcessibilidadeGlobal').html("download concluido");
            }
            $.unblockUI();
            setTimeout(function () {
                $('#feedbackAcessibilidadeGlobal').html("");
            }, 500);
        } catch (e) {
            try {
                console.log(e);
            } catch (exception) {

            }
        }
    };

    function exportarExtratoArquivo(idFormulario, tipoArquivo) {
        var send = window.lancamentosCompleta;
        var opTxt = 'YxEsWYiJ8tW1ZUnHSDZVfOJmO69YIaCS3n32FHGkQ1M=;';
        var opXls = '4ra9OkfIAoAk+/k9f2Zx1z3rlqn7HgKuFh+krlXepEM=;';
        var opOfx = 'LDmIFra8HuF6ihzEKzf5LQLYPgCV/Pj3ITHPQ44/VGE=;';
        var opOfc10 = 'tsgc8qd1/DyzKFdps9aTASNu3bniv1RnkOk7AYy6NF4=;';
        var opOfc106 = 'ptAuRwR1+5a6jac8eX1yZu8J+yWJLUk3V9J5fPRSIzo=;';
        var opOfc106quicken = 'uM2xu2G7R4mbaqxUzuSDxvg1ltA55DggXht9MA+YyVo=;';
        var formulario = document.getElementById(idFormulario);

        var listaDosLancamentos = setAgenciaContaVaziaSeDiferenteNumero(send);

        if ('true' === "true") {
            for (var data in listaDosLancamentos) {
                listaDosLancamentos[data].descricaoLancamento = listaDosLancamentos[data].descricaoLancamento.replace(String.fromCharCode(199), 'C');
            }
        }

        if (tipoArquivo === 'xls') {
            $('input[name=op]', formulario).attr('data-op', opXls);
            send = configuraImpressaoFilhos();
        } else if (tipoArquivo === 'txt') {
            $('input[name=op]', formulario).attr('data-op', opTxt);
            send = configuraImpressaoFilhos();
        } else if (tipoArquivo === 'ofx') {
            $('input[name=op]', formulario).attr('data-op', opOfx);
            $('input[name=saldoDisponivelSaque]', formulario).val(valorSaldoDisponivel);
        } else if (tipoArquivo === 'ofc10') {
            $('input[name=op]', formulario).attr('data-op', opOfc10);
            $('input[name=saldoDisponivelSaque]', formulario).val(valorSaldoDisponivel);
            tipoArquivo = "ofc1.0"
        } else if (tipoArquivo === 'ofc106') {
            $('input[name=op]', formulario).attr('data-op', opOfc106);
            $('input[name=saldoDisponivelSaque]', formulario).val(valorSaldoDisponivel);
            tipoArquivo = "ofc1.06"

        } else if (tipoArquivo === 'ofc106quicken') {
            $('input[name=op]', formulario).attr('data-op', opOfc106quicken);
            $('input[name=saldoDisponivelSaque]', formulario).val(valorSaldoDisponivel);
            tipoArquivo = "ofc1.06quicken"
        }

        $('input[name=lancamentos]', formulario).val(
            JSON.stringify(listaDosLancamentos));
        $('input[name=posicaoConsolidada]', formulario).val(
            angular.toJson(window.posicaoConsolidada));
        $('input[name=lancamentosLimite]', formulario).val(typeof (lancamentosLimite) !== 'undefined' && lancamentosLimite ? angular.toJson(lancamentosLimite) : '');
        $('input[name=dataHoraAtualizacao]', formulario).val(
            filtroLancamentos.filtroSelecionado().dataHoraConsulta);
        $(formulario).submit();

        $("#btn-fechar-lightbox").trigger('click');

        var btnAdobe = 'Salvar' + tipoArquivo
        adobeBtnExtrato(btnAdobe, true)
    }

    function exportarExtratoExcel() {
        var send = window.lancamentosCompleta;
        var opXls = '4ra9OkfIAoAk+/k9f2Zx1z3rlqn7HgKuFh+krlXepEM=;';
        var formulario = document.getElementById('formExportarExtrato');

        var listaDosLancamentos = setAgenciaContaVaziaSeDiferenteNumero(send);

        $('input[name=op]', formulario).attr('data-op', opXls);
        send = configuraImpressaoFilhos();

        $('input[name=lancamentos]', formulario).val('');
        $('input[name=posicaoConsolidada]', formulario).val('');
        $('input[name=lancamentosLimite]', formulario).val('');
        $('input[name=possuiLimiteContratado]', formulario).val('');
        $('input[name=ordemAscendente]', formulario).val($("#comboOrdenacaoLancamentos select option:selected").text() == "mais recente" ? false : true);

        if ($("[name=check-lancamentos]").is(':checked')) {
            $('input[name=lancamentos]', formulario).val(
                JSON.stringify(listaDosLancamentos));
        }

        if ($("[name=check-posicao-consolidada]").is(':checked') && !angular.equals(posicaoConsolidada, {})) {
            $('input[name=posicaoConsolidada]', formulario).val(
                angular.toJson(window.posicaoConsolidada));
        }

        if ($("[name=check-limites]").is(':checked')) {
            limitesExcel.htmlImpressao = '';
            $('input[name=lancamentosLimite]', formulario).val(angular.toJson(limitesExcel));
            $('input[name=possuiLimiteContratado]', formulario).val(possuiLimiteContratado);
        }

        $('input[name=dataHoraAtualizacao]', formulario).val(
            filtroLancamentos.filtroSelecionado().dataHoraConsulta);
        $(formulario).submit();

        $("#btn-fechar-lightbox").trigger('click');

        var btnAdobe = 'Salvar' + "xls"
        adobeBtnExtrato(btnAdobe, true);

    }

    function exportarExtratoPDF() {

        var send = window.lancamentosCompleta;
        var opPDF = 'Ay5/GuJY6JGqQRrgHfShhx1n3Fia5NEEuNH0KbyXp4s=;';
        var formulario = document.getElementById('formExportarExtrato');

        var listaDosLancamentos = setAgenciaContaVaziaSeDiferenteNumero(send);
        $('input[name=op]', formulario).attr('data-op', opPDF);
        send = configuraImpressaoFilhos();

        $('input[name=lancamentos]', formulario).val('');
        $('input[name=lancamentosFuturos]', formulario).val('');
        $('input[name=posicaoConsolidada]', formulario).val('');
        $('input[name=lancamentosLimite]', formulario).val('');
        $('input[name=possuiLimiteContratado]', formulario).val('');
        $('input[name=ordemAscendente]', formulario).val($("#comboOrdenacaoLancamentos select option:selected").text() == "mais recente" ? false : true);

        if ($("[name=check-lancamentos]").is(':checked')) {
            $('input[name=lancamentos]', formulario).val(
                JSON.stringify(listaDosLancamentos));
        }

        if ($("[name=check-lancamentos-futuros]").is(':checked')) {
            $('input[name=lancamentosFuturos]', formulario).val(
                JSON.stringify(listaDosLancamentos));
        }

        if ($("[name=check-posicao-consolidada]").is(':checked') && !angular.equals(posicaoConsolidada, {})) {
            $('input[name=posicaoConsolidada]', formulario).val(
                angular.toJson(window.posicaoConsolidada));
        }

        if ($("[name=check-limites]").is(':checked')) {
            limitesExcel.htmlImpressao = '';
            $('input[name=lancamentosLimite]', formulario).val(angular.toJson(limitesExcel));
            $('input[name=possuiLimiteContratado]', formulario).val(possuiLimiteContratado);
        }

        $('input[name=dataHoraAtualizacao]', formulario).val(
            filtroLancamentos.filtroSelecionado().dataHoraConsulta);

        $(formulario).submit();

        $("#btn-fechar-lightbox").trigger('click');

        var btnAdobe = 'Salvar' + "pdf"
        adobeBtnExtrato(btnAdobe, true);

    }

    function exportarExtratoImpressao() {
        var send = window.lancamentosCompleta;
        var opImpressao = 'gcnYcpaBJ/pZjUQ0LWPyV2iFQDyD4v3se+gTOpkS67Q=;';
        var formulario = document.getElementById('formExportarExtrato');

        var listaDosLancamentos = setAgenciaContaVaziaSeDiferenteNumero(send);
        $('input[name=op]', formulario).attr('data-op', opImpressao);
        send = configuraImpressaoFilhos();

        $('input[name=lancamentos]', formulario).val('');
        $('input[name=lancamentosFuturos]', formulario).val('');
        $('input[name=posicaoConsolidada]', formulario).val('');
        $('input[name=lancamentosLimite]', formulario).val('');
        $('input[name=possuiLimiteContratado]', formulario).val('');
        $('input[name=ordemAscendente]', formulario).val($("#comboOrdenacaoLancamentos select option:selected").text() == "mais recente" ? false : true);

        if ($("[name=check-lancamentos]").is(':checked')) {
            $('input[name=lancamentos]', formulario).val(
                JSON.stringify(listaDosLancamentos));
        }

        if ($("[name=check-lancamentos-futuros]").is(':checked')) {
            $('input[name=lancamentosFuturos]', formulario).val(
                JSON.stringify(listaDosLancamentos));
        }

        if ($("[name=check-posicao-consolidada]").is(':checked') && !angular.equals(posicaoConsolidada, {})) {
            $('input[name=posicaoConsolidada]', formulario).val(
                angular.toJson(window.posicaoConsolidada));
        }

        if ($("[name=check-limites]").is(':checked')) {
            limitesExcel.htmlImpressao = '';
            $('input[name=lancamentosLimite]', formulario).val(angular.toJson(limitesExcel));
            $('input[name=possuiLimiteContratado]', formulario).val(possuiLimiteContratado);
        }

        $('input[name=dataHoraAtualizacao]', formulario).val(
            filtroLancamentos.filtroSelecionado().dataHoraConsulta);

        var dados = {};

        $.each(formulario, function (i, v) {
            var input = $(v);
            dados[input.attr("name")] = input.val();
        });

        $.Ajax({
            dataType: 'json',
            method: "POST",
            headers: {
                "op": opImpressao,
                ajaxRequest: true,
                scrollToTop: false
            },
            data: dados,
            success: function (data) {
                const template = data.conteudoImpressao.replace("</head>", "<link rel='stylesheet' type='text/css' href='" + caminhoFontesCss + "' /></head>");

                var printWindow = window.open('', '_blank', 'width=800,height=800');
                printWindow.document.write(template);
                printWindow.document.title = "extrato-lancamentos";
                printWindow.document.close();
                printWindow.focus();
                setTimeout(function () {
                    printWindow.print();
                    printWindow.close();
                }, 1500);
            },
            error: function (erro) {
                console.log("Falha ao obter template para impressao!");
            }
        });

        $(formulario).submit(function (e) {
            e.preventDefault();
        });

        $("#btn-fechar-lightbox").trigger('click');

        var btnAdobe = 'Salvar' + "impressao"
        adobeBtnExtrato(btnAdobe, true);

    }

    function formDataToJSON(form) {
        var formData = new FormData(form);
        var convertedJSON = {};
        for (const [key, value] of formData.entries()) {
            convertedJSON[key] = value;
        }

        return convertedJSON;
    }

    function onClickExibirLupaNovidade(elemento, idWarning) {
        var idTemplate = 'acao-lancamento';
        var parametrosLupa = {};
        parametrosLupa.conteudo = document.getElementById(idWarning).innerHTML;
        if (parametrosLupa.conteudo.length > 0) {
            controlaNovidade(elemento, parametrosLupa, idTemplate);
        }
    }

    function controlaNovidade(elemento, parametrosLupa, idTemplate,
                              exibirDetalhes) {
        var expandido = elemento.getAttribute('aria-expanded');
        limparAlertaAberturaLupa();
        var linha = $(elemento).closest('tr');
        var noBorder = linha[0].children[0];

        if (expandido === "false") {
            $(elemento).attr('aria-expanded', 'true');
            $(elemento).attr('aria-label', 'ocultar');

            if (exibirDetalhes === undefined || exibirDetalhes === true) {
                exibeSecaoConteudoLupa($(elemento).closest('tr'),
                    parametrosLupa, '#' + idTemplate);
                linha.addClass("bg-cor-f7f4f2 border-bottom-efe9e5");
                linha.removeClass("extrato-tabela-pf");
                noBorder.classList.add("no-border");
            }

            setTimeout(function () {
                criarAlertaAberturaLupa();
            }, 1500);
        } else {
            $(elemento).closest('tr').next().remove();
            $(elemento).closest('tr').next().remove();
            $(elemento).attr('aria-expanded', 'false');
            $(elemento).attr('aria-label', 'exibir');
            linha.removeClass("bg-cor-f7f4f2 border-bottom-efe9e5");
            linha.addClass("extrato-tabela-pf");
            noBorder.classList.remove("no-border");
        }
    }

    function removerWarnings(lista) {
        var divPecaJa = $("#U3").is(':empty');

        if (divPecaJa) {

            for (var posicao = 0; posicao < lista.length; posicao++) {
                var item = lista[posicao];

                if (divPecaJa && item.controleExibicao
                    && item.controleExibicao.pecaJa) {
                    item.controleExibicao.pecaJa = false;
                }
            }
        }
    }

    function armazenaValoresFiltro(filtro, valor) {
        $.Ajax({
            dataType: "json",
            method: "POST",
            data: {
                "filtro": filtro,
                "valor": valor
            },
            headers: {
                "op": "vsH08bFd4+E1hf9jxd4+yZ3fdxa2LDEk/DfGSsq/qEM=;",
                ajaxRequest: true,
                scrollToTop: false
            },
            success: function (retorno) {
                comprovanteLancamentos = retorno.conteudoImpressao.replace("</head>", "<link rel='stylesheet' type='text/css' href='" + caminhoFontesCss + "' /></head>");
            },
            error: function (erro) {
                console.log("Falha ao passar parametros para template de PDF");
            }
        });
    };


    function exportarArquivoLancamentoImprimirPdf(tipoExportacao) {
        if (novoTemplatePDF == "true") {
            if (tipoExportacao === 'pdf') {
                $('#formLancamentosImpressao input[name=titulo]').val("extrato-lancamentos");
                $('#formLancamentosImpressao input[name=nomeArquivo]').val("comprovanteLancamentos");
                $("#formLancamentosImpressao").submit();
                tipoExportacao = 'SalvarPdf';
            } else {
                var printWindow = window.open('', '_blank', 'width=800,height=800');
                printWindow.document.write(comprovanteLancamentos);
                printWindow.document.title = "extrato-lancamentos";
                printWindow.document.close();
                printWindow.focus();
                setTimeout(function () {
                    printWindow.print();
                    printWindow.close();
                }, 1500);
            }
        } else {
            $('#mensagemErroPdf').remove();
            var stylePdf = "<style> .bg-cor-faf8f7.border-bottom-d8d8d8{background-color: white;} #feature-lancamentos-guiche table.table-impressao-pdf.es
            condido - para - impressao
            {
                width: 95 % !important;
                margin - left
            :
                inherit
                !important;
                margin - right
            :
                auto
                !important;
            }
            #feature - lancamentos - guiche.table - i
            mpressao - pdf
            span.nao - exibe - data - lancamento.fonte - impressao
            {
                color: white
                !important
            }
            #feature - lancamentos - guiche.table - impressao - pdf
            td.valor - lan
            camento - negativo - pf
            {
                padding - right
            :
                0
                !important;
                text - align
            :
                right
                !important;
            }
            #feature - lancamentos - guiche.table - impressao - pdf
            td.valor - lancamento - negativo - pf
            span
            {
                text - align
            :
                right
                !important;
            }
        </style>
            ";

            var conteudoHTMLAbaLancamentos = $('#extrato-grid-lancamentos').clone();

            conteudoHTMLAbaLancamentos = $(conteudoHTMLAbaLancamentos).find(
                '.remover-da-impressao').remove().end().html();

            if (tipoExportacao === 'pdf') {
                $("#formImpressaoPDF input[name='nomeArquivo']").val('extrato-lancamentos');
                salvarEmPDF('extrato conta corrente / lan&ccedil;amentos', null,
                    'formImpressaoPDF', conteudoHTMLAbaLancamentos + stylePdf,
                    filtroLancamentos.filtroSelecionado().dataHoraConsulta);
                tipoExportacao = 'SalvarPdf'
            } else {
                imprimirTemplateHTML(
                    'extrato conta corrente / lan&ccedil;amentos',
                    'extrato-grid-lancamentos',
                    'EdpC5qFN3dY/IGJnV4bFyDao4NpbnZTxDjKhGZ/lDmM=;',
                    null,
                    filtroLancamentos.filtroSelecionado().dataHoraConsulta);
            }
        }

        adobeBtnExtrato(tipoExportacao, true);
    }

</script>

<style>
    #extrato-grid-lancamentos .icon-debito-guiche {
        font-size: 24px;
    }

    #varejo #extrato-grid-lancamentos .icon-debito-guiche, #uniclass #extrato-grid-lancamentos .icon-debito-guiche, #private #extrato-grid-lancamentos .icon-debito-guiche {
        color: #EC7000;;
    }

    #person #extrato-grid-lancamentos .icon-debito-guiche {
        color: #876632;;
    }
</style>

</div>
<label for="aba-lancamentos-futuros" class="hide">lan&ccedil;amentos
    futuros</label>

<div id="aba-lancamentos-futuros"
     class="ni-conteudo-aba-pf clearfix" name="lancamentos futuros">
    <!DOCTYPE html>


    <!-- FILTRO ORDENA&Ccedil;&Atilde;O -->
    <div class="text-access-hide" id="alerta-ordenacao">
        <span class="text-access-hide" id="extrato-alerta-texto-ordenacao" aria-live="polite"></span>
    </div>
    <div class="grid-col9 padding-esquerda25 caixa-titulo-ordenacao-lancamento-futuro">
        <h2 class="titulo-aba-lancamentos-futuros-pf left">movimenta&ccedil;&otilde;es</h2>

        <div class="combo-ordenacao right" id="comboOrdenacaoLancamentosFuturos" ng-controller="appController as app">
            <cpv-select label="ordenar por" placeholder="selecione" hide-label="false" options="app.options"
                        on-change="app.change(app.ordenacao)" model="app.ordenacao"></cpv-select>
        </div>
    </div>
    <!-- IMPRESS&Atilde;O -->
    <div
        class="largura-fixa-160 grid-col3 txt-right margem-direita25 no-padding-direita border-left-efe9e5 right acoes-impressao">
        <button aria-label="imprimir" class="icon-itaufonts_impressora ni-icone-menu-exportar" onclick="javascript:exportarArquivoLancamentoFuturoImprimir
Pdf('imprimir');" text-tooltip="imprimir" class-tooltip="tooltip-exportacao cor-background-605751"
                class-arrow-tooltip="border-top-color-605751" data-placement="top"
                data-placement-arrow="center"></button>
        <button aria-label="salvar em pdf" class="icon-itaufonts_pdf ni-icone-menu-exportar" onclick="javascript:exportarArquivoLancamentoFuturoImprimirPd
f('pdf');" text-tooltip="salvar em pdf" class-tooltip="tooltip-exportacao cor-background-605751"
                class-arrow-tooltip="border-top-color-605751" data-placement="top"
                data-placement-arrow="center"></button>
    </div>

    <div class="grid-col12 padding-esquerda25 padding-direita25">
        <hr class="grid-col12 no-padding hr-extrato"/>
    </div>

    <!-- INICIO ANGULAR -->

    <div id="tabelaAbaLancamentosFuturos" class="table-extract-main"
         ng-controller="lancamentosFuturosAppController as ctrl" ng-init="ctrl.init()">

        <!-- TABELA -->
        <div id="extrato-tabela-lancamentos-futuros" class="table-extract" role="table"
             ng-if="ctrl.lancamentos.length > 0">
            <div class="table-extract__container">
                <div class="table-extract__row table-extract__row--header" role="row">
                    <div class="table-extract__td table-extract__td--date header-lancamentos-impressao-pf"
                         role="columnheader">data
                    </div>
                    <div class="table-extract__td table-extract__td--name header-lancamentos-impressao-pf"
                         role="columnheader">lan&ccedil;amentos
                    </div>
                    <div class="table-extract__td table-extract__td--currency header-lancamentos-impressao-pf"
                         role="columnheader">valor(R$)
                    </div>


                    <div class="table-extract__td table-extract__td--details header-lancamentos-impressao-pf"
                         role="columnheader">op&ccedil;&otilde;es
                    </div>

                </div>
                <div id="corpo-tabela-lancamentos-futuros" role="rowgroup">
                    <div class="table-extract__row table-extract__row--body linha-tabela-lancamentos-impressao"
                         ng-class="{'table-extract--mesAno':lancamento.descricaoMesAno==true}" role="row"
                         ng-repeat="lancamento in ctrl.lancamentos">
                        <div class="table-extract__td table-extract__td--date extrato-impressao-zebrado" role="cell"
                             ng-if="!lancamento.descricaoMesAno">
                            <span ng-bind-html="lancamento.dataLancamento"></span>
                        </div>

                        <div class="table-extract__td table-extract__td--name extrato-impressao-zebrado" role="cell"
                             ng-if="!lancamento.dataUltimaAtualizacao.length > 0">
                            {{lancamento.descricaoLancamento}}
                        </div>

                        <div class="table-extract__td table-extract__td--name extrato-impressao-zebrado" role="cell"
                             ng-if="lancamento.dataUltimaAtualizacao.length > 0">
                            {{lancamento.descricaoLancamento}}
                            <span class="itau-tooltip__container sem-impressao" style="float:none">
<button class="icon-itaufonts_informacao extrato-icone-informacoes-tooltip" aria-expanded="false"
        aria-label="mais informa&ccedil;&otilde;es" itau-tooltip-position="right"
        itau-tooltip="{{lancamento.descricaoDetalhadaLancamento}}"></button>
<span role="status"></span>
    </span>
                        </div>

                        <div class="table-extract__td table-extract__td--currency extrato-impressao-zebrado"
                             ng-class="{'table-extract__td--positivo':lancamento.ePositivo==true}" role="cell"
                             ng-bind-html="lancamento.valorLancamento" ng-if="!lancamento.descricaoMesAno"></div>


                        <div class="table-extract__td table-extract__td--details extrato-impressao-zebrado" role="cell"
                             ng-if="!lancamento.descricaoMesAno && !lancamento.tipoPix && lancamento.dataUltimaAtualizacao.length == 0">
                            <div class="wrapper-link-underline sem-impressao" ng-if="lancamento.exibeLixeira">
                                <a data-op='yS0gjGU7pAa+tCFUMMQ4Ql0nc4zCPE9rbS/CimNSmDs=;' href="javascript:;"
                                   style='font-family: Itau Text; font-size: 14px; line-height: 24px'>cancelar
                                    agendamento</a>
                            </div>
                        </div>

                        <div class="table-extract__td table-extract__td--details extrato-impressao-zebrado" role="cell"
                             ng-if="lancamento.dataUltimaAtualizacao.length > 0 || lancamento.tipoPix">
                            <button class="details" ng-click="ctrl.showDetails($event)" aria-label="exibir">
                                <i class="details__icon icon-itaufonts_seta_down" aria-hidden="true"></i>
                            </button>
                        </div>

                        <div class="extrato-pix__td subinfo sem-impressao remover-da-impressao" role="cell"
                             ng-if="lancamento.dataUltimaAtualizacao.length > 0">
                            <div class="subinfo__content" style="padding-left: 24px;">
                                <div class="detalhe-pix-container" aria-live="polite">
                                    <div class="detalhe-pix-conteudo">
                                        <div class="identificacao-conteudo">
                                            <div class="detalhe-pix-botoes-agendamento">
                                                <p class="identificacao-texto" style="line-height: 14px;">O valor
                                                    apresentado est&aacute; calculado pela sua utiliza&ccedil;&atilde;o
                                                    at&eacute; <strong>{{lancamento.dataUltimaAtualizacao}}</strong> e
                                                    pode sofrer altera&ccedil;&otilde;es caso volte a utilizar.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="extrato-pix__td subinfo sem-impressao remover-da-impressao" role="cell"
                             ng-if="lancamento.tipoPix">
                            <div class="subinfo__content" style="padding-left: 24px;">
                                <div class="detalhe-pix-container" aria-live="polite">
                                    <div class="detalhe-pix-conteudo">
                                        <div class="identificacao-conteudo">
                                            <div ng-if="false">
                                                <p class="identificacao-texto" style="line-height: 14px;">para cancelar
                                                    essa transa&ccedil;&atilde;o utilize o seu aplicativo
                                                    Ita&uacute;</p>
                                            </div>
                                            <div class="detalhe-pix-botoes-agendamento" ng-if="true">
                                                <h3>cancelamento de agendamento</h3>
                                                <p class="identificacao-texto" style="line-height: 14px;">Voc&ecirc;
                                                    pode cancelar este agendamento pelo extrato Pix, &eacute; s&oacute;
                                                    acessar a tela de detalhes do seu lan&ccedil;amento.</p>

                                                <cpv-button custom-class="detalhe-pix-botoes"
                                                            op="9q0S0yk20lKJwuspFFCeqjpeADOQ5xAL6IlTTO6aAe4=;"
                                                            texto="ver extrato Pix"></cpv-button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div ng-if="!ctrl.lancamentos">
            <div class="margem-cima100 margem-baixo100 txt-center">
                <img src="https://estatico.itau.com.br/ibanking/pessoa-fisica-conta-corrente-app/img/empty_state.png"/>
                <br>
                <span class="mensagem-erro-lancamentos-futuro itau-display-light">
N&atilde;o h&aacute; movimenta&ccedil;&otilde;es no per&iacute;odo
</span>
            </div>
        </div>

    </div>

    <!-- IMPRESS&Atilde;O -->
    <div class="grid-col12 padding-esquerda25 padding-direita25">
        <hr class="hr-extrato margem-cima50 margem-baixo35 grid-col12">
        <div id="data-hora-atualizado-em-lancamentos-futuros"
             class="line-height32 itau-text-regular fonte-tamanho14 texto">
        </div>
        <div class="largura-fixa-220 grid-col3 txt-right no-padding-direita right">
            <button aria-label="imprimir" class="icon-itaufonts_impressora ni-icone-menu-exportar" onclick="javascript:exportarArquivoLancamentoFuturoImprim
irPdf('imprimir');" text-tooltip="imprimir" class-tooltip="tooltip-exportacao cor-background-605751"
                    class-arrow-tooltip="border-top-color-605751" data-placement="bottom"
                    data-placement-arrow="center"></button>
            <button aria-label="salvar em pdf" class="icon-itaufonts_pdf ni-icone-menu-exportar" onclick="javascript:exportarArquivoLancamentoFuturoImprimir
Pdf('pdf');" text-tooltip="salvar em pdf" class-tooltip="tooltip-exportacao cor-background-605751"
                    class-arrow-tooltip="border-top-color-605751" data-placement="bottom"
                    data-placement-arrow="center"></button>
        </div>
    </div>


    <script type="text/template" id="template-tabela-lancamentos-futuros">

        <style>
            #tabela-lancamentos-futuros-pessoa-fisica .valor-dadosCorpo-naoexibe {
                display: none !important;
            }

            #tabela-lancamentos-futuros-pessoa-fisica thead th {
                background-color: #FFFFFF !important
            }

            #corpo-tabela-lancamentos-futuros tr.extrato-tabela-pf:nth-child(2n) {
                background-color: #F1F2F4 !important
            }

        </style>

        <div class="left grid-col12 no-padding">
            <table id="tabela-lancamentos-futuros-pessoa-fisica" class="no-margem border-spacing-zero grid-col12">
                <thead
                    class="{{#dadosCorpo}}valor-dadosCorpo-exibe{{/dadosCorpo}}{{^dadosCorpo}}valor-dadosCorpo-naoexibe{{/dadosCorpo}}">
                <tr>
                    <th class="header-tabela header-lancamentos-pf header-lancamentos-impressao-pf no-border no-padding-esquerda no-padding-direita no-padding-cima grid-col-minimo75  itau-display-xbold"
                        width="9%">data
                    </th>
                    <th class="header-tabela header-lancamentos-pf header-lancamentos-impressao-pf no-border no-padding no-padding-cima no-padding-impressao titulo-cabecalho-tabela-lancamentos-pf itau-display-xbold"
                        width="48.4%">lancamentos
                    </th>
                    <th class="header-tabela header-lancamentos-pf header-lancamentos-impressao-pf no-border no-padding no-padding-cima  txt-right no-padding-impressao titulo-cabecalho-tabela-lancamentos-pf itau-display-xbold"
                        width="18.7%">valor(R$)
                    </th>
                </tr>
                </thead>
                <tbody id="corpo-tabela-lancamentos-futuros">
                {{#dadosCorpo}}
                {{#descricaoMesAno}}
                <tr class="linha-impressao altura-fixa56 border-bottom-efe9e5 linha-descricao-mes-ano">
                    <td class="descricao-mes-ano-pf fonte-impressao no-padding-impressao extrato-impressao-zebrado followMe no-border"
                        colspan="3">{{descricaoLancamento}}
                    </td>
                </tr>
                {{/descricaoMesAno}}
                {{^descricaoMesAno}}
                <tr class="border-bottom-efe9e5 padding-cima10 padding-baixo10 linha-impressao texto extrato-tabela-pf">
                    <td class="no-padding txt-v-align-middle extrato-impressao-zebrado nao-quebra-linha no-border">
                        <span aria-hidden="true" class="data-lancamento-pf fonte-impressao">{{diaLancamento}} / {{mesLancamento}}</span>
                    </td>
                    <td class="no-padding txt-v-align-middle extrato-impressao-zebrado nao-quebra-linha no-border fonte-impressao">
                        <span class="quebra-palavra">{{descricaoLancamento}}</span>
                    </td>
                    {{#ePositivo}}
                    <td class="txt-v-align-middle no-padding no-border itau-text-bold fonte-tamanho14 txt-right fonte-impressao-bold extrato-impressao-zebrado">
                        {{valorLancamento}}
                    </td>
                    {{/ePositivo}}
                    {{^ePositivo}}
                    <td class="txt-v-align-middle no-padding no-border itau-text-bold fonte-tamanho14
                            txt-right fonte-impressao-bold extrato-impressao-zebrado">
                    <span class="nao-quebra-linha">
                                    <span class="valor-lancamento-normal-negativo-pf fonte-impressao-bold">-</span>
                                    <span>{{valorLancamento}}</span>
                                </span>
                    </td>
                    {{/ePositivo}}
                </tr>
                {{/descricaoMesAno}}
                {{/dadosCorpo}}
                {{^dadosCorpo}}
                <tr class="linha-impressao linha-tabela-lancamentos-pf-sem-categoria">
                    <div id="templateErroLancamentosFuturosConteudo" class="margem-baixo100 txt-center">
                    <span
                        class="icone-mensagem-erro-lancamentos-futuro itau-display-light icon-itaufonts_brilhos_nos_olhos">
                        </span><br>
                        <span class="mensagem-erro-lancamentos-futuro itau-display-light">
                            voc&ecirc; n&atilde;o possui lan&ccedil;amentos futuros
                        </span>
                    </div>
                </tr>
                {{/dadosCorpo}}
                </tbody>
            </table>
        </div>
    </script>

    <script id="parametrosConvivenciaLixeira" type="text/template">
        <input type="hidden" name="Opcao" id="Opcao" value="C">
        <input type="hidden" name="MesReferencia" id="MesReferencia" value="A2">
        <input type="hidden" name="LinkMenu" id="LinkMenu" value="G092">
    </script>

    <script type="text/javascript">
        const sdk = window?.SDKAnalytics ?
            window.SDKAnalytics({
                gtm: 'GTM-NNRPQN6'
            }) :
            {
                track: function (event) {
                    console.log("GA4 Tracking event:", event);
                },
                setDefaultParameters: function (event) {
                    console.log("GA4 Set setDefaultParameters:", event);
                },
                setUserProperties: function (event) {
                    console.log("GA4 Set setUserProperties:", event);
                }
            };

        var listaLancamentosFuturos

        var appLancamentosFuturos = angular.module('appOrdenacao', ['SelectModule', 'FocusModule']);
        appLancamentosFuturos.controller('appController', ['$scope', 'focus', function ($scope, focus) {
            var self = this;
            self.elemento = null;
            self.options = [
                {nome: 'mais antigo', key: 'maisAntigo'},
                {nome: 'mais recente', key: 'maisRecente'}
            ];

            self.ordenacao = "maisAntigo";

            self.change = function (value) {
                window.ordenaTabela(self.elemento, 'lancamentos-futuros');
                checaOrdenacao(value);
            }

            self.$onInit = function () {
                self.elemento = $("#comboOrdenacaoLancamentosFuturos select")
            }

            function checaOrdenacao(filterValue) {
                if (filterValue === "maisAntigo") {
                    disparaGA4FilterFuturos('mais-recentes')
                } else {
                    disparaGA4FilterFuturos('mais-antigos')
                }

            }

            function disparaGA4FilterFuturos(valueFilter) {
                sdk.track({
                    analytics: {
                        event_name: "filter",
                        parameters: {
                            custom_path: "/conta/consultar/extrato/timeline-idl/futuros",
                            implementation_team: "extrato-hub-de-contas-pf:gerir-vida-financeira",
                            search_option_selected: valueFilter,
                        }
                    }
                })
                console.log(sdk)
            }

        }]);

        angular.bootstrap(document.getElementById('comboOrdenacaoLancamentosFuturos'), ['appOrdenacao']);

        var lancamentosFuturosSliced;
        var quantidadeLancamentosFuturosExibidos;
        var tamanhoPadraoPaginaGridLancamentos = 17000;
        var botaoDropdownLancamentosFuturos = null;

        var carregarAbaLancamentosFuturos = function (todosLancamentos) {
            lancamentosFuturosCompleta = montarListaGrid(todosLancamentos.lancamentosFuturos);

            if (!botaoDropdownLancamentosFuturos) {
                botaoDropdownLancamentosFuturos = new novaInternet.BotaoDropdown($('#botao-opcoes-lancamentos-futuros'));
                botaoDropdownLancamentosFuturos.carregar();
            }

            if (todosLancamentos && todosLancamentos.isOrdenacaoData) {
                var feedbackOrdenacao = '';
                carregaDadosAba(todosLancamentos);
            }

            (function () {
                $("#btn-aba-lancamentos-futuros").on("click", function () {
                    if (!listaLancamentosFuturos) {
                        tagueamentoAbaLancamentosVazios(true);
                    }
                    carregaDataLayer("LancamentosFuturos", true);
                    carregaDadosAba();
                    disparaGA4AbaFuturos();
                })
            })();

            function carregaDadosAba(todosLancamentos) {
                var escondeBotao = false;
                var tituloTabelaLancamentosFuturos = '';
                if (lancamentosFuturosCompleta && lancamentosFuturosCompleta.length > 0) {
                    var quantidade = lancamentosFuturosCompleta.slice(0, tamanhoPadraoPaginaGridLancamentos).filter(existeDescricaoMesAno);
                    if (lancamentosFuturosCompleta.length > (tamanhoPadraoPaginaGridLancamentos + quantidade.length)) {
                        var quantidadeDescricaoMesAno = lancamentosFuturosCompleta.slice(0, tamanhoPadraoPaginaGridLancamentos).filter(existeDescricaoMesAno);
                        lancamentosFuturosSliced = lancamentosFuturosCompleta.slice(0, tamanhoPadraoPaginaGridLancamentos + quantidadeDescricaoMesAno.length);
                    } else {
                        lancamentosFuturosSliced = lancamentosFuturosCompleta;
                    }

                    quantidadeLancamentosFuturosExibidos = lancamentosFuturosSliced.length

                    listaLancamentosFuturos = lancamentosFuturosSliced;

                    angular.element($("#tabelaAbaLancamentosFuturos")).scope().ctrl.atualizarListaLancamentos(lancamentosFuturosSliced)
                }
                inserirDataHoraRodape('data-hora-atualizado-em-lancamentos-futuros');
            }

            function disparaGA4AbaFuturos() {
                sdk.track({
                    analytics: {
                        event_name: 'screen_view',
                        parameters: {
                            detail: 'aba:visao-futuros',
                            custom_path: '/conta/consultar/extrato/timeline-idl',
                            implementation_team: 'extrato-hub-de-contas-pf:gerir-vida-financeira'
                        }
                    }
                })
                console.log(sdk)
            }


        }

        function exportarArquivoLancamentoFuturoImprimirPdf(tipoExportacao) {
            $('#mensagemErroPdf').remove();

            var template = $("#template-tabela-lancamentos-futuros").html();

            if (tipoExportacao === 'pdf') {
                let dataAtual = new Date().toLocaleString("pt-BR").split(" ");
                let horaMinuto = dataAtual[1].split(":");
                let tituloArquivoPDF = "extrato-lancamentos-futuros_" + dataAtual[0].replaceAll("/", "_") + "_" + horaMinuto[0] + "-" + horaMinuto[1];

                $("#formImpressaoPDF input[name='nomeArquivo']").val(tituloArquivoPDF);
                salvarEmPDF('extrato conta corrente / lan&ccedil;amentos futuros', null, 'formImpressaoPDF', Mustache.render(template, {dadosCorpo: listaLancamentosFuturos}), filtroLancamentos.filtroSelecionado().dataHoraConsulta);
            } else {
                imprimirTemplateHTML('extrato conta corrente / lan&ccedil;amentos futuros', null, 'EdpC5qFN3dY/IGJnV4bFyDao4NpbnZTxDjKhGZ/lDmM=;', Mustache.render(template, {dadosCorpo: listaLancamentosFuturos}), filtroLancamentos.filtroSelecionado().dataHoraConsulta);
            }
        }
    </script>

    <script>
        (function () {
            var dependencies = ['ButtonModule', 'ngSanitize'];
            var appLancamentosFuturos = angular.module('lancamentosFuturosApp', dependencies);

            appLancamentosFuturos.controller('lancamentosFuturosAppController', ['$scope', function ($scope) {

                const self = this;
                self.lancamentos = window.listaLancamentosFuturos;

                self.atualizarListaLancamentos = function (todosLancamentos) {
                    self.lancamentos = todosLancamentos;
                    var verificaPix = self.lancamentos.filter(function (elem, i, array) {
                        if (elem.descricaoLancamento.match("PIX")) {
                            elem.tipoPix = true;
                        }
                        return elem
                    })
                    console.log(self.lancamentos)

                    $scope.$apply();
                }

                self.showDetails = function (event) {
                    var linha = $(event.target).closest('.table-extract__row');
                    linha.toggleClass('table-extract__row--active');
                    var mensagem = linha.hasClass('table-extract__row--active') ? "detalhe de lan&ccedil;amento expandido" : "detalhe de lan&ccedil;amento recolhido";
                    var label = linha.hasClass('table-extract__row--active') ? 'ocultar' : 'exibir';
                    $(event.target).attr('aria-label', label);
                    feedbackAcessibilidade(mensagem);
                }

                self.cancelarAgendamento = function (lancamento) {
                    var obj = lancamento
                    var parametros = $('#parametrosConvivenciaLixeira').html();
                    var frm = $('#frmExtratoConvivencia');
                    frm.html(parametros);

                    $.Ajax({
                        method: "POST",
                        dataType: "json",
                        contentType: "application/json;charset=UTF-8",
                        headers: {
                            "op": "zl8vg18Vml4mR//jJoIziV3/da40i+xpTd9sMse7bLg=;",
                            ajaxRequest: true,
                            scrollToTop: false
                        },
                        data: JSON.stringify({
                            "descricaoLancamento": obj.descricaoLancamento.replace(/\s/g, '').substr(9),
                            "dataLancamento": obj.dataLancamento.replace(/^(0+)(\d)/g, "$2").replace(/\//g, ''),
                            "valorLancamento": obj.valorLancamento.replace(/[^\w]/g, '').replace(/^(0+)(\d)/g, "$2")
                        }),
                        success: function (retorno) {
                            executaConvivenciaOp('::convivencia_op::', 'frmExtratoConvivencia');
                            frm.empty();
                        },
                        error: function (erro) {
                            frm.empty();
                        }
                    });
                }
            }])

            $(document).ready(function () {
                angular.bootstrap($('#tabelaAbaLancamentosFuturos'), ['lancamentosFuturosApp']);
            });
        })();

    </script>

</div>

<label for="aba-posicao-consolidada" class="hide">posi&ccedil;&atilde;o
    consolidada</label>

<div id="aba-posicao-consolidada"
     class="ni-conteudo-aba-pf clearfix" name="posicao consolidada">


    <script type="text/template" id="acao-lancamento">
        <tr class="linha-hidden">
            <td colspan="5"></td>
        </tr>
        <tr class="bg-cor-faf8f7 sem-impressao">
            <td class="no-border"></td>
            <td class="padding-direita30 padding-cima10 padding-baixo10 coluna-caixa-detalhe sem-impressao no-border"
                colspan="3">
                {{{conteudo}}}
            </td>
            <td class="no-border"></td>
        </tr>
    </script>
    <script type="text/template" id="acao-posicao-consolidada">
        <tr>
            <td class="border-bottom sem-impressao" colspan="3">
                {{{conteudo}}}
            </td>
        </tr>
    </script>

    <div class="text-access-hide" id="alertaAberturaLupaConsolidada">
        <span id="textoAlertaAberturaLupaConsolidada"></span>
    </div>


    <style>
        .posicao-consolidada-v3 {
            margin-top: 24px;
            text-transform: lowercase;
        }

        .btn-saiba_mais {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            padding: 4px 16px;
            width: 205px;
            height: 32px;
            border: 1px solid #106EB0;
            box-sizing: border-box;
            border-radius: 4px;
            background-color: transparent;
            margin-top: 16px;
        }

        .span-saiba_mais {
            position: static;
            height: 24px;
            font-family: Itau Text;
            font-size: 14px;
            line-height: 24px;
            display: flex;
            align-items: center;
            text-align: center;
            color: #106EB0;
            flex: none;
            margin: 0px 10px;
        }
    </style>

    <div id="conteudo-aba-posicao-consolidada" class="posicao-consolidada">
        <div class="grid-col9 padding-esquerda25">
            <h2 class="fonte-tamanho20 itau-display-bold txt-cor-titulo line-height20 no-padding">posi&ccedil;&atilde;o
                conta corrente</h2>
        </div>
        <div class="largura-fixa-160 txt-right margem-direita25 grid-col3 border-left-efe9e5 right no-padding-direita">
            <button aria-label="imprimir" class="icon-itaufonts_impressora ni-icone-menu-exportar" onclick="javascript:exportarArquivoPosicaoConsolidadaIm
primirPdf('imprimir');" text-tooltip="imprimir" class-tooltip="tooltip-exportacao cor-background-605751"
                    class-arrow-tooltip="border-top-color-605751" data-placement="top"
                    data-placement-arrow="center"></button>
            <button aria-label="salvar em pdf" class="icon-itaufonts_pdf ni-icone-menu-exportar" onclick="javascript:exportarArquivoPosicaoConsolidadaImpr
imirPdf('pdf');" text-tooltip="salvar em pdf" class-tooltip="tooltip-exportacao cor-background-605751"
                    class-arrow-tooltip="border-top-color-605751" data-placement="top"
                    data-placement-arrow="center"></button>
        </div>
        <div class="grid-col12 padding-esquerda25 padding-direita25">
            <hr class="no-padding hr-extrato">
        </div>

        <div id="tabelas-aba-posicao-consolidada" class="padding-esquerda25 padding-direita25"
             ng-controller="PosicaoConsolidadaController as ctrl" ng-init="ctrl.init()">
            <div id="extrato-grid-posicao-consolidada"
                 class="posicao-consolidada line-height50 clearfix table-extract-main" ng-if="!ctrl.saldoV3">
                <div id="tabelaJurosAcumulado" class="table-extract" role="table"
                     ng-if="ctrl.registrosPosicaoConsolidada">
                    <div class="table-extract__container">
                        <div class="table-extract__row table-extract__row--header" role="row">
                            <div class="table-extract__td table-extract__td--name header-lancamentos-impressao-pf"
                                 role="columnheader">descri&ccedil;&atilde;o
                            </div>
                            <div class="table-extract__td table-extract__td--currency header-lancamentos-impressao-pf"
                                 role="columnheader">valor
                            </div>
                        </div>
                        <div id="corpo-tabela-juros-acumulados-pessoa-fisica" role="rowgroup">
                            <div class="table-extract__row table-extract__row--body linha-tabela-lancamentos-impressao"
                                 role="row" ng-repeat="posicao in ctrl.posicaoConsolidada">
                                <div
                                    class="table-extract__td table-extract__td--name extrato-impressao-zebrado itau-text-bold fonte-impressao-bold"
                                    role="rowheader" ng-if="posicao.totalizador">
                                    <span>{{posicao.descricao.texto}}</span>
                                    <button ng-if="posicao.exibeLimiteDisponivel"
                                            onClick="onClickExibirLupaPosicaoConsolidada(this, 'CB')"
                                            class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao"
                                            role="button" aria-expanded="false">
                                        <span
                                            class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                                            aria-hidden="true"></span>
                                        <span class="txt-underline itau-text-xbold fonte-tamanho14"> limite dispon&iacute;vel</span>
                                    </button>
                                    <button ng-if="posicao.exibeContratacaoAplicacaoAutomatica"
                                            onClick="onClickExibirLupaPosicaoConsolidada(this, 'CD')"
                                            class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao"
                                            role="button" aria-expanded="false">
                                        <span
                                            class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                                            aria-hidden="true"></span>
                                        <span class="txt-underline itau-text-xbold fonte-tamanho14"> aplica&ccedil;&atilde;o aut.</span>
                                    </button>
                                    <button ng-if="posicao.exibeParceleConsignado"
                                            onClick="onClickExibirLupaPosicaoConsolidada(this, 'U1')"
                                            class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao"
                                            role="button" aria-expanded="false">
                                        <span
                                            class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                                            aria-hidden="true"></span>
                                        <span class="txt-underline itau-text-xbold fonte-tamanho14"> parcele</span>
                                    </button>
                                    <button ng-if="posicao.exibeParceleCrediario"
                                            onClick="onClickExibirLupaPosicaoConsolidada(this, 'U0')"
                                            class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao"
                                            role="button" aria-expanded="false">
                                        <span
                                            class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                                            aria-hidden="true"></span>
                                        <span class="txt-underline itau-text-xbold fonte-tamanho14"> parcele</span>
                                    </button>
                                    <button ng-if="posicao.exibeParceleSobMedida"
                                            onClick="onClickExibirLupaPosicaoConsolidada(this, 'U2')"
                                            class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao"
                                            role="button" aria-expanded="false">
                                        <span
                                            class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                                            aria-hidden="true"></span>
                                        <span class="txt-underline itau-text-xbold fonte-tamanho14"> parcele</span>
                                    </button>
                                </div>
                                <div class="table-extract__td table-extract__td--name extrato-impressao-zebrado"
                                     role="rowheader" ng-if="!posicao.totalizador">
                                    <span>{{posicao.descricao.texto}}</span>
                                    <button ng-if="posicao.exibeMaisLimite"
                                            onClick="onClickExibirLupaPosicaoConsolidada(this, 'CC')"
                                            class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao"
                                            role="button" aria-expanded="false">
                                        <span
                                            class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                                            aria-hidden="true"></span>
                                        <span class="txt-underline itau-display-bold fonte-tamanho14">+ limite</span>
                                    </button>
                                </div>
                                <div class="table-extract__td table-extract__td--currency extrato-impressao-zebrado"
                                     role="cell"
                                     ng-class="{'valor-positivo': posicao.positivo, 'valor-negativo' : !posicao.positivo }">
                                    <span class="cor-sinal-negativo" ng-if="!posicao.positivo">-</span>{{posicao.valor}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <p ng-if="!ctrl.registrosPosicaoConsolidada">Sistema indispon&iacute;vel, tente mais tarde.</p>
            </div>

            <div ng-if="ctrl.saldoV3">
                <div id="extrato-grid-posicao-consolidada"
                     class="posicao-consolidada posicao-consolidada-v3 line-height50 clearfix table-extract-main"
                     ng-repeat="consolidado in ctrl.mapConsolidado">
                    <div ng-if="ctrl.regrasExibicao[consolidado[0]]">
                        <h2 class="fonte-tamanho20 itau-display-bold txt-cor-titulo line-height20 no-padding">
                            {{consolidado[0]}}</h2>
                        <div id="tabelaJurosAcumulado" class="table-extract" role="table"
                             ng-if="ctrl.registrosPosicaoConsolidada">
                            <div class="table-extract__container">
                                <div class="table-extract__row table-extract__row--header" role="row">
                                    <div
                                        class="table-extract__td table-extract__td--name header-lancamentos-impressao-pf"
                                        role="columnheader">descri&ccedil;&atilde;o
                                    </div>
                                    <div
                                        class="table-extract__td table-extract__td--currency header-lancamentos-impressao-pf"
                                        role="columnheader">valor
                                    </div>
                                </div>
                                <div id="corpo-tabela-juros-acumulados-pessoa-fisica" role="rowgroup">
                                    <div
                                        class="table-extract__row table-extract__row--body linha-tabela-lancamentos-impressao"
                                        role="row" ng-repeat="posicao in consolidado[1]">
                                        <div
                                            class="table-extract__td table-extract__td--name extrato-impressao-zebrado itau-text-bold fonte-impressao-bold"
                                            role="rowheader" ng-if="posicao.totalizador">
                                            <span>{{posicao.descricao.texto}}</span>
                                            <button ng-if="posicao.exibeLimiteDisponivel"
                                                    onClick="onClickExibirLupaPosicaoConsolidada(this, 'CB')"
                                                    class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao"
                                                    role="button" aria-expanded="false">
                                                <span
                                                    class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                                                    aria-hidden="true"></span>
                                                <span class="txt-underline itau-text-xbold fonte-tamanho14"> limite dispon&iacute;vel</span>
                                            </button>
                                            <button ng-if="posicao.exibeContratacaoAplicacaoAutomatica"
                                                    onClick="onClickExibirLupaPosicaoConsolidada(this, 'CD')"
                                                    class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao"
                                                    role="button" aria-expanded="false">
                                                <span
                                                    class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                                                    aria-hidden="true"></span>
                                                <span class="txt-underline itau-text-xbold fonte-tamanho14"> aplica&ccedil;&atilde;o aut.</span>
                                            </button>
                                            <button ng-if="posicao.exibeParceleConsignado"
                                                    onClick="onClickExibirLupaPosicaoConsolidada(this, 'U1')"
                                                    class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao"
                                                    role="button" aria-expanded="false">
                                                <span
                                                    class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                                                    aria-hidden="true"></span>
                                                <span
                                                    class="txt-underline itau-text-xbold fonte-tamanho14"> parcele</span>
                                            </button>
                                            <button ng-if="posicao.exibeParceleCrediario"
                                                    onClick="onClickExibirLupaPosicaoConsolidada(this, 'U0')"
                                                    class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao"
                                                    role="button" aria-expanded="false">
                                                <span
                                                    class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                                                    aria-hidden="true"></span>
                                                <span
                                                    class="txt-underline itau-text-xbold fonte-tamanho14"> parcele</span>
                                            </button>
                                            <button ng-if="posicao.exibeParceleSobMedida"
                                                    onClick="onClickExibirLupaPosicaoConsolidada(this, 'U2')"
                                                    class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao"
                                                    role="button" aria-expanded="false">
                                                <span
                                                    class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                                                    aria-hidden="true"></span>
                                                <span
                                                    class="txt-underline itau-text-xbold fonte-tamanho14"> parcele</span>
                                            </button>
                                        </div>
                                        <div class="table-extract__td table-extract__td--name extrato-impressao-zebrado"
                                             role="rowheader" ng-if="!posicao.totalizador">
                                            <span>{{posicao.descricao.texto}}</span>
                                            <button ng-if="posicao.exibeMaisLimite"
                                                    onClick="onClickExibirLupaPosicaoConsolidada(this, 'CC')"
                                                    class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao"
                                                    role="button" aria-expanded="false">
                                                <span
                                                    class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                                                    aria-hidden="true"></span>
                                                <span
                                                    class="txt-underline itau-display-bold fonte-tamanho14">+ limite</span>
                                            </button>
                                        </div>
                                        <div
                                            class="table-extract__td table-extract__td--currency extrato-impressao-zebrado"
                                            role="cell">
                                            <span ng-if="!posicao.positivo">-</span>{{posicao.valor}}
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button ng-if="consolidado[0] == 'cheque especial' && ctrl.regrasExibicao[consolidado[0]]"
                            onClick="abrirAbaLimites()" class="btn-saiba_mais" role="button">
                        <span class="span-saiba_mais">Detalhes do Limite da Conta</span>
                    </button>
                    <p ng-if="!ctrl.registrosPosicaoConsolidada">Sistema indispon&iacute;vel, tente mais tarde.</p>
                </div>
            </div>

            <div id="extrato-container-saldo-devedor">
                <hr class="hr-extrato margem-cima40 margem-baixo40">
                <div class="grid-col12 no-padding margem-baixo30">
                    <h2 class="fonte-tamanho20 itau-display-bold txt-cor-titulo line-height20 no-padding">composi&ccedil;&atilde;o
                        de saldo devedor</h2>
                </div>
                <div id="extrato-grid-saldo-devedor" class="posicao-consolidada line-height50 margem-baixo40">
                </div>
            </div>
        </div>

    </div>
    <div class="grid-col12 padding-esquerda25 padding-direita25">
        <hr class="hr-extrato margem-cima50 margem-baixo35">

        <div id="data-hora-atualizado-em-posicao-consolidada"
             class="line-height32 itau-text-regular fonte-tamanho14 texto">
        </div>

        <div class="largura-fixa-220 grid-col3 txt-right no-padding-direita right">
            <button aria-label="imprimir" class="icon-itaufonts_impressora ni-icone-menu-exportar" onclick="javascript:exportarArquivoPosicaoConsolidadaImpr
imirPdf('imprimir');" text-tooltip="imprimir" class-tooltip="tooltip-exportacao cor-background-605751"
                    class-arrow-tooltip="border-top-color-605751" data-placement="bottom"
                    data-placement-arrow="center"></button>
            <button aria-label="salvar em pdf" class="icon-itaufonts_pdf ni-icone-menu-exportar" onclick="javascript:exportarArquivoPosicaoConsolidadaImprim
irPdf('pdf');" text-tooltip="salvar em pdf" class-tooltip="tooltip-exportacao cor-background-605751"
                    class-arrow-tooltip="border-top-color-605751" data-placement="bottom"
                    data-placement-arrow="center"></button>
        </div>
    </div>

    <div id="CB" class="hide"></div>
    <div id="CC" class="hide"></div>
    <div id="CD" class="hide"></div>
    <div id="U1" class="hide"></div>
    <div id="U0" class="hide"></div>
    <div id="U2" class="hide"></div>


    <script type="text/template" id="template-tabela-posicao-consolidada" charset="utf-8">
        <style>.descricao-lower {
            text-transform: lowercase;
        }

        .btn-saiba_mais {
            display: none;
        }</style>
        <table class="no-margem border-spacing-zero grid-col12 padding-cima15">
            <thead>
            <tr>
                <th role="columnheader"
                    class="header-tabela border-bottom-efe9e5-no-important itau-display-bold txt-cor-titulo no-padding-esquerda padding-cima10 padding-baixo15"
                    width="60%">
                    <span class="itau-display-bold">descri&ccedil;&atilde;o</span>
                </th>
                <th role="columnheader"
                    class="header-tabela border-bottom-efe9e5-no-important itau-display-bold txt-cor-titulo no-padding-esquerda padding-cima10 padding-baixo15 no-border-left txt-right"
                    width="40%">
                    <span class="itau-display-bold">valor (R$)</span>
                </th>
            </tr>
            </thead>
            <tbody id="corpoTabela-tabela-posicao-consolidada-pessoa-fisica">
            {{#dadosCorpo}}
            <tr class="border-bottom-efe9e5-no-important padding-cima10 padding-baixo10 linha-impressao texto extrato-tabela-pf">
                {{#totalizador}}
                <td class="txt-v-align-middle no-padding border-bottom-efe9e5-no-important fonte-tamanho14 itau-display-bold fonte-impressao descricao-lower">
                    <span>{{descricao.texto}}</span>
                    {{#exibeLimiteDisponivel}}
                    <button onclick="onClickExibirLupaPosicaoConsolidada(this, 'CB')"
                            class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao" role="button"
                            aria-expanded="false">
                        <span
                            class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                            aria-hidden="true"></span>
                        <span
                            class="txt-underline itau-text-xbold fonte-tamanho14"> limite dispon&Atilde;&shy;vel</span>
                    </button>
                    {{/exibeLimiteDisponivel}}
                    {{#exibeContratacaoAplicacaoAutomatica}}
                    <button onclick="onClickExibirLupaPosicaoConsolidada(this, 'CD')"
                            class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao" role="button"
                            aria-expanded="false">
                        <span
                            class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                            aria-hidden="true"></span>
                        <span class="txt-underline itau-text-xbold fonte-tamanho14"> aplica&Atilde;&sect;&Atilde;&pound;o aut.</span>
                    </button>
                    {{/exibeContratacaoAplicacaoAutomatica}}
                    {{#exibeParceleConsignado}}
                    <button onclick="onClickExibirLupaPosicaoConsolidada(this, 'U1')"
                            class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao" role="button"
                            aria-expanded="false">
                        <span
                            class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                            aria-hidden="true"></span>
                        <span class="txt-underline itau-text-xbold fonte-tamanho14"> parcele</span>
                    </button>
                    {{/exibeParceleConsignado}}
                    {{#exibeParceleCrediario}}
                    <button onclick="onClickExibirLupaPosicaoConsolidada(this, 'U0')"
                            class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao" role="button"
                            aria-expanded="false">
                        <span
                            class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                            aria-hidden="true"></span>
                        <span class="txt-underline itau-text-xbold fonte-tamanho14"> parcele</span>
                    </button>
                    {{/exibeParceleCrediario}}
                    {{#exibeParceleSobMedida}}
                    <button onclick="onClickExibirLupaPosicaoConsolidada(this, 'U2')"
                            class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao" role="button"
                            aria-expanded="false">
                        <span
                            class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                            aria-hidden="true"></span>
                        <span class="txt-underline itau-text-xbold fonte-tamanho14"> parcele</span>
                    </button>
                    {{/exibeParceleSobMedida}}
                </td>
                <td class="txt-v-align-middle no-padding border-bottom-efe9e5-no-important no-border-left fonte-tamanho14 itau-text-bold fonte-impressao-bold {{#positivo}}valor-positivo{{/positivo}}{{^positivo}}valor-negativo{{/positivo}} txt-right">
                    {{^positivo}}-{{/positivo}}{{valor}}
                </td>
                {{/totalizador}}
                {{^totalizador}}
                <td class="txt-v-align-middle no-padding border-bottom-efe9e5-no-important txt-cor-descricao itau-display-regular fonte-tamanho14 fonte-impressao descricao-lower">
                    <span>{{descricao.texto}}</span>
                    {{#exibeMaisLimite}}
                    <button onclick="onClickExibirLupaPosicaoConsolidada(this, 'CC')"
                            class="iweb-link-contraste  link-sem-estilo-button no-padding sem-impressao" role="button"
                            aria-expanded="false">
                        <span
                            class="icon-itaufonts_exclusivo_beneficios txt-v-align-middle padding-direita1 fonte-tamanho24 padding-esquerda5 line-height20"
                            aria-hidden="true"></span>
                        <span class="txt-underline itau-display-bold fonte-tamanho14">+ limite</span>
                    </button>
                    {{/exibeMaisLimite}}
                </td>
                <td class="txt-v-align-middle no-padding border-bottom-efe9e5-no-important no-border-left itau-text-bold fonte-tamanho14 {{#positivo}}
valor-positivo{{/positivo}}{{^positivo}}valor-negativo{{/positivo}} txt-right fonte-impressao-bold">{{^positivo}}<span
                    class="cor-sinal-negativo">-</span>{{/positivo}}{{valor}}
                </td>
                {{/totalizador}}
            </tr>
            {{/dadosCorpo}}
            </tbody>
        </table>
    </script>


    <script type="text/javascript" charset="utf-8">
        const sdk = window?.SDKAnalytics ?
            window.SDKAnalytics({
                gtm: 'GTM-NNRPQN6'
            }) :
            {
                track: function (event) {
                    console.log("GA4 Tracking event:", event);
                },
                setDefaultParameters: function (event) {
                    console.log("GA4 Set setDefaultParameters:", event);
                },
                setUserProperties: function (event) {
                    console.log("GA4 Set setUserProperties:", event);
                }
            };

        var botaoDropdownPosicaoConsolidada = null
        var posicaoConsolidada = null;
        var composicaoSaldo = null;
        var saldoV3 = false;
        var regrasExibicaoPosicaoConsolidada;
        var AbaPosicaoConsolidada = (function () {

            var carregar = function (todosExtratos) {
                posicaoConsolidada = todosExtratos.posicaoConsolidada.tabelaPosicaoConsolidada;
                composicaoSaldo = todosExtratos.posicaoConsolidada.composicaoSaldo;
                saldoV3 = todosExtratos.saldoV3;
                regrasExibicaoPosicaoConsolidada = todosExtratos.posicaoConsolidada.regrasExibicaoTabela;

                var registrosPosicaoConsolidada = posicaoConsolidada == null ? false : true;
                var registrosComposicaoSaldo = composicaoSaldo == null ? false : true;
                var $saldoDevedor = $('#extrato-container-saldo-devedor');
                angular.bootstrap($('#tabelas-aba-posicao-consolidada'), ['tabelaPosicaoConsolidadaApp']);

                $(document).on("click", "#btn-aba-posicao-consolidada", function () {
                    carregaDataLayer("PosicaoConsolidada", true);
                    disparaGA4AbaConsolidada();

                    if (registrosPosicaoConsolidada) {
                        processarWarnings(posicaoConsolidada);
                    }

                    if (registrosPosicaoConsolidada) {
                        processarWarningsComposicaoSaldo(posicaoConsolidada);
                    }

                    var registrosComposicaoSaldo = composicaoSaldo == null ? false : true;
                    if (registrosComposicaoSaldo) {
                        $saldoDevedor.removeClass('hide');
                        criarTabela('extrato-grid-saldo-devedor', registrosComposicaoSaldo, 'tabela-saldo-devedor-pessoa-fisica', 'Tabela contendo a composi&ccedil;&atilde;o de saldo devedor da conta corrente.', composicaoSaldo);
                    } else {
                        $saldoDevedor.addClass('hide');
                    }
                });


                if (!botaoDropdownPosicaoConsolidada) {
                    botaoDropdownPosicaoConsolidada = new novaInternet.BotaoDropdown($('#botao-opcoes-posicao-consolidada'));
                    botaoDropdownPosicaoConsolidada.carregar();
                }

                function disparaGA4AbaConsolidada() {
                    sdk.track({
                        analytics: {
                            event_name: "visualization",
                            parameters: {
                                custom_path: "/conta/consultar/extrato/timeline-idl/consolidada",
                                implementation_team: "extrato-hub-de-contas-pf:gerir-vida-financeira",
                                detail: "aba:visao-consolidada",
                            }
                        }
                    });
                }
            };

            var criarTabela = function (idContainerTabela, registros, idTabela, tituloTabela, dados) {
                var $grid = $('#' + idContainerTabela);
                var objeto = {
                    "registros": registros,
                    "idGridComponente": idTabela,
                    "tituloTabela": tituloTabela,
                    "templateLinha": "#template-tabela-posicao-consolidada",
                    "headers": [{
                        "estiloColuna": 'header-tabela border-bottom-efe9e5-no-important itau-display-bold txt-cor-titulo no-padding-esquerda padding-cima10 padding-baixo15',
                        "tamanho": "60%",
                        "nome": "descri&ccedil;&atilde;o"
                    }, {
                        "estiloColuna": 'header-tabela border-bottom-efe9e5-no-important itau-display-bold txt-cor-titulo no-padding-esquerda padding-cima10 padding-baixo15 no-border-left txt-right',
                        "tamanho": "40%",
                        "nome": "valor (R$)"
                    }],
                    dadosCorpo: dados,
                    emptyMessage: "Sistema indispon&iacute;vel, tente mais tarde."
                }

                $grid.empty();
                new novaInternet.Grid($grid, objeto).render();
                $("#corpoTabela-tabela-posicao-consolidada-pessoa-fisica tr:nth-child(odd)").attr("style", "background-color:#F1F2F4 !important");
                $('#' + idTabela).addClass('grid-col12');
                $('#' + idTabela).addClass('padding-cima40');
            }

            var exibirErro = function () {
                $("#aba-posicao-consolidada").empty().append(obterTemplateErro());
            }

            return {
                carregar: carregar,
                exibirErro: exibirErro
            };

        })();

        var groupBy = function (list, keyGetter) {
            const map = new Map();
            list.forEach((item) => {
                const key = keyGetter(item);
                const collection = map.get(key);
                if (!collection) {
                    map.set(key, [item]);
                } else {
                    collection.push(item);
                }
            });
            return map;
        }

        var dependencies = ['ngSanitize'];
        var tabelaPosicaoConsolidadaApp = angular.module('tabelaPosicaoConsolidadaApp', dependencies);

        tabelaPosicaoConsolidadaApp.controller('PosicaoConsolidadaController', ['$scope', function ($scope) {

            var self = this;
            self.posicaoConsolidada = window.posicaoConsolidada;
            self.registrosPosicaoConsolidada = window.posicaoConsolidada == null ? false : true;

            self.saldoV3 = saldoV3;
            self.regrasExibicao = regrasExibicaoPosicaoConsolidada;
            self.mapConsolidado = Array.from(groupBy(self.posicaoConsolidada, consolidada => consolidada.tabela));

            let tabelaAux = [];

            self.mapConsolidado.forEach(tabela => {
                if (tabela[0] == 'saldos') {
                    tabelaAux[tabelaAux.length] = tabela;
                }
            })

            self.mapConsolidado.forEach(tabela => {
                if (tabela[0] == 'pendentes') {
                    tabelaAux[tabelaAux.length] = tabela;
                }
            })

            self.mapConsolidado.forEach(tabela => {
                if (tabela[0] !== null && tabela[0].includes("valores")) {
                    tabelaAux[tabelaAux.length] = tabela;
                }
            })

            self.mapConsolidado.forEach(tabela => {
                if (tabela[0] == 'cheque especial') {
                    tabelaAux[tabelaAux.length] = tabela;
                }
            })

            self.mapConsolidado.forEach(tabela => {
                if (tabela[0] !== null && tabela[0].includes("investimentos com resgate")) {
                    tabelaAux[tabelaAux.length] = tabela;
                }
            })

            self.mapConsolidado = tabelaAux;

            self.init = function () {
                window.inserirDataHoraRodape('data-hora-atualizado-em-posicao-consolidada');
            }

        }]);

        function onClickExibirLupaPosicaoConsolidada(elemento, idWarning) {
            var idTemplate = 'acao-posicao-consolidada';
            var parametrosLupa = {};
            parametrosLupa.conteudo = document.getElementById(idWarning).innerHTML;
            if (parametrosLupa.conteudo.length > 0) {
                controlaNovidadeConsolidada(elemento, parametrosLupa, idTemplate);
            }
        }

        function controlaNovidadeConsolidada(elemento, parametrosLupa, idTemplate, exibirDetalhes) {
            var expandido = elemento.getAttribute('aria-expanded');
            limparAlertaAberturaLupaConsolidada();

            if (expandido === "false") {
                $(elemento).attr('aria-expanded', 'true');
                $(elemento).closest('tr').removeClass('border-bottom-efe9e5-no-important').addClass('border-isca');
                $(elemento).closest('td').removeClass('border-bottom-efe9e5-no-important').addClass('border-isca');
                $(elemento).closest('td').next().removeClass('border-bottom-efe9e5-no-important').addClass('border-isca');

                if (exibirDetalhes === undefined || exibirDetalhes === true)
                    exibeSecaoConteudoLupa($(elemento).closest('tr'), parametrosLupa, '#' + idTemplate);

                setTimeout(function () {
                    criarAlertaAberturaLupaConsolidada();
                }, 1500);
            } else {
                $(elemento).closest('tr').next().remove();
                $(elemento).attr('aria-expanded', 'false');
                $(elemento).closest('tr').removeClass('border-isca').addClass('border-bottom-efe9e5-no-important');
                $(elemento).closest('td').removeClass('border-isca').addClass('border-bottom-efe9e5-no-important');
                $(elemento).closest('td').next().removeClass('border-isca').addClass('border-bottom-efe9e5-no-important');
            }
        }

        function exibeSecaoConteudoLupa(elemento, parametrosLupa, idTemplate) {
            var template = $(idTemplate).html();
            var output = Mustache.render(template, parametrosLupa);
            $(elemento).after(output);
        }

        function criarAlertaAberturaLupaConsolidada() {
            var textoAberturaLupa = document
                .getElementById('textoAlertaAberturaLupaConsolidada');

            document.getElementById('textoAlertaAberturaLupaConsolidada').setAttribute("role",
                "alert");
            document.getElementById('alertaAberturaLupaConsolidada').style.clip = 'auto';
            alertText = document
                .createTextNode("informa\u00E7\u00E3o exibida na pr\u00F3xima linha da tabela");
            textoAberturaLupa.appendChild(alertText);
            textoAberturaLupa.style.display = 'none';
            textoAberturaLupa.style.display = 'inline';
        }

        function processarWarnings(lista) {
            var divLisAdicional = $("#CC").is(':empty');
            var divLimiteDisponivel = $("#CB").is(':empty');
            var divAplicacaoAutomatica = $("#CD").is(':empty');

            if (!divLisAdicional || !divLimiteDisponivel || !divAplicacaoAutomatica) {

                for (var posicao = 0; posicao < lista.length; posicao++) {
                    var item = lista[posicao];

                    if (!divLisAdicional && item.limiteAdicional) {
                        item.exibeMaisLimite = true;
                    }

                    if (!divLimiteDisponivel && item.saldoDisponivelEDevedorValor) {
                        item.exibeLimiteDisponivel = true;
                    }

                    if (!divAplicacaoAutomatica && item.saldoDisponivelEDevedorValor) {
                        item.exibeContratacaoAplicacaoAutomatica = true;
                    }
                }
            }
        }

        function processarWarningsComposicaoSaldo(lista) {
            var divParceleConsignado = $("#U1").is(':empty');
            var divParceleCrediario = $("#U0").is(':empty');
            var divParceleSobMedida = $("#U2").is(':empty');

            if (!divParceleConsignado || !divParceleCrediario || !divParceleSobMedida) {

                for (var posicao = 0; posicao < lista.length; posicao++) {
                    var item = lista[posicao];

                    if (!divParceleConsignado && item.parceleConsignadoCrediario) {
                        item.exibeParceleConsignado = true;
                    }

                    if (!divParceleCrediario && item.parceleConsignadoCrediario) {
                        item.exibeParceleCrediario = true;
                    }

                    if (!divParceleSobMedida && item.parceleSobMedida) {
                        item.exibeParceleSobMedida = true;
                    }
                }
            }
        }

        function limparAlertaAberturaLupaConsolidada() {
            var textoAberturaLupa = document
                .getElementById('textoAlertaAberturaLupaConsolidada');
            textoAberturaLupa.innerText = '';
            textoAberturaLupa.setAttribute('role', '');
            document.getElementById('alertaAberturaLupaConsolidada').style.clip = 'auto';
            document.getElementById('alertaAberturaLupaConsolidada').removeAttribute('role');
        }

        function exportarArquivoPosicaoConsolidadaImprimirPdf(tipoExportacao) {
            $('#mensagemErroPdf').remove();
            var stylePdf = "<style> .titulo{font-size: 15px!important; width: 80% !important;} .data{width: 20% !important;}</style>";

            var conteudoHTMLAbaLancamentos = $('#tabelas-aba-posicao-consolidada').clone();

            var template = $("#template-tabela-posicao-consolidada").html();

            if (saldoV3) {
                var tabelaSaldos = gerarCorpoTabelaPosicaoConsolidada("saldos", template);
                var tabelaPendentes = gerarCorpoTabelaPosicaoConsolidada("pendentes", template);
                var tabelaValoresEmAnaliseParaLiberacao = gerarCorpoTabelaPosicaoConsolidada("valores em an&aacute;lise para libera&ccedil;&atilde;o", template);
                var tabelaChequeEspecial = gerarCorpoTabelaPosicaoConsolidada("cheque especial", template);
                var tabelaPosicaoInvestimentoResgateAutomatico = gerarCorpoTabelaPosicaoConsolidada("posi&ccedil;&atilde;o de investimentos com resgate autom&aacute;tico", template);

                var conteudoFinal = tabelaSaldos + tabelaPendentes + tabelaValoresEmAnaliseParaLiberacao + tabelaChequeEspecial + tabelaPosicaoInvestimentoResgateAutomatico;
                $(conteudoHTMLAbaLancamentos).html(conteudoFinal);
            } else {
                var corpoTabela = Mustache.render(template, {dadosCorpo: posicaoConsolidada});
                $(conteudoHTMLAbaLancamentos).find("#tabelaJurosAcumulado").html(corpoTabela);
            }

            $(conteudoHTMLAbaLancamentos).find("#corpoTabela-tabela-posicao-consolidada-pessoa-fisica tr:nth-child(odd)").attr("style", "background-color:#F1F2F4 !important");
            conteudoHTMLAbaLancamentos = $(conteudoHTMLAbaLancamentos).find('.remover-da-impressao').remove().end().html();

            if (tipoExportacao === 'pdf') {
                let dataAtual = new Date().toLocaleString("pt-BR").split(" ");
                let horaMinuto = dataAtual[1].split(":");
                let tituloArquivoPDF = "extrato-posicao-consolidada_" + dataAtual[0].replaceAll("/", "_") + "_" + horaMinuto[0] + "-" + horaMinuto[1];

                $("#formImpressaoPDF input[name='nomeArquivo']").val(tituloArquivoPDF);
                salvarEmPDF('Extrato conta corrente / Posi&ccedil;&atilde;o Consolidada', null, 'formImpressaoPDF', conteudoHTMLAbaLancamentos + stylePdf, filtroLancamentos.filtroSelecionado().dataHoraConsulta);
            } else {
                imprimirTemplateHTML('Extrato conta corrente / Posi&ccedil;&atilde;o Consolidada', null, 'EdpC5qFN3dY/IGJnV4bFyDao4NpbnZTxDjKhGZ/lDmM=;', conteudoHTMLAbaLancamentos, filtroLancamentos.filtroSelecionado().dataHoraConsulta);
            }

        }

        function gerarCorpoTabelaPosicaoConsolidada(tabela, template) {
            var conteudoTabela = "";
            let listaItens = posicaoConsolidada.filter(item => (item.tabela === $("<div/>").html(tabela).text()));

            if (listaItens.length > 0) {
                conteudoTabela = Mustache.render(template, {dadosCorpo: listaItens});
                return "<h2 style='font-family: itau-display-bold, arial; font-size: 16px; margin: 10px 0px'>" + tabela + "</h2>" + conteudoTabela;
            }

            return conteudoTabela;
        }

        function abrirAbaLimites() {
            $("#btn-aba-limites").click();
            feedbackAcessibilidade("aba limites selecionada")
        }

    </script>

</div>

<label for="aba-limites" class="hide">limites</label>

<div id="aba-limites" class="ni-conteudo-aba-pf clearfix"
     name="limites">


    <style type="text/css">
        @media screen {
            .hr-extrato {
                margin-bottom: 20px;
            }

            .margem-esquerda25 {
                margin-bottom: 25px;
            }

            .margem-cima15 {
                margin-top: 15px !important;
            }

            .detalhes-grafico {
                font-fam
                ily: ItauText-Bold;
            }

            .square-red {
                width: 6px;
                height: 6px;
                background: #B71C1C;
                float: left;
                margin: 8px 5px 0 0;
            }

            .square-grey {
                width: 6px;
                height: 6px;
                background: #d3d3d3;
                float: left;
                margin: 8px 5px 0 0;
            }

            .square-purple {
                width: 6px;
                height: 6px;
                background: #781B8E;
                float: left;
                margin: 8px 10px 0 0;
            }

            .font-bold {
                font-weight: bold;
            }

            .titulo-utilizacao-lis {
                margin-bottom: 20px;
                display: block;
                color: #231D19;
            }

            .label-lis-esquerda {
                float: left;
            }

            .label-lis-direita {
                float: right;
            }

            .grafico-cheque-especial {
                display: block;
                margin-top: 20px;
            }

            .usage-bar {
                width: 100% !important;
                margin: 1 5px 0px 8px 0px;
                height: 4px;
            }

            #usage-bar-red progress::-webkit-progress-bar {
                background-color: #B71C1C;
                width: 100%;
            }

            #usage-bar-red progress::-web
            kit-progress-value {
                background-color: #B71C1C !important;
            }

            #usage-bar-red progress {
                background-color: #B71C1C;
            }

            #usage-bar-red progress::-moz-progre
            ss-bar {
                background-color: #B71C1C !important;
            }

            #usage-bar-red progress {
                color: #B71C1C;
            }

            #usage-bar-purple progress::-webkit-progress-bar {
                backgroun
                d-color: #d3d3d3;
                width: 100%;
            }

            #usage-bar-purple progress::-webkit-progress-value {
                background-color: #781B8E;
            }

            #usage-bar-purple progress {
                backgrou
                nd-color: #d3d3d3;
            }

            #usage-bar-purple progress::-moz-progress-bar {
                background-color: #781B8E !important;
            }

            #usage-bar-purple progress {
                color: #781B8E;
            }

            #color-saldo {
                color: #781B8E;
                font-family: ItauText-Bold;
            }

            .btnMaisMenos {
                width: 275px !important;
                height: 32px !important;
                border-radius: 4px ! impor tant;
                border: 1px solid #106EB0 !important;
                font-family: ItauText-Bold !important;
                font-size: 14px !important;
                margin-left: 25px;
            }

            .limites-rodape {
                f
                ont-family: ItauText-Regular;
                padding: 0 25px;
            }

            .itau-tooltip__bubble {
                background-color: #106EB0;
                color: #FFF;
            }

            [itau-tooltip-position="right"] + span .itau-tooltip__bubble:after {
                border-right-color: #106EB0 !important;
            }

            .auto-width {
                width: auto;
            }

            .tableFont {
                font-family: itau-display-regular, Arial !important;
                font-weight: normal !important;
            }

            .tabela-zebra tbody tr {
                border-bottom: 1px solid #EFE9E5;
                border-top: none;
            }

            table thead {
                text-transform: none;
            }

            #impressao-aba-limite {
                display: none;
            }
        }

        @media print {
            #formImpressaoPDF {
                display: block;
            }

            .grafico-cheque-especial, #btn-aba-lancamentos, #btn-aba-lancamentos-futuros, #btn-aba-posicao-consolidada, #btn-aba-limites, #container-saldo-resumido, .footer-full,
            #periodo-vigencia, .box-imprimir-pdf, .breadcrumbs, .menu, .cpv-feedback-likert, .modulo.box-info.box-info-alerta.js-exception, .itau-button.itau-button--outline,
            #rodape-lancamento, #irParaConteudo, #irParaMenu, .itau-button, .bkl.clearfix, #vcTbmPode, #modalCoachmark, #frmConvivencia, #formErrorUniversal,
            .hide, .tabela-aba-limites, #aviso-rodape-card, .chat, .ui-draggable, #AVIContainer, .likert-extrato, #banner_aviso, #B9, #div-gpt-ad-1614352700414-0, .borda-cabecalho-varejo {
                display: none !important;
            }


            #tabela-juros-acumulados-pessoa-fisica tbody tr:nth-child(odd) td, #tabela-juros-acumulados-pessoa-fisica tbody tr:nth-child(odd) th {
                background-color: #efe9e5;
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
            }

            .tabela-juros-acumulados-pessoa-fisica {
                color: #464646;
                font-family: Arial, sans-serif;
            }

            .titulo-limite {
                font-family: itau-text-regular, arial;
                font-size: 16px;
                font-weight: bold;
                width: 100%;
                float: left;
            }

            #detalhe-historico {
                font-family: itau-text-regular, arial;
                font-size: 14px;
                text-align: justify;
            }

            .observacao {
                font-family: itau-text-regular, arial !important;
                font-size: 11px;
                text-align: justify;
                line-height: 14px;
                margin-bottom: 0px;
            }

            .footer-template {
                font-family: lucida-grande;
                font-size: 7.5px;
                color: #605751;
                line-height: 9px;
                width: 100%;
                padding-top: 3px;
                display: block;
            }

            .header-template {
                font-family: itau-text-regular, arial;
                font-size: 9px;
                color: #312d2b;
                line-height: 11px;
                padding-top: 16px;
                padding-bottom: 20px;
                border-bottom: 2px solid #9e9e9e;
            }

            .header-template .dados-cliente {
                font-family: itau-text-regular, arial;
                font-size: 9px;
                color: #312d2b;
                line-height: 11px;
            }

            .header-template .agencia {
                width: 75px;
                float: left;
                font-family: itau-text-regular, arial;
                font-size: 8.25px;
                color: #605751;
                line-height: 11px;
            }

            .header-template .conta {
                width: 75px;
                float: left;
                font-family: itau-display-regular;
                font-size: 8.25px;
                color: #605751;
                line-height: 11px;
            }

            .header-template .nome {
                width: 50%;
                float: left;
            }

            .header-template .data {
                font-family: itau-text-regular, arial;
                font-size: 7.51px;
                color: #757575;
                line-height: 20px;
                float: right;
                padding-top: 26px;
                width: 150px;
                text-align: right;
            }

            .periodo-vigencia-contrato {
                font-family: itau-text-regular, arial;
                font-weight: normal;
                font-size: 12px;
                margin-left: 35%;
            }

            #tabelaChequeEspecial {
                width: 100% !important;
            }

            .limites-data-atualizacao {
                border-bottom: 1px solid #efe9e5;
            }

            tbody > tr > :nth-child(1) {
                width: 500px;
                font-size: 14px;
                font-family: itau-text-regular, arial;
            }

            tbody > tr > :nth-child(2) {
                width: 500px;
                text-align: right;
                font-size: 14px;
                font-family: itau-text-regular, arial;
            }

            .txt-right {
                float: right;
            }

            .borda-cabecalho-varejo {
                background: #ec7000;
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
                height: 6px;
            }

            .clearfix:before, .clearfix:after {
                content: " ";
                display: table;
            }

            .separador {
                display: table;
            }

            .titulo {
                font-family: itau-text-regular, arial;
                font-size: 16px;
                font-weight: bold;
                color: #252220;
                line-height: 20px;
                float: left;
                margin-bottom: 25px;
                margin-top: 10px;
                width: 50%;
                padding-top: 16px;
            }

        }

    </style>
    <div id="tabelaAbaLimites" ng-controller="tabelaJurosAcumuladoAppController as ctrl" ng-init="ctrl.init()">
        <div class="tabela-aba-limites table-extract-main no-padding">
            <!-- cabe&ccedil;alho -->
            <div class="grid-col12 padding-esquerda25 padding-direita25" ng-if="!isObjectEmpty(ctrl.obj)">
                <div class="limites-data-atualizacao grid-col9 itau-display-regular padding-esquerda5 fonte-tamanho14"
                     id="extrato-limites-data-hora-atualizacao" ng-if="ctrl.obj.tituloAba">
                    <div class="left">
                        <h2 id="titulo-tabela-cheque-especial"
                            class="tabela-limites-titulo itau-display-xbold fonte-tamanho20 margem-cima10 line-height20"
                            ng-bind-html="ctrl.obj.tituloAba"></h2>
                    </div>
                    <div
                        class="periodo-vigencia txt-right right padding-baixo15 margem-cima10 line-height20 itau-text-regular">
                        <p ng-bind-html="ctrl.obj.descricaoVigencia"></p>
                    </div>
                </div>
                <div
                    class="right largura-fixa-160 margem-direita-negativa-8 grid-col3 txt-right no-padding-direita border-left-efe9e5 right box-imprimir-pdf">
                    <button aria-label="imprimir" class="icon-itaufonts_impressora ni-icone-menu-exportar" ng-click="ctrl.exportarArquivoLimitesImprimirPdf('imp
rimir');" text-tooltip="imprimir" class-tooltip="tooltip-exportacao cor-background-605751"
                            class-arrow-tooltip="border-top-color-605751" data-placement="top"
                            data-placement-arrow="center"></button>
                    <button aria-label="salvar em pdf" class="icon-itaufonts_pdf ni-icone-menu-exportar" ng-click="ctrl.exportarArquivoLimitesImprimirPdf('pdf')
;" text-tooltip="salvar em pdf" class-tooltip="tooltip-exportacao cor-background-605751"
                            class-arrow-tooltip="border-top-color-605751" data-placement="top"
                            data-placement-arrow="center"></button>
                </div>
                <hr class="no-padding grid-col12 hr-extrato"/>
            </div>

            <!-- grafico de utilizacao -->
            <div class="grid-col12 padding-esquerda25 padding-direita25 margem-baixo30 grafico-cheque-especial"
                 ng-if="ctrl.chequeEspecial.length > 0">
                <h2 class="titulo-utilizacao-lis itau-display-xbold">Limite da Conta</h2>
                <div class="detalhes-grafico fonte-tamanho16">
                    <div class="label-lis-esquerda" aria-hidden="true"><p>Limite da Conta utilizado</p></div>
                    <div class="label-lis-direita" aria-hidden="true"><p>Limite da Conta dispon&iacute;vel</p></div>
                    <p class="element--accessHide">Limite da Conta utilizado {{ctrl.obj.labelLisUtilizado}}</p>
                    <p class="element--accessHide">Limite da Conta dispon&iacute;vel {{ctrl.obj.labelLisDisponivel}}</p>
                </div>
                <div id="usage-bar-purple" ng-if="!ctrl.obj.ultrapassouLimite" aria-hidden="true">
                    <progress class="usage-bar" ng-attr-value="{{ctrl.obj.valorLisUtilizadoTotal}}"
                              max="{{ctrl.obj.valorLisContratadoTotal}}"></progress>
                </div>
                <div id="usage-bar-red" ng-if="ctrl.obj.ultrapassouLimite" aria-hidden="true">
                    <progress class="usage-bar" ng-attr-value="{{ctrl.obj.valorLisUtilizadoTotal}}"
                              max="{{ctrl.obj.valorLisContratadoTotal}}"></progress>
                </div>
                <div class="detalhes-grafico fonte-tamanho16" aria-hidden="true">
                    <div ng-if="!ctrl.obj.ultrapassouLimite" class="label-lis-esquerda font-bold"><span
                        class="square-purple"></span>{{ctrl.obj.labelLisUtilizado}}
                    </div>
                    <div ng-if="ctrl.obj.ultrapassouLimite" class="label-lis-esquerda font-bold"><span
                        class="square-red"></span>{{ctrl.obj.labelLisUtilizado}}
                    </div>
                    <div class="label-lis-direita font-bold"><span class="square-grey"></span>{{ctrl.obj.labelLisDisponivel}}
                    </div>
                </div>
            </div>

            <div ng-if="ctrl.obj.temDiasConcedidosSemJuros"
                 style="margin-left: 25px; margin-bottom: 25px; Width: 880px; height: 24px; Blend: Pass through; background: #E5F2ED; float: left;">
                <p style="height: 24px; font-family: Itau Text; font-size: 16px; line-height: 19px; margin-left: 20px; color: #000000;">
                    voc&ecirc; tem <strong>{{ctrl.obj.qtdDiasConcedidosSemJuros}} dias sem juros</strong> no Limite da
                    Conta.</p>
            </div>

            <!-- tabela cheque especial -->
            <div id="tabelaChequeEspecial" ng-if="ctrl.chequeEspecial.length > 0">
                <table class="tabela-zebra no-border fonte-tamanho14 tableFont">
                    <thead>
                    <tr>
                        <th class="txt-left tableFont padding-esquerda25" scope="col">detalhamento</th>
                        <th class="txt-right tableFont padding-direita25" scope="col">valor</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="lancamentoCheque in ctrl.chequeEspecial">
                        <th class="txt-left padding-esquerda25 tableFont" scope="row">
                            {{lancamentoCheque.descricao.texto}}
                            <span class="itau-tooltip__container" style="float:none"
                                  ng-if="lancamentoCheque.descricao.texto === 'LIMITE DA CONTA ADICIONAL CONTRATADO' || lancamentoCheque.descricao.texto === 'LIMITE DA CONTA ADICIONAL CONTRATADO'">
<button class="icon-itaufonts_informacao" aria-expanded="false" aria-label="mais informa&ccedil;&otilde;es"
        itau-tooltip-position="right"
        itau-tooltip="A utiliza&ccedil;&atilde;o do Limite da Conta adicional segue as mesmas regras do Limite da Conta "></button>
<span role="status"></span>
</span>
                        </th>
                        <td class="txt-right padding-direita25 tableFont">{{lancamentoCheque.valor}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- tabela juros acumulados Nova-->
            <div id="tabelaJurosAcumulados" class="table-extract"
                 ng-if="ctrl.jurosAcumulados.length > 0 && ctrl.obj.pilotoLimites">
                <h2 class="titulo-utilizacao-lis padding-esquerda25 itau-display-xbold"
                    ng-bind-html="ctrl.obj.tituloJurosAcumulados" style="margin-bottom: 0px;"></h2>
                <p class="ItauText-Regular fonte-tamanho14 line-height24 margem-baixo10"
                   style="margin-left: 25px; !important;">
                    O valor calculado pode sofrer altera&ccedil;&otilde;es caso volte a utilizar.</p>
                <table class="tabela-zebra no-border fonte-tamanho14 tableFont">
                    <thead>
                    <tr>
                        <th class="txt-left tableFont padding-esquerda25 header-lancamentos-impressao-pf" scope="col">
                            descri&ccedil;&atilde;o
                        </th>
                        <th class="txt-right tableFont padding-direita25 header-lancamentos-impressao-pf" scope="col">
                            valor (R$)
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="linha-tabela-lancamentos-impressao" ng-repeat="lancamento in ctrl.jurosAcumulados">
                        <th class="txt-left padding-esquerda25 tableFont extrato-impressao-zebrado" scope="row">
                            {{lancamento.descricao.texto}}
                            <span class="itau-tooltip__container" style="float:none"
                                  ng-if="lancamento.descricao.texto === 'Juros do Limite da Conta'">
<button class="icon-itaufonts_informacao" aria-expanded="false" aria-label="mais informa&ccedil;&otilde;es"
        itau-tooltip-position="right" itau-tooltip="{{lancamento.descricao.toolTip}}"></button>
<span role="status"></span>
</span>

                            <span class="itau-tooltip__container" style="float:none"
                                  ng-if="lancamento.descricao.texto === 'JUROS DO EXCESSO'">
<button class="icon-itaufonts_informacao" aria-expanded="false" aria-label="mais informa&ccedil;&otilde;es"
        itau-tooltip-position="right" itau-tooltip="{{lancamento.descricao.toolTip}}"></button>
<span role="status"></span>
</span>

                            <span class="itau-tooltip__container" style="float:none"
                                  ng-if="lancamento.descricao.texto === 'IOF'">
<button class="icon-itaufonts_informacao" aria-expanded="false" aria-label="mais informa&ccedil;&otilde;es"
        itau-tooltip-position="right" itau-tooltip="{{lancamento.descricao.toolTip}}"></button>
<span role="status"></span>
</span>
                        </th>
                        <td class="txt-right padding-direita25 tableFont extrato-impressao-zebrado">
                            {{lancamento.valor}}
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- tabela juros acumulados Antiga-->
            <div id="tabelaJurosAcumulados" class="table-extract"
                 ng-if="ctrl.jurosAcumulados.length > 0 && !ctrl.obj.pilotoLimites">
                <h2 class="titulo-utilizacao-lis padding-esquerda25 itau-display-xbold"
                    ng-bind-html="ctrl.obj.tituloJurosAcumulados"></h2>

                <table class="tabela-zebra no-border fonte-tamanho14 tableFont">
                    <thead>
                    <tr>
                        <th class="txt-left tableFont padding-esquerda25 header-lancamentos-impressao-pf" scope="col">
                            detalhamento
                        </th>
                        <th class="txt-right tableFont padding-direita25 header-lancamentos-impressao-pf" scope="col">
                            valor
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="linha-tabela-lancamentos-impressao" ng-repeat="lancamento in ctrl.jurosAcumulados">
                        <th class="txt-left padding-esquerda25 tableFont extrato-impressao-zebrado" scope="row">
                            {{lancamento.descricao.texto}}
                        </th>
                        <td class="txt-right padding-direita25 tableFont extrato-impressao-zebrado">
                            {{lancamento.valor}}
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- tabela historico de utiliza&ccedil;&atilde;o do cheque especial-->
            <div id="tabelaUtilizacaoDiaria" class="table-extract">
                <div class="titulo-historico padding-esquerda25 padding-direita25"
                     ng-if="ctrl.chequeEspecial.length > 0 && ctrl.historicoChequeEspecial.length > 0">
                    <h2 ng-bind-html="ctrl.obj.tituloHistoricoUtilizacao" class="no-margem-baixo"></h2>
                    <p class="ItauText-Regular fonte-tamanho14 line-height24 margem-baixo10">Valores di&aacute;rios
                        referentes &agrave; utiliza&ccedil;&atilde;o
                        do seu Limite da Conta, apurados ao final de cada dia de utiliza&ccedil;&atilde;o, considerando
                        o per&iacute;odo de vig&ecirc;ncia do seu contrato. Obs: a utiliza&ccedil;&atilde;o no final de
                        semana e feriado ser&aacute; contabilizada no pr&oacute;ximo dia &uacute;til.</p>
                </div>
                <div class="padding-esquerda25 padding-direita25 margem-cima15 margem-baixo30"
                     ng-if="ctrl.chequeEspecial.length > 0 && !ctrl.historicoChequeEspecial.length > 0">
                    <h2 ng-bind-html="ctrl.obj.tituloHistoricoUtilizacao" class="no-margem-baixo"></h2>
                    <p class="ItauText-Regular fonte-tamanho14 line-height24 margem-baixo10"
                       style="margin-left: 0px !important;">voc&ecirc; ainda n&atilde;o utilizou o limite do seu Limite
                        da Conta neste per&iacute;odo.</p>
                </div>
                <table class="tabela-zebra no-border fonte-tamanho14 tableFont"
                       ng-if="ctrl.historicoChequeEspecial.length > 0">
                    <thead>
                    <tr>
                        <th class="txt-left tableFont padding-esquerda25 header-lancamentos-impressao-pf" scope="col">
                            data
                        </th>
                        <th class="txt-right tableFont padding-direita25 header-lancamentos-impressao-pf" scope="col">
                            saldo devedor(R$)
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="lancamentoHistoricoChequeEspecial in ctrl.historicoChequeEspecial |limitTo:limit">
                        <th class="txt-left padding-esquerda25 tableFont extrato-impressao-zebrado" scope="row"
                            ng-bind-html="lancamentoHistoricoChequeEspecial.descricao.texto"></th>
                        <td class="txt-right padding-direita25 tableFont extrato-impressao-zebrado" id="color-saldo"
                            ng-bind-html="lancamentoHistoricoChequeEspecial.valor"></td>
                    </tr>
                    </tbody>
                </table>
                <button class="itau-button itau-button--outline margem-cima10 no-padding btnMaisMenos"
                        ng-if="ctrl.historicoChequeEspecial.length > 5" ng-click="mostrarMaisMenos()">{{text}}
                </button>
            </div>

            <!-- tabela juros e encargos-->
            <div id="tabelaJurosEncargos" class="table-extract" ng-if="ctrl.jurosEncargos.length > 0">
                <h2 class="titulo-utilizacao-lis padding-esquerda25 itau-display-xbold">informa&ccedil;&otilde;es
                    adicionais do Limite da Conta</h2>

                <table class="tabela-zebra no-border fonte-tamanho14 tableFont">
                    <thead>
                    <tr>
                        <th class="txt-left tableFont padding-esquerda25 header-lancamentos-impressao-pf" scope="col">
                            detalhamento
                        </th>
                        <th class="txt-right tableFont padding-direita25 header-lancamentos-impressao-pf" scope="col">
                            valor
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="linha-tabela-lancamentos-impressao" ng-repeat="lancamento in ctrl.jurosEncargos">
                        <th class="txt-left padding-esquerda25 tableFont extrato-impressao-zebrado" scope="row">
                            {{lancamento.descricao.texto}}
                            <span class="itau-tooltip__container" style="float:none"
                                  ng-if="lancamento.descricao.texto === 'TAXA NOMINAL MENSAL'">
<button class="icon-itaufonts_informacao" aria-expanded="false" aria-label="mais informa&ccedil;&otilde;es"
        itau-tooltip-position="right" itau-tooltip="Taxa de juros do contrato, renovada mensalmente"></button>
<span role="status"></span>
</span>
                            <span class="itau-tooltip__container" style="float:none"
                                  ng-if="lancamento.descricao.texto === 'TAXA EFETIVA MENSAL'">
<button class="icon-itaufonts_informacao" aria-expanded="false" aria-label="mais informa&ccedil;&otilde;es"
        itau-tooltip-position="right"
        itau-tooltip="Taxa de juros cobrada considerando o uso em todo per&iacute;odo vigente do contrato"></button>
<span role="status"></span>
</span>
                        </th>
                        <td class="txt-right padding-direita25 tableFont extrato-impressao-zebrado">
                            {{lancamento.valor}}
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div
                class="margem-cima100 margem-baixo100 txt-v-align-middle txt-center txt-cor-mensagem-resultado-vazio itau-display-light fonte-tamanho22 grid-12 line-height20"
                ng-if="ctrl.jurosEncargos.length == 0">
                <span class="mensagem-erro-lancamentos-futuro" ng-bind-html="ctrl.mensagem"></span>
            </div>

            <!-- rodap&eacute; -->
            <div id="template-rodape" class="limites-rodape" ng-if="!isObjectEmpty(ctrl.obj)">
                <div class="limites sem-impressao fonte-tamanho14">
                    <p>
                        <span class="limites-rodape__texto">
&bull; O per&iacute;odo de apura&ccedil;&atilde;o de juros e IOF considera o per&iacute;odo de utiliza&ccedil;&atilde;o do Limite da Conta e Limite da Conta adicional, dentro da vig&ecirc;ncia do contrato.
</span>
                    </p>
                    <p>
                        <span class="limites-rodape__texto">
&bull; O Limite da Conta &eacute; um cr&eacute;dito para uso tempor&aacute;rio e emergencial e sua utiliza&ccedil;&atilde;o est&aacute; su
jeita a cobran&ccedil;a de juros e IOF. Se voc&ecirc; precisa de cr&eacute;dito por um per&iacute;odo maior, consulte as op&ccedil;&otilde;es em nossos canais.
</span>
                    </p>
                    <p class="itau-display-regular limites-aviso"
                       style="display: block; line-height: 21px; margin-top: 10px;" ng-if="ctrl.obj.flagTaxaAlterada">*A
                        taxa m&aacute;xima do Limite da Conta &eacute; de 8% a.m. para valores utilizados a partir de
                        06/01/2020.</p>
                </div>
                <div class="line-height32 itau-text-regular fonte-tamanho14 grid-col12 no-padding sem-impressao">
                    <hr ng-if="ctrl.obj.flagTaxaAlterada" class="hr-extrato margem-cima15 margem-baixo15">
                    <hr ng-if="!ctrl.obj.flagTaxaAlterada" class="hr-extrato margem-cima50 margem-baixo35">

                    <div id="data-hora-atualizado-em-limites" class="limites-rodape__consulta">
                        <span>atualizado em </span>
                        <span class="limites-rodape__consulta--bold"
                              ng-bind-html="ctrl.dataHoraAtualizacao.dataConsulta"></span>
                        <span>, &agrave;s</span>
                        <span class="limites-rodape__consulta--bold"
                              ng-bind-html="ctrl.dataHoraAtualizacao.horaConsulta"></span>
                    </div>

                    <div class="largura-fixa-160 grid-col3 txt-right no-padding-direita border-left-efe9e5 right">
                        <button aria-label="imprimir" class="icon-itaufonts_impressora ni-icone-menu-exportar"
                                ng-click="ctrl.exportarArquivoLimitesImprimirPdf('i
mprimir');" text-tooltip="imprimir" class-tooltip="tooltip-exportacao cor-background-605751"
                                class-arrow-tooltip="border-top-color-605751" data-placement="bottom"
                                data-placement-arrow="center"></button>
                        <button aria-label="salvar em pdf" class="icon-itaufonts_pdf ni-icone-menu-exportar" ng-click="ctrl.exportarArquivoLimitesImprimirPdf('pdf
');" text-tooltip="salvar em pdf" class-tooltip="tooltip-exportacao cor-background-605751"
                                class-arrow-tooltip="border-top-color-605751" data-placement="bottom"
                                data-placement-arrow="center"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="impressao-aba-limite">
    </div>

    <script type="text/template" id="template-tabela-juros-acumulado">
        <style>  #corpo-tabela-juros-acumulados tr:nth-child(odd) {
            background-color: #F1F2F4 !important
        }

        .titulo-cheque-especial {
            text-align: left;
            font-famil
            y: itau-text-regular, arial;
            font-size: 20px;
            font-weight: bold;
        }

        .periodo-vigencia-contrato {
            font-weight: normal;
            font-size: 12px;
            margin-left: 35%;
        }

        .hr-extrato {
            margin-bottom: 20px;
        }

        .detalhes-grafico {
            font-family: ItauText-Bold;
        }

        .square-grey {
            width: 6px;
            height: 6px;
            background: #d3d3d3;
            floa
            t: left;
            margin: 8px 5px 0 0;
        }

        .square-purple {
            width: 6px;
            height: 6px;
            background: #781B8E;
            float: left;
            margin: 8px 10px 0 0;
        }

        .font-bold {
            font-we
            ight: bold;
        }

        .titulo-utilizacao-lis {
            margin-bottom: 20px;
            display: block;
        }

        .label-lis-esquerda {
            float: left;
        }

        .label-lis-direita {
            float: right;
        }

        .gra
        fico-cheque-especial {
            display: block;
            margin-top: 20px;
        }

        #usage-bar {
            width: 100% !important;
            margin: 8px 0px 8px 0px;
            height: 4px;
        }

        progress::-webki
        t-progress-bar {
            background-color: #d3d3d3;
            width: 100%;
        }

        progress::-webkit-progress-value {
            background-color: #64128a !important;
        }

        progress {
            backgrou
            nd-color: #d3d3d3;
        }

        progress::-moz-progress-bar {
            background-color: #64128a !important;
        }

        progress {
            color: #64128a;
        }

        #color-saldo {
            color: #64128a;
        }

        .b
        tnMaisMenos {
            width: 88px !important;
            height: 32px !important;
            border-radius: 4px !important;
            border: 1px solid #106EB0 !important;
            font-family: ItauText-Bold !important;
            font-size: 14px !important;
            margin-left: 25px;
        }

        .limites-rodape {
            font-family: ItauText-Regular;
        }

        }</style>
        <div class="left grid-col12 no-padding">

            <!-- tabela cheque especial -->
            <div>
                <p class="titulo-cheque-especial">{{tituloAba}} <span class="periodo-vigencia-contrato">{{periodoVigencia}}</span>
                </p>
            </div>
            <table id="tabela-juros-acumulados-pessoa-fisica" class="grid-col12">
                <tbody id="corpo-tabela-juros-acumulados">
                <tr class="fonte-tamanho14 itau-display-regular cor-linha-limites border-bottom-efe9e5 linha-impressao">
                    <td class="no-float position-static txt-left no-padding-esquerda no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 fonte-impressao no-border-left no-border-right">
                        detalhamento
                    </td>
                    <td class="no-float position-static txt-right no-padding-direita no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 no-border-left no-border-right itau-text-bold cor-252220 fonte-impressao-bold">
                        valor
                    </td>
                </tr>
                {{#tabelaChequeEspecial}}
                <tr class="fonte-tamanho14 itau-display-regular cor-linha-limites border-bottom-efe9e5 linha-impressao">
                    <td class="no-float position-static txt-left no-padding-esquerda no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 fonte-impressao no-border-left no-border-right">
                        {{{descricao.texto}}}
                    </td>
                    <td class="no-float position-static txt-right no-padding-direita no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 no-border-left no-border-right itau-text-bold cor-252220 fonte-impressao-bold">
                        {{valor}}
                    </td>
                </tr>
                {{/tabelaChequeEspecial}}
                </tbody>
            </table>

            <!-- tabela juros acumulados -->
            <h4 style="font-family: 'itau-text-regular'">{{tituloJurosAcumulados}}</h4>
            <table id="tabela-juros-acumulados-pessoa-fisica" class="grid-col12">
                <tbody id="corpo-tabela-juros-acumulados">
                <tr class="fonte-tamanho14 itau-display-regular cor-linha-limites border-bottom-efe9e5 linha-impressao">
                    <td class="no-float position-static txt-left no-padding-esquerda no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 fonte-impressao no-border-left no-border-right">
                        detalhamento
                    </td>
                    <td class="no-float position-static txt-right no-padding-direita no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 no-border-left no-border-right itau-text-bold cor-252220 fonte-impressao-bold">
                        valor
                    </td>
                </tr>
                {{#tabelaJurosAcumulados}}
                <tr class="fonte-tamanho14 itau-display-regular cor-linha-limites border-bottom-efe9e5 linha-impressao">
                    <td class="no-float position-static txt-left no-padding-esquerda no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 fonte-impressao no-border-left no-border-right">
                        {{{descricao.texto}}}
                    </td>
                    <td class="no-float position-static txt-right no-padding-direita no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 no-border-left no-border-right itau-text-bold cor-252220 fonte-impressao-bold">
                        {{valor}}
                    </td>
                </tr>
                {{/tabelaJurosAcumulados}}
                </tbody>
            </table>

            <!-- tabela de historico de utilizacao diaria -->
            <h4 style="font-family: 'itau-text-regular'">{{tituloHistorico}}</h4>
            <p style="font-family: 'itau-text-regular'; font-size: 12px; text-align: justify;">{{detalheHistorico}}</p>
            <table id="tabela-juros-acumulados-pessoa-fisica" class="grid-col12">
                <tbody id="corpo-tabela-juros-acumulados">
                {{#tabelaUtilizacaoDiaria}}
                <tr class="fonte-tamanho14 itau-display-regular cor-linha-limites border-bottom-efe9e5 linha-impressao">
                    <td class="no-float position-static txt-left no-padding-esquerda no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 fonte-impressao no-border-left no-border-right">
                        {{{descricao.texto}}}
                    </td>
                    <td class="no-float position-static txt-right no-padding-direita no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 no-border-left no-border-right itau-text-bold cor-252220 fonte-impressao-bold">
                        {{valor}}
                    </td>
                </tr>
                {{/tabelaUtilizacaoDiaria}}
                </tbody>
            </table>

            <!-- tabela de juros e encargos do cheque especial -->

            <h4 style="font-family: 'itau-text-regular'">informa&ccedil;&otilde;es adicionais do Limite da Conta</h4>
            <table id="tabela-juros-acumulados-pessoa-fisica" class="grid-col12">
                <tbody id="corpo-tabela-juros-acumulados">
                <tr class="fonte-tamanho14 itau-display-regular cor-linha-limites border-bottom-efe9e5 linha-impressao">
                    <td class="no-float position-static txt-left no-padding-esquerda no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 fonte-impressao no-border-left no-border-right">
                        detalhamento
                    </td>
                    <td class="no-float position-static txt-right no-padding-direita no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 no-border-left no-border-right itau-text-bold cor-252220 fonte-impressao-bold">
                        valor
                    </td>
                </tr>
                {{#tabelaJurosEncargos}}
                <tr class="fonte-tamanho14 itau-display-regular cor-linha-limites border-bottom-efe9e5 linha-impressao">
                    <td class="no-float position-static txt-left no-padding-esquerda no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 fonte-impressao no-border-left no-border-right">
                        {{{descricao.texto}}}
                    </td>
                    <td class="no-float position-static txt-right no-padding-direita no-padding txt-v-align-middle grid-col-auto border-bottom-efe9e5 no-border-left no-border-right itau-text-bold cor-252220 fonte-impressao-bold">
                        {{valor}}
                    </td>
                </tr>
                {{/tabelaJurosEncargos}}
                </tbody>
            </table>

            <!-- rodape -->
            <div
                style="font-family: 'itau-text-regular'; font-size: 11px; text-align: justify; line-height: 14px; margin-bottom: 0px;">
                <p>
                    &bull; O per&iacute;odo de apura&ccedil;&atilde;o de juros e IOF considera o per&iacute;odo de
                    utiliza&ccedil;&atilde;o do Limite da Conta e Limite da Conta adicional, dentro da vig&ecirc;ncia do
                    contrato.
                </p>
                <p>
                    &bull; O Limite da Conta &eacute; um cr&eacute;dito para uso tempor&aacute;rio e emergencial e sua
                    utiliza&ccedil;&atilde;o est&aacute; sujeit
                    a a cobran&ccedil;a de juros e IOF. Se voc&ecirc; precisa de cr&eacute;dito por um per&iacute;odo
                    maior, consulte as op&ccedil;&otilde;es em nossos canais.
                </p>
            </div>

        </div>
    </script>

    <script>
        var dataImpressao;
        var limitesExcel = {};
        var possuiLimiteContratado;
        (function () {
            var dependencies = ['ngSanitize'];
            var appTabelaJurosAcumulado = angular.module('tabelaJurosAcumuladoApp', dependencies);

            appTabelaJurosAcumulado.controller('tabelaJurosAcumuladoAppController', ['$scope', '$compile', function ($scope, $compile) {

                const self = this;
                self.obj = {};
                self.chequeEspecial = [];
                self.jurosAcumulados = [];
                self.historicoChequeEspecial = [];
                self.jurosEncargos = [];
                exist = [];
                self.mensagem = '';
                var dataHoraAtualizado;
                $scope.limit = 5;
                $scope.verMenos = true;

                self.init = function () {
                    self.callApi();
                }

                $scope.mostrarMaisMenos = function () {
                    if ($scope.verMenos) {
                        $scope.limit = 5;
                        $scope.text = "consultar hist\u00f3rico do Limite da Conta";
                    } else {
                        $scope.limit = $scope.ctrl.historicoChequeEspecial.length;
                        $scope.text = "ver menos";
                    }
                    $scope.verMenos = !$scope.verMenos;
                }
                self.callApi = function (jurosAcumulados) {
                    $.ajaxHelper.executeRequest({
                        url: "SLiVUgUdItX3GoWSbxuiz9EpYPKW1x2nr+QH2+ABwqI=;",
                        successFunction: function (data) {
                            self.obj = data

                            if (self.obj == null) {
                                possuiLimiteContratado = false;
                                self.mensagem = "voc&ecirc; n&atilde;o possui limite contratado.";
                                self.obj = {};
                                $scope.$apply();
                                return;
                            } else {
                                self.mensagem = '';
                                possuiLimiteContratado = true;
                                limitesExcel = data;
                                self.tituloAba = data.tituloAba;
                                self.descricaoVigencia = data.descricaoVigencia;
                                self.chequeEspecial = data.tabelaChequeEspecial;
                                self.tituloJurosAcumulados = data.tituloJurosAcumulados;
                                self.jurosAcumulados = data.tabelaJurosAcumulados;
                                self.tituloHistoricoUtilizacao = data.tituloHistoricoUtilizacao;
                                self.historicoChequeEspecial = data.tabelaUtilizacaoDiaria;
                                self.jurosEncargos = data.tabelaJurosEncargos;
                                $scope.mostrarMaisMenos();
                            }

                            self.dataHoraAtualizado = data.dataConsulta;
                            var paramsDataHoraAtualizacaoLimites = {
                                idDataHoraAtualizadoEm: 'data-hora-atualizado-em-limites',
                                dataConsulta: self.dataHoraAtualizado.substring(0, 11),
                                horaConsulta: self.dataHoraAtualizado.substring(11, self.dataHoraAtualizado.length)
                            }

                            self.dataHoraAtualizacao = paramsDataHoraAtualizacaoLimites;
                            self.dataImpressao = data.dataConsulta;
                            var html = $compile(data.htmlImpressao)($scope);
                            angular.element(document.getElementById("impressao-aba-limite")).append(html);
                            console.log(html)

                            $scope.$apply();
                        },
                        errorFunction: function (error) {
                            self.mensagem = 'Sistema indispon&iacute;vel, tente mais tarde.'
                            $scope.$apply();
                        }
                    })
                }

                $scope.isObjectEmpty = function (elem) {
                    return Object.keys(elem).length === 0;
                }

                self.exportarArquivoLimitesImprimirPdf = function (tipoExportacao) {
                    $('#mensagemErroPdf').remove();
                    var detalheHistorico;
                    if (self.historicoChequeEspecial.length > 0) {
                        detalheHistorico = "Valores di\u00E1rios referentes \u00E0 utiliza\u00E7\u00E3o do seu limite de Limite da Conta, apurados ao final de
                        cada
                        dia
                        de
                        utiliza\u00E7\u00E3o, considerando
                        o
                        per\u00EDodo
                        de
                        vig\u00EAncia
                        do seu contrato.Obs
                    :
                        a
                        utiliza\u00E7\u00E3o
                        no
                        final
                        de
                        semana
                        e
                        feriado
                        ser\u00E1
                        contabilizada
                        no
                        pr\u00F3ximo
                        dia
                        \u00FAtil.
                        ";
                    } else {
                        detalheHistorico = "voc\u00EA ainda n\u00E3o utilizou o limite do seu Limite da Conta neste per\u00EDodo.";
                    }

                    var template = $("#template-tabela-juros-acumulado").html();
                    var conteudoFinal = Mustache.render(template, {
                        tituloAba: self.tituloAba,
                        periodoVigencia: self.descricaoVigencia,
                        tabelaChequeEspecial: self.chequeEspecial,
                        tituloJurosAcumulados: self.tituloJurosAcumulados,
                        tabelaJurosAcumulados: self.jurosAcumulados,
                        tituloHistorico: self.tituloHistoricoUtilizacao,
                        detalheHistorico: detalheHistorico,
                        tabelaJurosEncargos: self.jurosEncargos,
                        tabelaUtilizacaoDiaria: self.historicoChequeEspecial
                    });

                    if (tipoExportacao === 'pdf') {
                        let dataAtual = new Date().toLocaleString("pt-BR").split(" ");
                        let horaMinuto = dataAtual[1].split(":");
                        let tituloArquivoPDF = "extrato-limites_" + dataAtual[0].replaceAll("/", "_") + "_" + horaMinuto[0] + "-" + horaMinuto[1];

                        $("#formImpressaoPDF input[name='nomeArquivo']").val(tituloArquivoPDF)
                        salvarEmPDF('Extrato conta corrente / Limites', null, 'formImpressaoPDF', conteudoFinal, self.dataImpressao);
                    } else {
                        $(".titulo").text("Extrato conta corrente / Limites")
                        window.print();
                    }

                }
            }])

            $(document).ready(function () {
                angular.bootstrap($('#tabelaAbaLimites'), ['tabelaJurosAcumuladoApp']);
            });
        })();

        const sdk = window?.SDKAnalytics ?
            window.SDKAnalytics({
                gtm: 'GTM-NNRPQN6'
            }) :
            {
                track: function (event) {
                    console.log("GA4 Tracking event:", event);
                },
                setDefaultParameters: function (event) {
                    console.log("GA4 Set setDefaultParameters:", event);
                },
                setUserProperties: function (event) {
                    console.log("GA4 Set setUserProperties:", event);
                }
            };

        var abaLimites = (function () {
            var carregar = function (dados) {

                $("#btn-aba-limites").on("click", function () {
                    carregaDataLayer("Limite", true);
                    disparaGA4AbaLimites();
                });

            };

            return {
                carregar: carregar
            };

            function disparaGA4AbaLimites() {
                sdk.track({
                    analytics: {
                        event_name: "visualization",
                        parameters: {
                            custom_path: "/conta/consultar/extrato/timeline-idl/consolidada",
                            implementation_team: "extrato-hub-de-contas-pf:gerir-vida-financeira",
                            detail: "aba:visao-limites",
                        }
                    }
                });
            }

        })();


    </script>

    <!-- <div id="limites" class="limites clearfix padding-esquerda25 padding-direita25">
</div> -->

</div>

<label for="aba-outros-lancamentos" class="hide">outros
    lan&ccedil;amentos</label>

<div id="aba-outros-lancamentos"
     class="ni-conteudo-aba-pf clearfix" name="outros lancamentos">
    <!DOCTYPE html>\r
    \r
    \r
    \r
    \r
    \r
    \r
    <div class="grid-col12 padding-esquerda25 padding-direita25">\r
        <div class="grid-col9 no-padding">\r
            <h2 class="titulo-aba-lancamentos-pf  no-margem">movimenta&ccedil;&otilde;es</h2>\r
        </div>
        \r
        <div class="largura-fixa-160 grid-col3 txt-right margem-direita25 no-padding-direita border-left-efe9e5 right">
            \r
            <button aria-label="imprimir" class="icon-itaufonts_impressora ni-icone-menu-exportar" onclick="javascript:exportarArquivoOutrosLancamentosImpri
mirPdf('imprimir');" text-tooltip="imprimir" class-tooltip="tooltip-exportacao cor-background-605751"
                    class-arrow-tooltip="border-top-color-605751" data-placement="top"
                    data-placement-arrow="center"></button>
            \r
            <button aria-label="salvar em pdf" class="icon-itaufonts_pdf ni-icone-menu-exportar" onclick="javascript:exportarArquivoOutrosLancamentosImprimi
rPdf('pdf');" text-tooltip="salvar em pdf" class-tooltip="tooltip-exportacao cor-background-605751"
                    class-arrow-tooltip="border-top-color-605751" data-placement="top"
                    data-placement-arrow="center"></button>
            \r
        </div>
        \r
        <hr class="grid-col12 no-padding hr-extrato grid-col12"/>
        \r
    </div>
    \r
    \r
    <div id="extrato-grid-outros-lancamentos" class="grid-col12 margem-cima24 no-padding"></div>
    \r
    \r
    <div class="grid-col12 padding-esquerda25 padding-direita25">\r
        <hr class="hr-extrato margem-cima50 margem-baixo35 grid-col12 sem-impressao">
        \r
        \r
        <div id="data-hora-atualizado-em-outros-lancamentos"
             class="line-height32 itau-text-regular fonte-tamanho14 texto">\r
        </div>
        \r
        \r
        <div class="largura-fixa-220 grid-col3 txt-right no-padding-direita right">\r
            <button aria-label="imprimir" class="icon-itaufonts_impressora ni-icone-menu-exportar" onclick="javascript:exportarArquivoOutrosLancamentosImpri
mirPdf('imprimir');" text-tooltip="imprimir" class-tooltip="tooltip-exportacao cor-background-605751"
                    class-arrow-tooltip="border-top-color-605751" data-placement="bottom"
                    data-placement-arrow="center"></button>
            \r
            <button aria-label="salvar em pdf" class="icon-itaufonts_pdf ni-icone-menu-exportar" onclick="javascript:exportarArquivoOutrosLancamentosImprimi
rPdf('pdf');" text-tooltip="salvar em pdf" class-tooltip="tooltip-exportacao cor-background-605751"
                    class-arrow-tooltip="border-top-color-605751" data-placement="bottom"
                    data-placement-arrow="center"></button>
        </div>
        \r
    </div>
    \r
    \r
    <script id="linhaTabelaOutrosLancamentos" type="text/template">\r
    {{#dadosCorpo}}
    {{#eDescricaoGrupoLancamento}}
    <tr class="linha-tabela-lancamentos-pf-descricao-grupo texto">
        <td class="no-padding-esquerda padding-cima40 padding-baixo25 no-border txt-v-align-middle itau-display-regular texto fonte-tamanho16 fonte-impressao-bold espacamento-titulo-outros-lancamentos"
            colspan="3">\r
            <span
                class="fonte-tamanho24 icon-itaufonts_extrato_lancamentos cor-605751 txt-v-align-middle padding-direita15 sem-impressao"></span>\r
            <span aria-hidden="true"> {{descricaoLancamento}} </span>\r
            <span class="element--accessHide">Tipo do lan&ccedil;amento: {{descricaoLancamento}}</span>\r
        </td>
    </tr>\r
    {{/eDescricaoGrupoLancamento}}\r
    {{^eDescricaoGrupoLancamento}}\r
    <tr class="extrato-tabela-pf linha-impressao texto"> \r
        <td class="no-padding txt-v-align-middle texto extrato-impressao-zebrado nao-quebra-linha">\r
            <span
                class="itau-display-bold fonte-tamanho14 padding-direita15 tamanho-minimo-data-outros-lancamentos fonte-impressao">{{diaMesLancamento}}</span>\r
        </td>
        \r
        <td class="separador-coluna-esquerda no-padding txt-v-align-middle coluna-tabela-lancamentos-descricao-pf texto extrato-impressao-zebrado">
            \r
            <span class="itau-display-regular fonte-tamanho14 fonte-impressao quebra-palavra-impressao">{{descricaoLancamento}}</span>\r
        </td>
        \r
        <td class="coluna-agencia-lancamentos extrato-impressao-zebrado">\r
            <span class="itau-display-regular fonte-tamanho14 fonte-impressao">{{agenciaOrigem}}</span>\r
        </td>
        \r
        {{#valorSinal.positivo}}\r
        <td class="txt-right valor-lancamento-positivo-pf no-padding largura-minima175 fonte-impressao-bold extrato-impressao-zebrado">
            {{valorSinal.valor}}\r
        </td>
        \r
        {{/valorSinal.positivo}}\r
        {{^valorSinal.positivo}}\r
        <td class="txt-right valor-lancamento-negativo-pf no-padding largura-minima175 fonte-impressao-bold extrato-impressao-zebrado">
            \r
            <span class="element--accessHide">-{{valorSinal.valor}}</span>\r
            <span aria-hidden="true">\r
                    <span class="valor-lancamento-normal-negativo-pf fonte-impressao-bold">-</span>\r
                            <span>{{valorSinal.valor}}</span> \r
                        </span>\r
        </td>
        \r
        {{/valorSinal.positivo}}\r
    </tr>\r
    {{/eDescricaoGrupoLancamento}}\r
    {{/dadosCorpo}}\r
    </script>
    \r
    \r
    <script type="text/javascript">\r
    var outrosLancamentosCompleta;\r
    var $templateAbaOutroslancamentos = null;\r
    var botaoDropdownOutrosLancamentos = null;\r
\r
    var carregarAbaOutrosLancamentos = function (todosLancamentos) {\r
        $("#btn-aba-outros-lancamentos").remove();\r
        componenteAbas.atualizarDimensaoAbas();\r
    }\r
\r

    function exportarArquivoOutrosLancamentosImprimirPdf(tipoExportacao) {\r
        $('#mensagemErroPdf').remove();\r
\r
        var conteudoHTMLAbaLancamentos = $('#extrato-grid-outros-lancamentos').clone();\r
\r
        conteudoHTMLAbaLancamentos = $(conteudoHTMLAbaLancamentos).find('.remover-da-impressao').remove().end().html();\r
\r
        if (tipoExportacao === 'pdf') {\r
            salvarEmPDF('Extrato conta corrente / Outros Lan&ccedil;amentos', null, 'formImpressaoPDF', conteudoHTMLAbaLancamentos, filtroLancamentos.filtroSelecionado().dataHoraConsulta);\r
        } else {\r
            imprimirTemplateHTML('Extrato conta corrente / Outros Lan&ccedil;amentos', 'extrato-grid-outros-lancamentos', 'EdpC5qFN3dY/IGJnV4bFyDao4NpbnZTxDjKhGZ/lDmM=;', null, filtroLancamentos.filtroSelecionado().dataHoraConsulta);\r
        }\r
\r
    }\r
\r
    </script>
    \r

</div>
</div>
\r
\r
\r
\r
<div id="rodape-lancamento" \r
     class="cor-252220 itau-text-regular tamanho12 margem-cima15 margem-esquerda25">\r
    <p>&bull; Os saldos acima s&atilde;o baseados nas informa&ccedil;&otilde;es dispon&iacute;veis\r
        at&eacute; esse instante e poder&atilde;o ser alteradas a qualquer momento em fun&ccedil;&atilde;o\r
        de novos lan&ccedil;amentos.</p>\r
    \r
    <p>&bull; Opera&ccedil;&atilde;o p&oacute;s-fixada: valor meramente indicativo. O valor do d&eacute;bito ser&aacute;
        determinado na data de liquida&ccedil;&atilde;o da opera&ccedil;&atilde;o, conforme contratado.</p>\r
    \r
    \r
    \r
    \r
    <p>&bull; Consulte a &uacute;ltima vers&atilde;o das Condi&ccedil;&otilde;es Gerais da sua\r
        Conta Universal Ita&uacute; e dos Servi&ccedil;os no site\r
        <a href="https://www.itau.com.br/conta-corrente/conveniencia">www.itau.com.br/conta-corrente/conveniencia</a>
    </p>\r
    \r
    \r
    \r
    \r
    <p>&bull; Conforme Resolu&ccedil;&atilde;o 5.057/2022 do CMN/BACEN, as opera&ccedil;&otilde;es de\r
        cr&eacute;dito podem ser transferidas para outra institui&ccedil;&atilde;o Financeira por\r
        meio da Portabilidade.</p>\r
    <p class="margem-esquerda8">Para maiores informa&ccedil;&otilde;es, consulte: <a href="https://www.itau.com.br">www.itau.com.br</a>
        no\r
        menu: Servi&ccedil;os > Portabilidade de cr&eacute;dito.</p>\r
    \r
</div>\r
\r
<div id="aviso-rodape-card" class="no-padding margem-cima30"/>\r

<div id="boxVitrineDashboard" class="brq-container"></div>
<div id="CA" class="padding-esquerda25 margem-cima20"></div>

</div>
</div>
</section>


<style>
    @media screen and (min-width: 1280px) {
        cpv-card-button-group .card-group {
            padding-left: 45px;
        }
    }

    @media screen and (max-width: 1279px) {
        cpv-card-button-group .card-group {
            padding-left: 35px;
        }
    }

    cpv-empty-card .card__description {
        line-height: 24px;
        font-family: "itau-text-regular";
        margin-bottom: 1rem;
        margin-top: 25px;
    }

    cpv-empty-card .card__link {
        text-decoration: none;
        font-weight: normal;
    }

    .extrato-vc-tbm-pode.atalhos cpv-empty-card .card__description {
        font-family: Itau Text;
        font-size: 16px;
        line-height: 24px;
        font-weight: bold;
    }

    .extrato-vc-tbm-pode.atalhos cpv-empty-card .card__link {
        text-decoration: none;
        border-bottom: 0px;
    }

    .extrato-vc-tbm-pode.atalhos cpv-card-button-group .card-group__container {
        padding: 8px 12px;
        width: 148px;
        height: 145px;
    }

    .extrato-vc-tbm-pode.atalhos cpv-empty-card .card__icon {
        font-size: 24px;
        line-height: 28px;
        color: #ff6200;
    }

    .extrato-vc-tbm-pode.atalhos .card__container {
        border-radius: 4px;
        width: 170px;
        height: 150px;
        padding: 15px 15px 0px 15px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .extrato-vc-tbm-pode.atalhos cpv-card-button-group .card-group {
        padding: 20px;
        height: 220px;
    }


    .icone-pix {
        position: absolute;
        left: 8%;
        top: 15%;
    }

    .card__container {
        background-color: white;
        border-radius: 8px;
        border: 1px solid #EFE9E5;
        padding: 24px;
        box-shadow: 0 1px 2px 0 rgba(91, 81, 73, 0.20);
        height: 100%;
        margin-right: 40px;
    }

    .card__icon {
        font-size: 24px;
        color: #ff6200;
    }

    .card__description {
        font-family: Itau Text;
        font-size: 16px;
        line-height: 24px;
        margin-top: 1rem;
        margin-bottom: 1rem !important;
        color: #231D19;
        font-weight: bold;
    }

    .extrato-vc-tbm-pode.atalhos .card__container ng-transclude {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: inherit;
    }

    #person .card__icon {
        color: #876632;
    }


</style>

<script>
    //o codigo para manutencao desse componente esta no repo iweb
    !function (r) {
        var t = {};

        function c(n) {
            if (t[n]) return t[n].exports;
            var e = t[n] = {i: n, l: !1, exports: {}};
            return r[n].call(e.exports, e, e.exports, c), e.l = !0, e.exports
        }

        c.m = r, c.c = t, c.d = function (n, e, r) {
            c.o(n, e) || Object.defineProperty(n, e, {enumerable: !0, get: r})
        }, c.r = function (n) {
            "undefined" != typeof Symbol && Symb
            ol.toStringTag && Object.defineProperty(n, Symbol.toStringTag, {value: "Module"}), Object.defineProperty(n, "__esModule", {value: !0})
        }, c.t = function (e, n) {
            if (
                1 & n && (e = c(e)), 8 & n) return e;
            if (4 & n && "object" == typeof e && e && e.__esModule) return e;
            var r = Object.create(null);
            if (c.r(r), Object.defineProperty(r, "default
                ",{enumerable:!0,value:e}),2&n&&"
            string
            "!=typeof e)for(var t in e)c.d(r,t,function(n){return e[n]}.bind(null,t));return r},c.n=function(n){var e=n&&
            n.__esModule ? function () {
                return n.default
            } : function () {
                return n
            };
            return c.d(e, "a", e), e
        }, c.o = function (n, e) {
            return Object.prototype.hasOwnProperty.call(
                n, e)
        }, c.p = "", c(c.s = 0)
    }([function (n, e, r) {
        n.exports = r(1)
    }, function (n, e, r) {
        "use strict";
        r(2);
        var t = r(3), c = r(4), r = r(5);
        angular.module("CardModule", ["ngS
            anitize"]).directive("cpvCardButton",t.cpvCardButtonComponent).directive("cpvEmptyCard",c.cpvEmptyCardComponent).directive("cpvCardButtonGroup",r.cp
            vCardButtonGroupComponent)
    }, function (n, e, r) {
    }, function (n, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {value: !0}), e.cpvCardButtonComponent
            = function () {
            var n = {
                scope: {icon: "@", description: "@", hyperlinkLabel: "@", hyperlinkOp: "@", op: "@"},
                template: '        <cpv-empty-card hyperlink-op="{{hy
                perlinkOp
            }
        }
        " op="
        {
            {
                op
            }
        }
        ">            <span class="
        card__icon
        {
            {
                icon
            }
        }
        "></span>            <p class="
        card__description
        " ng-bind-html="
        description
        "></p>        </cpv-empty-card>    '};return n}},function(n,e,r){"
        use
        strict
        ";Object.defineProperty(e,"
        __esModule
        ",{value:!0}),e.cpvEmptyCardCom
        ponent = function () {
            var n = {
                transclude: !0,
                scope: {hyperlinkLabel: "@", hyperlinkOp: "@", op: "@"},
                template: '               <a role="button" class = "card__link" ng-href="{{ hyperlinkOp ? hyperlinkOp : \'javascript:; \'}}" ng-attr-data-op="{{op}}">            <div class="card__container">
                    < ng - transclude > < /ng-transclude>            </div > < /a>    '};return n}},function(n,e,r){"use strict";Object.defineProperty(e,"__es
                Module",{value:!0}),e.cpvCardButtonGroupComponent=function(){var n={scope:{title:"
                @",cards:" = "},transclude:!0,template:'        <div class="
                card-g
                roup">            <h2 class="
                card-group__title
                " ng-if=\'title\' ng-bind-html="title
                "></h2>            <div ng-transclude class="card - group__cont
                ainer">                <cpv-card-button ng-repeat="
                card
                in cards
                " icon="{
            {
                card.icon
            }
        }
            " description="
            {
                {
                    card.description
                }
            }
            " hyperlink-label="
            {
                {
                    card.hyperlinkLabel
                }
            }
            " hyperlink-op="
            {
                {
                    card.hyperlinkOp
                }
            }
            "></cpv-card-button>                </div>        </div>    '};return n};var r=r(6);(r=r)&
            & r.__esModule
        },

            function (n, e) {
                n.exports = '<div class="card-group">\r    <h2 class="card-group__title" ng-if=\'title\' ng-bind-html="title"></h2>\r
                    < div
                ng - transclude

                class

                = "card-group__cards-container" >\r < cpv - card - button
                ng - repeat = "card in cards"
                icone = "{{card.icone}}"
                description = "{{card.description}}"
                link = "{{card.link}}" > < /cpv-card-button>\r    </div >\r < /div>'}]);
</script>


<div id="vcTbmPode">
    <div class="extrato-vc-tbm-pode atalhos">
        <cpv-card-button-group title="voc&ecirc; ainda pode ir para">

            <div style="width: 320px;">
                <cpv-card-button id="card-guiche" class="tamanho-card" icon="icon-itaufonts_caixa_eletronico"
                                 description="lan&ccedil;amentos de guich&ecirc; de caixa"
                                 op="OgicMbKyPRMm8Ol4Y5wNjascFtW0qQk5zXtDgA53vVQ=;"></cpv-card-button>
            </div>


            <div style="width: 320px; position: relative;">
                <img id="imgPix" class="icone-pix" alt=""
                     src="https://estatico.itau.com.br/ibanking/commons/img/pix_outline.png">
                <cpv-card-button id="card-extrato-pix" class="tamanho-card" icon="" description="extrato pix"
                                 op="9q0S0yk20lKJwuspFFCeqjpeADOQ5xAL6IlTTO6aAe4=;"></cpv-card-button>
            </div>


            <div style="width: 320px;">
                <a role="button" href="javascript: executaConvivenciaMenu('U+GURH7a+44KDqQcXqZFlQ==');"
                   style="text-decoration: none;">
                    <div class="card__container">
                        <span class="card__icon icon-itaufonts_comprovante"></span>
                        <p class="card__description"> meus comprovantes</p>
                    </div>
                </a>
            </div>


            <div style="width: 320px;">
                <cpv-card-button id="card-pagamentos" class="tamanho-card" icon="icon-itaufonts_leitor_cod_barras"
                                 description="pagamentos"
                                 op="mzYzYV6LjEDC7dJ1b162pzKUB5gHtb5vObi7fxoDR5A=;"></cpv-card-button>
            </div>


            <div style="width: 320px;">
                <cpv-card-button id="card-tranferencias" class="tamanho-card" icon="icon-itaufonts_tranferencias"
                                 description="transfer&ecirc;ncias"
                                 op="HLf8cjrFbn1Z+tR4FciMwDa59EZ9gdI2bo1fUJbdATM=;IT:LG:PF:Transferencias:Home"></cpv-card-button>
            </div>

        </cpv-card-button-group>
        <cpv-card-button-group>

            <div style="width: 320px;">
                <cpv-card-button id="card-extrato-poupanca" class="tamanho-card" icon="icon-itaufonts_poupanca"
                                 description="extrato poupan&ccedil;a"
                                 op="Lh/9Jj75qVkYp6D5IJZxKXwxFqE0kGyE5GBE+IDOEjQ=;IT:LG:PF:Poupanca:Home"></cpv-card-button>
            </div>


            <div style="width: 320px;">
                <a id="atalhoConsolidado" class="card__link" role="button"
                   href="javascript: executaConvivenciaMenu('/D0Wz4Rmc4ogvP9g1+yI3A==');"
                   style="text-decoration: none;">
                    <div class="card__container">
                        <span class="card__icon icon-itaufonts_extrato_lancamentos"></span>
                        <p class="card__description"> extrato mensal consolidado </p>
                    </div>
                </a>
            </div>

        </cpv-card-button-group>
    </div>
</div>


<script type="text/javascript">

    var segmentoConta = $("body").attr("id");

    var image = document.getElementById("imgPix");
    var idMenu = document.getElementById("atalhoConsolidado");

    if ("true" == "true") {
        if ("true" == "true") {
            image.src = segmentoConta !== "person" ? "https://estatico.itau.com.br/ibanking/commons/img/pix_outline.png" : verificarOrigemIconeExtratoPixPerson();
        }
        if ("true" == "true") {
            idMenu.href = segmentoConta !== "person" ? "javascript: executaConvivenciaMenu('/D0Wz4Rmc4ogvP9g1+yI3A==');" : "javascript: executaConvivenciaMenu('D/xnv+Z2PlmfRz4ojcwWGg==');";
        }
    }

    var appCard = angular.module('vcTbmPodeModule', ['CardModule']);

    var initPage = function () {
        angular.bootstrap($('#vcTbmPode'), ['vcTbmPodeModule']);
    }

    function verificarOrigemIconeExtratoPixPerson() {
        if ("true" == "true") {
            return "https://estatico.itau.com.br/ibanking/commons/img/pix_outline._person.png";
        } else {
            return "https://estatico.itau.com.br/ibanking/commons/img/pix_outline._personOLD.png";
        }
    }

    $(document).ready(function () {
        initPage();
    });

</script>


<div class="likert-extrato">
    \r
    \r
    \r
    \r
    <script src="https://survey-satisfaction.cloud.itau.com.br/main.js"></script>
    \r
    <link
        \r
        rel="stylesheet" \r
        media="screen" \r
        href="https://survey-satisfaction.cloud.itau.com.br/styles.css" \r
    />
    \r
    \r
    <div id="likert" style="padding-bottom: 16px; max-width: 930px;">\r
        <pq8-mfe-likert-component
            \r
            question="Como voc&ecirc; avalia essa experi&ecirc;ncia?" \r
            taskCode="53499" \r
            journeyName="53499_Extrato" \r
            journeyNavigation="Encontrar/Acessar extrato da conta" \r
            channel="pf" \r
            layout="default" \r
        ></pq8-mfe-likert-component>
        \r
    </div>
    \r
    \r
    <script type="text/javascript">\r
\r
    var app = angular.module('app', ['FeedbackLikertModule']);\r
\r
    app.controller('appController', ['$scope', function ($scope) {\r
\r
        var self = this;\r
        self.likertObj = {};\r
\r
        self.pipulasDeDor = [\r
        {\r
            name: "conte&uacute;do desorganizado",\r
            selected: false\r
        }
    ,\r
        {\r
            name: "layout ruim",\r
            selected: false\r
        }
    ,\r
        {\r
            name: "falta de uma funcionalidade",\r
            selected: false\r
        }
    ,\r
        {\r
            name: "informa&ccedil;&otilde;es est&atilde;o confusas",\r
            selected: false\r
        }
    ,\r
        {\r
            name: "muito conte&uacute;do",\r
            selected: false\r
        }
    ,\r
        {\r
            name: "n&atilde;o consegui ajuda",\r
            selected: false\r
        }
    ,\r
        {\r
            name: "a busca n&atilde;o funciona como o esperado",\r
            selected: false\r
        }\r
    ]
        ;\r
    \r
        self.init = function () {\r
            self.likertObj = {\r
            'nome'
        :
            'novoExtratoLikert2',\r
            'value'
        :
            'true'\r
        }
            ;        \r
        };\r
    }]);\r
\r
    var initPage = function () {\r
        angular.bootstrap($('#likert'), ['app']);\r
    }\r
\r
    $(document).ready(function () {\r
        initPage();\r
    });\r
\r
    </script>
    \r
    \r
    \r
    \r

</div>

</div>

<script src="https://sdk-analytics-web.cloud.itau.com.br/index.js"></script>

<script>
    const sdk = window?.SDKAnalytics ?
        window.SDKAnalytics({
            gtm: 'GTM-NNRPQN6'
        }) :
        {
            track: function (event) {
                console.log("GA4 Tracking event:", event);
            },
            setDefaultParameters: function (event) {
                console.log("GA4 Set setDefaultParameters:", event);
            },
            setUserProperties: function (event) {
                console.log("GA4 Set setUserProperties:", event);
            }
        };


    sdk.setDefaultParameters({
        analytics: {
            parameters: {
                business: "pf",
                business_channel: "bankline-pf",
                environment: "logado"
            }
        }
    });

    var tipoConta = $("body").attr("id");
    console.log(tipoConta);

    sdk.setUserProperties({
        analytics: {
            user: {
                person_id: "d6e3ba45-646a-43e1-948f-cbb21e8208bd",
                account_type: "correntista",
                customer_segment: tipoConta
            }
        }
    });

    var contingencia = "false";
    var ordenacaoDecrescenteLancamentos = false;
    var ordenacaoDecrescenteLancamentosFuturos = false;
    segmento = 'UNICLASS';

    var coachmarkParametros = {
        exibir: true,
        quantidadeMaximaExibicoes: 4,
        permissao: false,
        segmento: 'UNICLASS'
    };

    if (segmento != 'PRIVATE') {
        BoxHelper
            .renderBox({
                urlBox: "G2zuHx5qNSzyBcGboyiCit34W7NS53xlTboKib006T4=;",
                seletorContainer: "#boxVitrineDashboard",
                onComplete: function () {
                    $("div#boxVitrineDashboard .breadcrumbs").hide();
                }
            });
    }

    function VerExtratoPix() {
        $("#frmVerExtratoPix").submit();
    }

    function Observavel() {
        this.observadores = [];
    }

    Observavel.prototype = {
        inscrever: function (fn) {
            this.observadores.push(fn);
        },
        acionar: function (o, thisObj) {
            var escopo = thisObj || window;
            this.observadores.forEach(function (item) {
                item.call(escopo, o);
            });
        }
    }

    var observavel = new Observavel();

    if (contingencia != "true") {
        observavel.inscrever(inicializaAbaLancamentos);
        observavel.inscrever(carregarAbaLancamentosFuturos);
        observavel.inscrever(carregarAbaOutrosLancamentos);
        observavel.inscrever(AbaPosicaoConsolidada.carregar);
        observavel.inscrever(abaLimites.carregar);
    }
    observavel.inscrever(BoxSaldo.carregar);
    var coachmark = new novaInternet.Coachmark(coachmarkParametros);

    function carregaExtrato(periodoConsulta) {
        let url;
        let parametros = {};

        if (contingencia != "true") {
            configuraFaqExtrato();
        }

        if (checkCookieSalvarFiltros() && getCookies("filtro_periodo_" + iDPF) != "" && getCookies("filtro_periodo_" + iDPF) != false) {
            let filtroPeriodoSalvo = getCookies("filtro_periodo_" + iDPF);
            console.log(filtroPeriodoSalvo);
            if (filtroPeriodoSalvo.includes(";")) {
                let periodoDeAte = getCookies("filtro_periodo_" + iDPF).split(";");
                console.log(periodoDeAte);

                url = "8qqTIVIXcM/KHosNK9eDOIgaoSto+IxXXMoSF/DuQmM=;/extrato/lancamentos/filtrar/periodo";
                parametros = {"dataInicio": periodoDeAte[0], "dataFinal": periodoDeAte[1]};
            } else if (filtroPeriodoSalvo.includes("/")) {
                url = "+5NDN0zZWU/+QvriXD4v6g8EbfzSPYIf6swP7Xo4OaI=;";
                parametros = {"mesCompleto": getCookies("filtro_periodo_" + iDPF)};
            } else {
                url = "MK93shczsaQ4cq+gxz+zdYTiRDjfoc1+qQp395EC9os=;";
                parametros = {"periodoConsulta": getCookies("filtro_periodo_" + iDPF)};
            }
        } else {
            url = "0V+Hw6YTgXOVktRWjYkp2lw7VtN2++whgGEU9UF30yE=;";
            parametros = {};
        }


        $.Ajax({
            dataType: "json",
            method: "POST",
            data: parametros,
            headers: {
                "op": url,
                ajaxRequest: true,
                scrollToTop: false
            },
            success: function (retorno) {
                $("#extrato-main").removeClass("hide");
                coachmark.carregar();
                observavel.acionar(retorno);
            },
            error: function (erro) {
                adobeDataLayer.pushPage("Extrato", url, "Aba", "", "", "", "", "", "IT:LG:PF:Extrato:Erro");
                adobeDataLayer.sendDataLayer();
                var html = $("#template-erro-extrato").html();
                $("#content").html(html);
            }
        });

    };

    function filtraExtrato(parametros, url) {
        $.Ajax({
            dataType: "json",
            method: "POST",
            data: parametros,
            headers: {
                "op": url,
                ajaxRequest: true,
                scrollToTop: false
            },
            success: function (retorno) {
                var observavelFiltrar = new Observavel();
                observavelFiltrar.inscrever(inicializaAbaLancamentos);
                observavelFiltrar.inscrever(carregarAbaLancamentosFuturos);
                observavelFiltrar.inscrever(carregarAbaOutrosLancamentos);
                observavelFiltrar.inscrever(AbaPosicaoConsolidada.carregar);
                observavelFiltrar.inscrever(BoxSaldo.carregar);

                $("#extrato-main").removeClass("hide");
                observavelFiltrar.acionar(retorno);
            },
            error: function (erro) {
                adobeDataLayer.pushPage("Extrato", url, "Aba", "", "", "", "", "", "IT:LG:PF:Extrato:Erro");
                adobeDataLayer.sendDataLayer();
                var html = $("#template-erro-extrato").html();
                $("#content").html(html);
            }
        });
    };

    function configuraFaqExtrato() {
        var appFaqButton = angular.module('cpvFaqButton', ['FaqButtonModule']);
        angular.bootstrap(document.getElementById('botao-faq'), ['cpvFaqButton']);
    }

    carregaExtrato();

    function obterTemplateErro() {
        var erro = {
            erro: {
                msg: "Sistema indispon&iacute;vel, tente mais tarde.",
                height: "400px"
            }
        };
        return Mustache.to_html($('#templateErro').html(), erro);
    }

    var componenteAbas = new novaInternet.Abas();
    componenteAbas.render();

    $('#componente-abas-extrato .ni-aba').on('click', function (event) {
        event.preventDefault();
        removerMensagemErroImpressaoHTML();
    });

    function verificaSeListaEstaDecrescente(lista) {
        let listaFiltrada = jQuery.extend(true, [], lista);

        if (!verificaBotaoSelecionadoFiltroVisualizar("futuros")
            && listaFiltrada.filter(lancamento => lancamento.lancamentoFuturo !== true).length > 0) {

            listaFiltrada = listaFiltrada.filter(lancamento => lancamento.lancamentoFuturo !== true);
        }

        var primeiraData = parseFloat(moment(listaFiltrada[0].dataLancamento, 'DD/MM/YYYY').format("YYYYMMDD"));
        var ultimaData = parseFloat(moment(listaFiltrada[listaFiltrada.length - 1].dataLancamento, 'DD/MM/YYYY').format("YYYYMMDD"));

        return primeiraData >= ultimaData ? true : false;
    }

    function verificaBotaoSelecionadoFiltroVisualizar(nomeFiltro) {
        return nomeFiltro == $("button.box-filtro-extrato[aria-checked=true] span").text();
        console.log(nomeFiltro);
    }

    function montarListaGrid(listaCompleta, ordenacaoDescendente) {
        var novaListaMontada = new Array();
        var listaTemporaria = jQuery.extend(true, [], listaCompleta);

        listaTemporaria.reverse();

        var ultimoRegistro;
        listaTemporaria
            .forEach(function (itemLista, index) {

                var itemAnterior = novaListaMontada[novaListaMontada.length - 1];

                if (itemAnterior
                    && (itemAnterior.dataLancamento !== null || itemAnterior.descricaoMesAno)) {
                    ultimoRegistro = novaListaMontada[novaListaMontada.length - 1];

                }

                if ((typeof ultimoRegistro != 'undefined')
                    || !itemLista.descricaoMesAno) {

                    novaListaMontada.push(itemLista);


                    if (verificaLancamentoAnterior(ultimoRegistro,
                        itemLista)) {
                        ultimoRegistro.exibeDiaMesLancamento = true;
                    }

                    if ((typeof ultimoRegistro != 'undefined' && ultimoRegistro.descricaoMesAno) && itemLista.descricaoMesAno) {


                        if (
                            (ultimoRegistro.descricaoLancamento.indexOf('futuro') > -1 && itemLista.descricaoMesAno) ||
                            (ultimoRegistro.descricaoLancamento.indexOf('futuro') > -1 && itemLista.descricaoLancamento.indexOf('futuro') > -1) ||
                            itemLista.descricaoLancamento.indexOf('futuro') == -1
                        ) {
                            novaListaMontada.splice([novaListaMontada.length] - 1, 1);
                        }
                    }
                }
            });

        if (novaListaMontada.length > 0) {
            novaListaMontada = novaListaMontada.reverse();
            var achouTituloLancamentoFuturo = false;
            var lista = [];
            var listaSemDescricaoMesAno;

            if (ordenacaoDescendente) {

                listaSemDescricaoMesAno = novaListaMontada.filter(function (item) {
                    return !item.descricaoMesAno;
                });

                if (!verificaSeListaEstaDecrescente(listaSemDescricaoMesAno)) {
                    listaSemDescricaoMesAno.reverse();
                }
                var lancamentoAnterior;
                var meses = ['janeiro', 'fevereiro', 'mar\u00e7o', 'abril', 'maio', 'junho', 'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'];

                $(listaSemDescricaoMesAno).each(function (i, item) {
                    var lancamentoAtual = item;
                    var lancamentoPosterior = null;

                    if (lancamentoAtual.dataLancamento == null) {
                        lancamentoPosterior = procurarDataLancamentoPosterior(i, listaSemDescricaoMesAno);

                        lancamentoAtual.dataLancamento = lancamentoPosterior.dataLancamento;
                        lancamentoAtual.diaLancamento = lancamentoPosterior.diaLancamento;
                        lancamentoAtual.mesLancamento = lancamentoPosterior.mesLancamento;
                        lancamentoAtual.isDataNula = true;

                    }
                    var dataAtual = moment(lancamentoAtual.dataLancamento, 'DD/MM/YYYY').format('MMYYYY');

                    if (lancamentoAnterior && !lancamentoAnterior.lancamentoFuturo && lancamentoAnterior.dataLancamento != null && verificaExibicaoLabelMesAnoLancamento(moment(lancamentoAnterior.dataLancamento, 'DD/MM/YYYY').format('MMYYYY'), dataAtual)) {
                        var lancamentoMesAno = {dataLancamento: null, descricaoLancamento: '', descricaoMesAno: true};
                        var mes = (parseInt(dataAtual.slice(0, 2)) - 1);
                        var ano = dataAtual.slice(2, 6);
                        lancamentoMesAno.descricaoLancamento = meses[mes] + ' ' + ano;
                        lista.push(lancamentoMesAno);
                    }
                    lancamentoAtual.exibeDiaMesLancamento = null;

                    if (lancamentoAtual.isDataNula) {
                        lancamentoAtual.dataLancamento = null;
                        lancamentoAtual.diaLancamento = null;
                        lancamentoAtual.mesLancamento = null;
                    }

                    lista.push(lancamentoAtual);

                    if (lancamentoAtual.dataLancamento === null) {
                        dataAnterior = lancamentoAnterior.dataLancamento;
                    }

                    lancamentoAnterior = lancamentoAtual;

                    if (lancamentoAnterior.dataLancamento == null) {
                        lancamentoAnterior.dataLancamento = dataAnterior;
                    }
                });

                var tituloLancamento = {
                    dataLancamento: null,
                    descricaoLancamento: "lan\u00e7amentos",
                    descricaoMesAno: true
                };
                var tituloLancamentoFuturo = {
                    dataLancamento: null,
                    descricaoLancamento: "lan\u00e7amentos futuros",
                    descricaoMesAno: true,
                    lancamentoFuturo: true
                };

                var primeiraDataMes;
                var acheiLancamentoFuturo;
                var acheiLancamento;
                var listaFormatada = [];
                var mesAnoAtual;
                var condicaoMesAnoJuntoLancamento = false;


                $(lista).each(function (index, item) {
                    var dataAtual = item.dataLancamento;
                    var mesAnoProximoElemento = null;

                    if (lista[index + 1] && lista[index + 1].dataLancamento) {
                        mesAnoProximoElemento = moment(lista[index + 1].dataLancamento, 'DD/MM/YYYY').format('MM/YYYY');
                    }

                    if (item.dataLancamento) {
                        mesAnoAtual = moment(item.dataLancamento, 'DD/MM/YYYY').format('MM/YYYY');
                    }

                    if (!primeiraDataMes && dataAtual) {
                        primeiraDataMes = dataAtual;
                        item.exibeDiaMesLancamento = true;
                    } else if (primeiraDataMes && primeiraDataMes != dataAtual) {
                        item.exibeDiaMesLancamento = true;
                    } else {
                        item.exibeDiaMesLancamento = false;
                    }

                    if (mesAnoAtual && mesAnoAtual != moment(primeiraDataMes, 'DD/MM/YYYY').format('MM/YYYY')) {
                        primeiraDataMes = dataAtual;
                        item.exibeDiaMesLancamento = true;
                    }

                    if (mesAnoProximoElemento && mesAnoAtual != mesAnoProximoElemento) {
                        item.exibeDiaMesLancamento = true;
                    }

                    if (!acheiLancamento && !item.lancamentoFuturo && item.descricaoMesAno != true) {
                        if (lista[index - 1] && lista[index - 1].descricaoMesAno) {
                            listaFormatada.pop();
                        }
                        listaFormatada.push(tituloLancamento);
                        acheiLancamento = true;
                    }

                    if (!acheiLancamentoFuturo && item.lancamentoFuturo && item.descricaoMesAno != true) {
                        listaFormatada.unshift(tituloLancamentoFuturo);
                        acheiLancamentoFuturo = true;
                    }

                    listaFormatada.push(item);

                });

                if (!acheiLancamentoFuturo) {
                    listaFormatada.shift();
                }


                return listaFormatada;


            } else {
                lista = novaListaMontada.filter(function (item) {
                    if (achouTituloLancamentoFuturo && item.descricaoMesAno) {
                        return false
                    }
                    if (item.descricaoLancamento.indexOf('futuros') > -1 && item.descricaoMesAno) {
                        achouTituloLancamentoFuturo = true;
                    } else {
                        achouTituloLancamentoFuturo = false
                    }
                    return item;
                });

                if (!lista[0].descricaoMesAno) {
                    lista[0].exibeDiaMesLancamento = true;
                } else if (lista[0].descricaoLancamento.indexOf('futuro') == -1) {
                    lista.shift();
                }

            }
            return lista;

        }


        return novaListaMontada.reverse();
    }

    function verificaLancamentoAnterior(ultimoRegistro, registroAtual) {
        return (typeof ultimoRegistro != 'undefined')
            && (registroAtual.dataLancamento !== ultimoRegistro.dataLancamento || (registroAtual.dataLancamento == ultimoRegistro.dataLancamento && registroAtual.saldoDia));
    }

    function montarListaGridInvertida(listaLancamentos, listaDecrescente, tipoLista) {
        var novaListaLancamento = new Array();
        var listaSemDescricaoMesAno = new Array();
        var dataAnterior;

        listaSemDescricaoMesAno = listaLancamentos.filter(function (item) {
            return !item.descricaoMesAno;
        });

        listaSemDescricaoMesAno.reverse();

        var lancamentoAnterior;
        var meses = ['janeiro', 'fevereiro', 'mar\u00e7o', 'abril', 'maio', 'junho',
            'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'];

        for (var i = 0; i < listaSemDescricaoMesAno.length; i++) {
            var lancamentoAtual = listaSemDescricaoMesAno[i];

            if (lancamentoAtual.dataLancamento == null) {
                var lancamentoPosterior = null;
                if (tipoLista === "lancamentos-futuros" || (tipoLista === "lancamentos" && !listaDecrescente)) {
                    lancamentoPosterior = procurarDataLancamentoPosterior(i, listaSemDescricaoMesAno);

                    if (!lancamentoPosterior) {
                        lancamentoPosterior = procurarDataLancamentoAnterior(i, listaSemDescricaoMesAno);
                    }
                } else {
                    lancamentoPosterior = procurarDataLancamentoAnterior(i, listaSemDescricaoMesAno);

                    if (!lancamentoPosterior) {
                        lancamentoPosterior = procurarDataLancamentoPosterior(i, listaSemDescricaoMesAno);
                    }
                }


                lancamentoAtual.dataLancamento = lancamentoPosterior.dataLancamento;
                lancamentoAtual.diaLancamento = lancamentoPosterior.diaLancamento;
                lancamentoAtual.mesLancamento = lancamentoPosterior.mesLancamento;
                lancamentoAtual.isDataNula = true;
            }

            var dataAtual = moment(lancamentoAtual.dataLancamento, 'DD/MM/YYYY').format('MMYYYY');

            if (lancamentoAnterior && !lancamentoAnterior.lancamentoFuturo && lancamentoAnterior.dataLancamento != null &&
                verificaExibicaoLabelMesAnoLancamento(moment(lancamentoAnterior.dataLancamento, 'DD/MM/YYYY').format('MMYYYY'), dataAtual)) {
                var lancamentoMesAno = {dataLancamento: null, descricaoLancamento: '', descricaoMesAno: true};
                var mes = (parseInt(dataAtual.slice(0, 2)) - 1);
                var ano = dataAtual.slice(2, 6);
                lancamentoMesAno.descricaoLancamento = meses[mes] + ' ' + ano;
                novaListaLancamento.push(lancamentoMesAno);
            }

            lancamentoAtual.exibeDiaMesLancamento = null;

            if (lancamentoAtual.isDataNula) {
                lancamentoAtual.dataLancamento = null;
                lancamentoAtual.diaLancamento = null;
                lancamentoAtual.mesLancamento = null;
            }

            novaListaLancamento.push(lancamentoAtual);

            if (listaDecrescente && lancamentoAtual.dataLancamento === null) {
                dataAnterior = lancamentoAnterior.dataLancamento;
            }

            lancamentoAnterior = lancamentoAtual;

            if (lancamentoAnterior.dataLancamento == null) {
                lancamentoAnterior.dataLancamento = dataAnterior;
            }
        }
        var tituloLancamento = {
            dataLancamento: null,
            descricaoLancamento: "lan\u00e7amentos",
            descricaoMesAno: true,
            lancamentoFuturo: false
        };
        var tituloLancamentoFuturo = {
            dataLancamento: null,
            descricaoLancamento: "lan\u00e7amentos futuros",
            descricaoMesAno: true,
            lancamentoFuturo: true
        };


        if (!listaDecrescente && tipoLista === "lancamentos") {
            $(novaListaLancamento).each(function (index, item) {
                if (item.lancamentoFuturo && item.descricaoMesAno != true) {
                    novaListaLancamento.splice(index, 0, tituloLancamentoFuturo);
                    return false;
                }
            });
        } else if (listaDecrescente && tipoLista === "lancamentos") {
            var possuiLancamentoFuturo = false;
            var indexPrimeiroLancamentoNaoFuturo;
            $(novaListaLancamento).each(function (index, item) {
                if (item.lancamentoFuturo) {
                    possuiLancamentoFuturo = true
                }
                if (!item.lancamentoFuturo && item.descricaoMesAno != true) {
                    indexPrimeiroLancamentoNaoFuturo = index;
                    return false;
                }
            });
            if (possuiLancamentoFuturo) {
                novaListaLancamento.unshift(tituloLancamentoFuturo);
                if (indexPrimeiroLancamentoNaoFuturo) {
                    novaListaLancamento.splice(indexPrimeiroLancamentoNaoFuturo + 1, 0, tituloLancamento);
                }
            }
        }
        return novaListaLancamento;
    }

    function verificaExibicaoLabelMesAnoLancamento(dataAnterior, dataLancamento) {
        return dataAnterior && dataLancamento && dataAnterior !== dataLancamento;
    }

    function procurarDataLancamentoPosterior(posicaoInicial, listaSemDescricaoMesAno) {
        for (var i = posicaoInicial; i < listaSemDescricaoMesAno.length; i++) {
            if (listaSemDescricaoMesAno[i] && listaSemDescricaoMesAno[i].dataLancamento != null) {
                return listaSemDescricaoMesAno[i];
            }
        }
    }

    function procurarDataLancamentoAnterior(posicaoInicial, listaSemDescricaoMesAno) {
        for (var i = posicaoInicial; i >= 0; i--) {
            if (listaSemDescricaoMesAno[i] && listaSemDescricaoMesAno[i].dataLancamento != null) {
                return listaSemDescricaoMesAno[i];
            }
        }
    }

    function adicionaAlerta(idTexto, containerAlerta, textoAlerta) {
        var textoFeedback = document.getElementById(idTexto);

        document.getElementById(containerAlerta).style.clip = 'auto';
        textoAlerta = document.createTextNode(textoAlerta);
        textoFeedback.appendChild(textoAlerta);
        document.getElementById(containerAlerta).setAttribute('role', 'alert');
        textoFeedback.style.display = 'none';
        textoFeedback.style.display = 'inline';
    }

    function limparAlerta(idTexto, container) {
        var textoFeedback = document.getElementById(idTexto);
        if (textoFeedback) {
            textoFeedback.innerText = '';
            textoFeedback.setAttribute('role', 'none');
            document.getElementById(container).style.clip = 'auto';
            document.getElementById(container).removeAttribute('role');
        }
    }

    function carregaDataLayer(aba, enviar) {
        adobeDataLayer.init();
        var url = window.location.protocol + "//" + window.location.hostname
            + window.location.pathname;
        adobeDataLayer.pushSite("IT", "LG", "PF", "Web");
        adobeDataLayer.pushPage("Extrato", url, "Aba", "", "", "", "", "",
            "IT:LG:PF:Extrato:Aba:" + aba);
        adobeDataLayer.pushRule("pageLoad");
        if (enviar) {
            adobeDataLayer.sendDataLayer();
        }
    };

    function scrollElementTo(elemento, offset) {
        $(window).scrollTop($(elemento).offset().top - offset)
    }

    carregaDataLayer("Lancamentos", true);

    function ordenaTabela(elemento, nomeLista, tipoOrdenacao) {
        if (nomeLista === "lancamentos") {
            if (typeof tipoOrdenacao === 'undefined') {
                ordenacaoDecrescenteLancamentos = !ordenacaoDecrescenteLancamentos;
            } else if (tipoOrdenacao = 'maisAntiga') {
                ordenacaoDecrescenteLancamentos = false
            } else {
                ordenacaoDecrescenteLancamentos = true
            }
            lancamentosCompleta = montarListaGridInvertida(lancamentosCompleta, ordenacaoDecrescenteLancamentos, "lancamentos");
            atualizaGridLancamentos(lancamentosCompleta, true);

        } else if (nomeLista === "lancamentos-futuros") {
            ordenacaoDecrescenteLancamentosFuturos = !ordenacaoDecrescenteLancamentosFuturos;
            lancamentosFuturosCompleta = montarListaGridInvertida(lancamentosFuturosCompleta, ordenacaoDecrescenteLancamentosFuturos, "lancamentos-futuros");

            todosLancamentos = {
                lancamentosFuturos: lancamentosFuturosCompleta,
                isOrdenacaoData: true,
                elemento: elemento
            };

            carregarAbaLancamentosFuturos(todosLancamentos);
        }
    }

    var novaInternet = novaInternet || {};
    (function (namespace) {

        namespace.DataHoraAtualizadoEm = function (paramsDataHoraAtualizacao) {
            this.render = function () {
                var template = $('#template-data-hora-atualizacao').html();
                var output = Mustache.render(template, paramsDataHoraAtualizacao);
                document.getElementById(paramsDataHoraAtualizacao.idDataHoraAtualizadoEm).innerHTML = output;
                document.getElementById(paramsDataHoraAtualizacao.idDataHoraAtualizadoEm).style.display = "inline-block";
            };
        };

    })(novaInternet);


    var inserirDataHoraRodape = function (idDivDataHoraAtualizadoEm) {
        var dataHoraAtualizado = filtroLancamentos.filtroSelecionado().dataHoraConsulta;
        var paramsDataHoraAtualizacao = {
            idDataHoraAtualizadoEm: idDivDataHoraAtualizadoEm,
            dataConsulta: dataHoraAtualizado.substring(0, 11),
            horaConsulta: dataHoraAtualizado.substring(11, dataHoraAtualizado.length)
        }

        new novaInternet.DataHoraAtualizadoEm(paramsDataHoraAtualizacao).render();

    }

    var obterAlturaHeader = function () {
        var $header = $("header");
        var headerHeight = $header.outerHeight(true);

        if ($("header").css("position") != "fixed") {
            headerHeight = $header.outerHeight(true) - $header.outerHeight();
        }

        return headerHeight;
    }

    $('#vcTbmPode').on("click", ".card__link", function () {
        if (extrato.literais.desliga.regra == false) {
            adobeDataLayer.init();
            var url = window.location.protocol + "//" + window.location.hostname + window.location.pathname;

            var objAdobe = window.adobeDTM;
            console.log(objAdobe);

            var nome = 'IT:LG:PF:Extrato:Aba:Lancamentos';
            adobeDataLayer.pushSite("IT", "LG", "PF", "Web");
            adobeDataLayer.pushPage("Extrato", this.url, "Aba", "", "", "", "NovaInternet", "", nome);
            adobeDataLayer.pushVisitor(objAdobe.segmento, objAdobe.tipoCliente, objAdobe.iDPF);
            adobeDataLayer.pushCustom("itemClicado", "IT/LG/PF/ContaCorrente/Extrato/VoceAindaPode_LancamentosGuiche");
            adobeDataLayer.pushCustom("events", "ClickElement");
            adobeDataLayer.sendDataLayer();
        }
    });

    $('#vcTbmPode cpv-card').on('click', function ($event) {
        const textoBotao = $event.target.closest("cpv-card").id;
        const mapBotao = new Map(Object.entries(
            {
                "card-guiche": "ExtratoGuicheCaixa",
                "card-extrato-pix": "ExtratoPix",
                "card-comprovantes": "Comprovantes",
                "card-pagamentos": "Pagamentos",
                "card-tranferencias": "Transferencias",
                "card-extrato-poupanca": "ExtratoPoupan&ccedil;a",
                "card-extrato-consolidado": "ExtratoMensalConsolidado"
            }
        ));
        var nomeBotao = mapBotao.get(textoBotao);
        adobeDataLayer.init();

        var objAdobe = window.adobeDTM;
        console.log(objAdobe);

        objAdobe.site = {
            "nome": "IT",
            "ambiente": "LG",
            "negocio": "PF",
            "tipoDeCanal": "Web"
        },
            objAdobe.page = {
                "nome": "IT:LG:PF:Extrato:Aba:Lancamentos",
                "secao": "Extrato",
                "subSecao1": "Aba",
                "ambiente": "NovaInternet"
            },
            objAdobe.visitor = {
                "tipoCliente": objAdobe.tipoCliente,
                "segmento": objAdobe.segmento,
                "iDPF": objAdobe.iDPF
            },
            objAdobe.custom = {
                "squadresponsaveltag": "Assessoria e Resolutividade:Extrato PF"
            }
        objAdobe.events = {
            "category": "Clique",

            "action": "Extrato:Aba:Lancamentos:Atalho" + nomeBotao,

            "label": "BTN:Aba:Lancamentos:Atalho" + nomeBotao
        }
        window.analyticsData = objAdobe;
        adobeDataLayer.sendDataLayer();
    });

    function tageamentoAccordion(statusAccordion) {
        adobeDataLayer.init();

        var objAdobe = window.adobeDTM;

        objAdobe.site = {
            "nome": "IT",
            "ambiente": "LG",
            "negocio": "PF",
            "tipoDeCanal": "Web"
        },
            objAdobe.page = {
                "nome": "IT:LG:PF:Extrato:Aba:Lancamentos",
                "secao": "Extrato",
                "subSecao1": "Aba",
                "ambiente": "NovaInternet"
            },
            objAdobe.custom = {
                "squadresponsaveltag": "Assessoria e Resolutividade:Extrato PF"
            }
        objAdobe.events = {
            "category": "Clique",

            "action": "Extrato:Aba:Lancamentos:AccordionLancFuturos" + statusAccordion,

            "label": "BTN:Aba:Lancamentos:AccordionLancFuturos" + statusAccordion,
        }
        window.analyticsData = objAdobe;
        adobeDataLayer.sendDataLayer();
    }


    function disparaGA4() {
        sdk.track({
            analytics: {
                event_name: 'screen_view',
                parameters: {
                    detail: 'aba:visao-recentes',
                    custom_path: '/conta/consultar/extrato/timeline-idl',
                    implementation_team: 'extrato-hub-de-contas-pf:gerir-vida-financeira'
                }
            }
        })
        console.log(sdk)
    }

    disparaGA4();


</script>
<script type="text/template"
        id="template-extrato-mensagem-tabela-sem-resultado">

    <div id="extrato-alerta-container"
         class="margem-cima100 margem-baixo100 txt-v-align-middle txt-center txt-cor-mensagem-resultado-vazio itau-display-light fonte-tamanho22 grid-12 line-height20">
        {{#iconeEmoticon}}
        <div class="margem-baixo20">
            <img src="https://estatico.itau.com.br/ibanking/pessoa-fisica-conta-corrente-app/img/empty_state.png"/>
        </div>
        {{/iconeEmoticon}}
        <span class="mensagem-erro-lancamentos-futuro">{{{mensagem}}}</span>
    </div>

</script>

<script type="text/template" id="template-data-hora-atualizacao">
    <span class="line-height32 itau-text-regular fonte-tamanho14 cor-605751">atualizado em </span>
    <span class="itau-display-bold cor-13100e">{{{dataConsulta}}}</span>
    <span class="line-height32 itau-text-regular fonte-tamanho14 cor-002721">, &agrave;s</span>
    <span class="itau-display-bold cor-13100e">{{{horaConsulta}}}h</span>
</script>


<script>
    pageNameAtual = "IT:LG:PF:Extrato:Aba:Lancamentos";
    agencia = '::agency::';
    conta = '::account::';

    var classeTrigger = "#linkSairHeader";
    adicionarMedalliaNoFluxo(classeTrigger);
</script>
